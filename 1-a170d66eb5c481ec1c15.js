webpackJsonp([1],{134:function(t,e,i){!function(e,i){t.exports=i()}("undefined"!=typeof self&&self,function(){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=12)}([function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,i){"use strict";e.__esModule=!0;var r,s=(r=i(13))&&r.__esModule?r:{default:r};e.default=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,s.default)(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}()},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),s=n(i(1));function n(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(){(0,r.default)(this,t)}return(0,s.default)(t,null,[{key:"getShaderParts",value:function(t){var e=t.indexOf("shader_body");if(t&&e>-1){var i=t.substring(0,e),r=t.substring(e),s=r.indexOf("{"),n=r.lastIndexOf("}");return[i,r.substring(s+1,n)]}return["",t]}},{key:"getFragmentFloatPrecision",value:function(t){return t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0?"highp":t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}}]),t}();e.default=a,t.exports=e.default},function(t,e,i){(function(t,r){var s;
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
(function(){var n,a=200,o="Expected a function",h="__lodash_hash_undefined__",u="__lodash_placeholder__",l=1,f=2,c=4,m=1,g=2,d=1,_=2,v=4,p=8,x=16,b=32,y=64,T=128,A=256,E=512,P=800,L=16,R=1/0,w=9007199254740991,S=1.7976931348623157e308,M=NaN,U=4294967295,F=U-1,q=U>>>1,z=[["ary",T],["bind",d],["bindKey",_],["curry",p],["curryRight",x],["flip",E],["partial",b],["partialRight",y],["rearg",A]],V="[object Arguments]",C="[object Array]",D="[object AsyncFunction]",B="[object Boolean]",X="[object Date]",I="[object DOMException]",k="[object Error]",N="[object Function]",O="[object GeneratorFunction]",W="[object Map]",Y="[object Number]",j="[object Null]",Q="[object Object]",H="[object Proxy]",G="[object RegExp]",K="[object Set]",$="[object String]",Z="[object Symbol]",J="[object Undefined]",tt="[object WeakMap]",et="[object ArrayBuffer]",it="[object DataView]",rt="[object Float32Array]",st="[object Float64Array]",nt="[object Int8Array]",at="[object Int16Array]",ot="[object Int32Array]",ht="[object Uint8Array]",ut="[object Uint8ClampedArray]",lt="[object Uint16Array]",ft="[object Uint32Array]",ct=/\b__p \+= '';/g,mt=/\b(__p \+=) '' \+/g,gt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,dt=/&(?:amp|lt|gt|quot|#39);/g,_t=/[&<>"']/g,vt=RegExp(dt.source),pt=RegExp(_t.source),xt=/<%-([\s\S]+?)%>/g,bt=/<%([\s\S]+?)%>/g,yt=/<%=([\s\S]+?)%>/g,Tt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,At=/^\w*$/,Et=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pt=/[\\^$.*+?()[\]{}|]/g,Lt=RegExp(Pt.source),Rt=/^\s+|\s+$/g,wt=/^\s+/,St=/\s+$/,Mt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ut=/\{\n\/\* \[wrapped with (.+)\] \*/,Ft=/,? & /,qt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,zt=/\\(\\)?/g,Vt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ct=/\w*$/,Dt=/^[-+]0x[0-9a-f]+$/i,Bt=/^0b[01]+$/i,Xt=/^\[object .+?Constructor\]$/,It=/^0o[0-7]+$/i,kt=/^(?:0|[1-9]\d*)$/,Nt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ot=/($^)/,Wt=/['\n\r\u2028\u2029\\]/g,Yt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",jt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qt="["+jt+"]",Ht="["+Yt+"]",Gt="\\d+",Kt="[a-z\\xdf-\\xf6\\xf8-\\xff]",$t="[^\\ud800-\\udfff"+jt+Gt+"\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",Zt="\\ud83c[\\udffb-\\udfff]",Jt="[^\\ud800-\\udfff]",te="(?:\\ud83c[\\udde6-\\uddff]){2}",ee="[\\ud800-\\udbff][\\udc00-\\udfff]",ie="[A-Z\\xc0-\\xd6\\xd8-\\xde]",re="(?:"+Kt+"|"+$t+")",se="(?:"+ie+"|"+$t+")",ne="(?:"+Ht+"|"+Zt+")?",ae="[\\ufe0e\\ufe0f]?"+ne+"(?:\\u200d(?:"+[Jt,te,ee].join("|")+")[\\ufe0e\\ufe0f]?"+ne+")*",oe="(?:"+["[\\u2700-\\u27bf]",te,ee].join("|")+")"+ae,he="(?:"+[Jt+Ht+"?",Ht,te,ee,"[\\ud800-\\udfff]"].join("|")+")",ue=RegExp("['’]","g"),le=RegExp(Ht,"g"),fe=RegExp(Zt+"(?="+Zt+")|"+he+ae,"g"),ce=RegExp([ie+"?"+Kt+"+(?:['’](?:d|ll|m|re|s|t|ve))?(?="+[Qt,ie,"$"].join("|")+")",se+"+(?:['’](?:D|LL|M|RE|S|T|VE))?(?="+[Qt,ie+re,"$"].join("|")+")",ie+"?"+re+"+(?:['’](?:d|ll|m|re|s|t|ve))?",ie+"+(?:['’](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Gt,oe].join("|"),"g"),me=RegExp("[\\u200d\\ud800-\\udfff"+Yt+"\\ufe0e\\ufe0f]"),ge=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,de=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],_e=-1,ve={};ve[rt]=ve[st]=ve[nt]=ve[at]=ve[ot]=ve[ht]=ve[ut]=ve[lt]=ve[ft]=!0,ve[V]=ve[C]=ve[et]=ve[B]=ve[it]=ve[X]=ve[k]=ve[N]=ve[W]=ve[Y]=ve[Q]=ve[G]=ve[K]=ve[$]=ve[tt]=!1;var pe={};pe[V]=pe[C]=pe[et]=pe[it]=pe[B]=pe[X]=pe[rt]=pe[st]=pe[nt]=pe[at]=pe[ot]=pe[W]=pe[Y]=pe[Q]=pe[G]=pe[K]=pe[$]=pe[Z]=pe[ht]=pe[ut]=pe[lt]=pe[ft]=!0,pe[k]=pe[N]=pe[tt]=!1;var xe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},be=parseFloat,ye=parseInt,Te="object"==typeof t&&t&&t.Object===Object&&t,Ae="object"==typeof self&&self&&self.Object===Object&&self,Ee=Te||Ae||Function("return this")(),Pe="object"==typeof e&&e&&!e.nodeType&&e,Le=Pe&&"object"==typeof r&&r&&!r.nodeType&&r,Re=Le&&Le.exports===Pe,we=Re&&Te.process,Se=function(){try{return we&&we.binding&&we.binding("util")}catch(t){}}(),Me=Se&&Se.isArrayBuffer,Ue=Se&&Se.isDate,Fe=Se&&Se.isMap,qe=Se&&Se.isRegExp,ze=Se&&Se.isSet,Ve=Se&&Se.isTypedArray;function Ce(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}function De(t,e,i,r){for(var s=-1,n=null==t?0:t.length;++s<n;){var a=t[s];e(r,a,i(a),t)}return r}function Be(t,e){for(var i=-1,r=null==t?0:t.length;++i<r&&!1!==e(t[i],i,t););return t}function Xe(t,e){for(var i=-1,r=null==t?0:t.length;++i<r;)if(!e(t[i],i,t))return!1;return!0}function Ie(t,e){for(var i=-1,r=null==t?0:t.length,s=0,n=[];++i<r;){var a=t[i];e(a,i,t)&&(n[s++]=a)}return n}function ke(t,e){return!(null==t||!t.length)&&$e(t,e,0)>-1}function Ne(t,e,i){for(var r=-1,s=null==t?0:t.length;++r<s;)if(i(e,t[r]))return!0;return!1}function Oe(t,e){for(var i=-1,r=null==t?0:t.length,s=Array(r);++i<r;)s[i]=e(t[i],i,t);return s}function We(t,e){for(var i=-1,r=e.length,s=t.length;++i<r;)t[s+i]=e[i];return t}function Ye(t,e,i,r){var s=-1,n=null==t?0:t.length;for(r&&n&&(i=t[++s]);++s<n;)i=e(i,t[s],s,t);return i}function je(t,e,i,r){var s=null==t?0:t.length;for(r&&s&&(i=t[--s]);s--;)i=e(i,t[s],s,t);return i}function Qe(t,e){for(var i=-1,r=null==t?0:t.length;++i<r;)if(e(t[i],i,t))return!0;return!1}var He=ei("length");function Ge(t,e,i){var r;return i(t,function(t,i,s){if(e(t,i,s))return r=i,!1}),r}function Ke(t,e,i,r){for(var s=t.length,n=i+(r?1:-1);r?n--:++n<s;)if(e(t[n],n,t))return n;return-1}function $e(t,e,i){return e==e?function(t,e,i){for(var r=i-1,s=t.length;++r<s;)if(t[r]===e)return r;return-1}(t,e,i):Ke(t,Je,i)}function Ze(t,e,i,r){for(var s=i-1,n=t.length;++s<n;)if(r(t[s],e))return s;return-1}function Je(t){return t!=t}function ti(t,e){var i=null==t?0:t.length;return i?si(t,e)/i:M}function ei(t){return function(e){return null==e?n:e[t]}}function ii(t){return function(e){return null==t?n:t[e]}}function ri(t,e,i,r,s){return s(t,function(t,s,n){i=r?(r=!1,t):e(i,t,s,n)}),i}function si(t,e){for(var i,r=-1,s=t.length;++r<s;){var a=e(t[r]);a!==n&&(i=i===n?a:i+a)}return i}function ni(t,e){for(var i=-1,r=Array(t);++i<t;)r[i]=e(i);return r}function ai(t){return function(e){return t(e)}}function oi(t,e){return Oe(e,function(e){return t[e]})}function hi(t,e){return t.has(e)}function ui(t,e){for(var i=-1,r=t.length;++i<r&&$e(e,t[i],0)>-1;);return i}function li(t,e){for(var i=t.length;i--&&$e(e,t[i],0)>-1;);return i}var fi=ii({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),ci=ii({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function mi(t){return"\\"+xe[t]}function gi(t){return me.test(t)}function di(t){var e=-1,i=Array(t.size);return t.forEach(function(t,r){i[++e]=[r,t]}),i}function _i(t,e){return function(i){return t(e(i))}}function vi(t,e){for(var i=-1,r=t.length,s=0,n=[];++i<r;){var a=t[i];a!==e&&a!==u||(t[i]=u,n[s++]=i)}return n}function pi(t,e){return"__proto__"==e?n:t[e]}function xi(t){var e=-1,i=Array(t.size);return t.forEach(function(t){i[++e]=t}),i}function bi(t){return gi(t)?function(t){for(var e=fe.lastIndex=0;fe.test(t);)++e;return e}(t):He(t)}function yi(t){return gi(t)?function(t){return t.match(fe)||[]}(t):function(t){return t.split("")}(t)}var Ti=ii({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Ai=function t(e){var i,r=(e=null==e?Ee:Ai.defaults(Ee.Object(),e,Ai.pick(Ee,de))).Array,s=e.Date,Yt=e.Error,jt=e.Function,Qt=e.Math,Ht=e.Object,Gt=e.RegExp,Kt=e.String,$t=e.TypeError,Zt=r.prototype,Jt=jt.prototype,te=Ht.prototype,ee=e["__core-js_shared__"],ie=Jt.toString,re=te.hasOwnProperty,se=0,ne=(i=/[^.]+$/.exec(ee&&ee.keys&&ee.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",ae=te.toString,oe=ie.call(Ht),he=Ee._,fe=Gt("^"+ie.call(re).replace(Pt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),me=Re?e.Buffer:n,xe=e.Symbol,Te=e.Uint8Array,Ae=me?me.allocUnsafe:n,Pe=_i(Ht.getPrototypeOf,Ht),Le=Ht.create,we=te.propertyIsEnumerable,Se=Zt.splice,He=xe?xe.isConcatSpreadable:n,ii=xe?xe.iterator:n,Ei=xe?xe.toStringTag:n,Pi=function(){try{var t=En(Ht,"defineProperty");return t({},"",{}),t}catch(t){}}(),Li=e.clearTimeout!==Ee.clearTimeout&&e.clearTimeout,Ri=s&&s.now!==Ee.Date.now&&s.now,wi=e.setTimeout!==Ee.setTimeout&&e.setTimeout,Si=Qt.ceil,Mi=Qt.floor,Ui=Ht.getOwnPropertySymbols,Fi=me?me.isBuffer:n,qi=e.isFinite,zi=Zt.join,Vi=_i(Ht.keys,Ht),Ci=Qt.max,Di=Qt.min,Bi=s.now,Xi=e.parseInt,Ii=Qt.random,ki=Zt.reverse,Ni=En(e,"DataView"),Oi=En(e,"Map"),Wi=En(e,"Promise"),Yi=En(e,"Set"),ji=En(e,"WeakMap"),Qi=En(Ht,"create"),Hi=ji&&new ji,Gi={},Ki=Gn(Ni),$i=Gn(Oi),Zi=Gn(Wi),Ji=Gn(Yi),tr=Gn(ji),er=xe?xe.prototype:n,ir=er?er.valueOf:n,rr=er?er.toString:n;function sr(t){if(co(t)&&!eo(t)&&!(t instanceof hr)){if(t instanceof or)return t;if(re.call(t,"__wrapped__"))return Kn(t)}return new or(t)}var nr=function(){function t(){}return function(e){if(!fo(e))return{};if(Le)return Le(e);t.prototype=e;var i=new t;return t.prototype=n,i}}();function ar(){}function or(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=n}function hr(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=U,this.__views__=[]}function ur(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function lr(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function fr(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function cr(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new fr;++e<i;)this.add(t[e])}function mr(t){var e=this.__data__=new lr(t);this.size=e.size}function gr(t,e){var i=eo(t),r=!i&&to(t),s=!i&&!r&&no(t),n=!i&&!r&&!s&&yo(t),a=i||r||s||n,o=a?ni(t.length,Kt):[],h=o.length;for(var u in t)!e&&!re.call(t,u)||a&&("length"==u||s&&("offset"==u||"parent"==u)||n&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Un(u,h))||o.push(u);return o}function dr(t){var e=t.length;return e?t[us(0,e-1)]:n}function _r(t,e,i){(i===n||$a(t[e],i))&&(i!==n||e in t)||yr(t,e,i)}function vr(t,e,i){var r=t[e];re.call(t,e)&&$a(r,i)&&(i!==n||e in t)||yr(t,e,i)}function pr(t,e){for(var i=t.length;i--;)if($a(t[i][0],e))return i;return-1}function xr(t,e,i,r){return wr(t,function(t,s,n){e(r,t,i(t),n)}),r}function br(t,e){return t&&Ns(e,Oo(e),t)}function yr(t,e,i){"__proto__"==e&&Pi?Pi(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}function Tr(t,e){for(var i=-1,s=e.length,a=r(s),o=null==t;++i<s;)a[i]=o?n:Bo(t,e[i]);return a}function Ar(t,e,i){return t==t&&(i!==n&&(t=t<=i?t:i),e!==n&&(t=t>=e?t:e)),t}function Er(t,e,i,r,s,a){var o,h=e&l,u=e&f,m=e&c;if(i&&(o=s?i(t,r,s,a):i(t)),o!==n)return o;if(!fo(t))return t;var g=eo(t);if(g){if(o=function(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&re.call(t,"index")&&(i.index=t.index,i.input=t.input),i}(t),!h)return ks(t,o)}else{var d=Rn(t),_=d==N||d==O;if(no(t))return Vs(t,h);if(d==Q||d==V||_&&!s){if(o=u||_?{}:Sn(t),!h)return u?function(t,e){return Ns(t,Ln(t),e)}(t,function(t,e){return t&&Ns(e,Wo(e),t)}(o,t)):function(t,e){return Ns(t,Pn(t),e)}(t,br(o,t))}else{if(!pe[d])return s?t:{};o=function(t,e,i){var r,s,n,a=t.constructor;switch(e){case et:return Cs(t);case B:case X:return new a(+t);case it:return function(t,e){var i=e?Cs(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}(t,i);case rt:case st:case nt:case at:case ot:case ht:case ut:case lt:case ft:return Ds(t,i);case W:return new a;case Y:case $:return new a(t);case G:return(n=new(s=t).constructor(s.source,Ct.exec(s))).lastIndex=s.lastIndex,n;case K:return new a;case Z:return r=t,ir?Ht(ir.call(r)):{}}}(t,d,h)}}a||(a=new mr);var v=a.get(t);if(v)return v;if(a.set(t,o),po(t))return t.forEach(function(r){o.add(Er(r,e,i,r,t,a))}),o;if(mo(t))return t.forEach(function(r,s){o.set(s,Er(r,e,i,s,t,a))}),o;var p=g?n:(m?u?vn:_n:u?Wo:Oo)(t);return Be(p||t,function(r,s){p&&(r=t[s=r]),vr(o,s,Er(r,e,i,s,t,a))}),o}function Pr(t,e,i){var r=i.length;if(null==t)return!r;for(t=Ht(t);r--;){var s=i[r],a=e[s],o=t[s];if(o===n&&!(s in t)||!a(o))return!1}return!0}function Lr(t,e,i){if("function"!=typeof t)throw new $t(o);return Nn(function(){t.apply(n,i)},e)}function Rr(t,e,i,r){var s=-1,n=ke,o=!0,h=t.length,u=[],l=e.length;if(!h)return u;i&&(e=Oe(e,ai(i))),r?(n=Ne,o=!1):e.length>=a&&(n=hi,o=!1,e=new cr(e));t:for(;++s<h;){var f=t[s],c=null==i?f:i(f);if(f=r||0!==f?f:0,o&&c==c){for(var m=l;m--;)if(e[m]===c)continue t;u.push(f)}else n(e,c,r)||u.push(f)}return u}sr.templateSettings={escape:xt,evaluate:bt,interpolate:yt,variable:"",imports:{_:sr}},sr.prototype=ar.prototype,sr.prototype.constructor=sr,or.prototype=nr(ar.prototype),or.prototype.constructor=or,hr.prototype=nr(ar.prototype),hr.prototype.constructor=hr,ur.prototype.clear=function(){this.__data__=Qi?Qi(null):{},this.size=0},ur.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},ur.prototype.get=function(t){var e=this.__data__;if(Qi){var i=e[t];return i===h?n:i}return re.call(e,t)?e[t]:n},ur.prototype.has=function(t){var e=this.__data__;return Qi?e[t]!==n:re.call(e,t)},ur.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=Qi&&e===n?h:e,this},lr.prototype.clear=function(){this.__data__=[],this.size=0},lr.prototype.delete=function(t){var e=this.__data__,i=pr(e,t);return!(i<0||(i==e.length-1?e.pop():Se.call(e,i,1),--this.size,0))},lr.prototype.get=function(t){var e=this.__data__,i=pr(e,t);return i<0?n:e[i][1]},lr.prototype.has=function(t){return pr(this.__data__,t)>-1},lr.prototype.set=function(t,e){var i=this.__data__,r=pr(i,t);return r<0?(++this.size,i.push([t,e])):i[r][1]=e,this},fr.prototype.clear=function(){this.size=0,this.__data__={hash:new ur,map:new(Oi||lr),string:new ur}},fr.prototype.delete=function(t){var e=Tn(this,t).delete(t);return this.size-=e?1:0,e},fr.prototype.get=function(t){return Tn(this,t).get(t)},fr.prototype.has=function(t){return Tn(this,t).has(t)},fr.prototype.set=function(t,e){var i=Tn(this,t),r=i.size;return i.set(t,e),this.size+=i.size==r?0:1,this},cr.prototype.add=cr.prototype.push=function(t){return this.__data__.set(t,h),this},cr.prototype.has=function(t){return this.__data__.has(t)},mr.prototype.clear=function(){this.__data__=new lr,this.size=0},mr.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},mr.prototype.get=function(t){return this.__data__.get(t)},mr.prototype.has=function(t){return this.__data__.has(t)},mr.prototype.set=function(t,e){var i=this.__data__;if(i instanceof lr){var r=i.__data__;if(!Oi||r.length<a-1)return r.push([t,e]),this.size=++i.size,this;i=this.__data__=new fr(r)}return i.set(t,e),this.size=i.size,this};var wr=Ys(Cr),Sr=Ys(Dr,!0);function Mr(t,e){var i=!0;return wr(t,function(t,r,s){return i=!!e(t,r,s)}),i}function Ur(t,e,i){for(var r=-1,s=t.length;++r<s;){var a=t[r],o=e(a);if(null!=o&&(h===n?o==o&&!bo(o):i(o,h)))var h=o,u=a}return u}function Fr(t,e){var i=[];return wr(t,function(t,r,s){e(t,r,s)&&i.push(t)}),i}function qr(t,e,i,r,s){var n=-1,a=t.length;for(i||(i=Mn),s||(s=[]);++n<a;){var o=t[n];e>0&&i(o)?e>1?qr(o,e-1,i,r,s):We(s,o):r||(s[s.length]=o)}return s}var zr=js(),Vr=js(!0);function Cr(t,e){return t&&zr(t,e,Oo)}function Dr(t,e){return t&&Vr(t,e,Oo)}function Br(t,e){return Ie(e,function(e){return ho(t[e])})}function Xr(t,e){for(var i=0,r=(e=Us(e,t)).length;null!=t&&i<r;)t=t[Hn(e[i++])];return i&&i==r?t:n}function Ir(t,e,i){var r=e(t);return eo(t)?r:We(r,i(t))}function kr(t){return null==t?t===n?J:j:Ei&&Ei in Ht(t)?function(t){var e=re.call(t,Ei),i=t[Ei];try{t[Ei]=n;var r=!0}catch(t){}var s=ae.call(t);return r&&(e?t[Ei]=i:delete t[Ei]),s}(t):function(t){return ae.call(t)}(t)}function Nr(t,e){return t>e}function Or(t,e){return null!=t&&re.call(t,e)}function Wr(t,e){return null!=t&&e in Ht(t)}function Yr(t,e,i){for(var s=i?Ne:ke,a=t[0].length,o=t.length,h=o,u=r(o),l=1/0,f=[];h--;){var c=t[h];h&&e&&(c=Oe(c,ai(e))),l=Di(c.length,l),u[h]=!i&&(e||a>=120&&c.length>=120)?new cr(h&&c):n}c=t[0];var m=-1,g=u[0];t:for(;++m<a&&f.length<l;){var d=c[m],_=e?e(d):d;if(d=i||0!==d?d:0,!(g?hi(g,_):s(f,_,i))){for(h=o;--h;){var v=u[h];if(!(v?hi(v,_):s(t[h],_,i)))continue t}g&&g.push(_),f.push(d)}}return f}function jr(t,e,i){var r=null==(t=In(t,e=Us(e,t)))?t:t[Hn(oa(e))];return null==r?n:Ce(r,t,i)}function Qr(t){return co(t)&&kr(t)==V}function Hr(t,e,i,r,s){return t===e||(null==t||null==e||!co(t)&&!co(e)?t!=t&&e!=e:function(t,e,i,r,s,a){var o=eo(t),h=eo(e),u=o?C:Rn(t),l=h?C:Rn(e),f=(u=u==V?Q:u)==Q,c=(l=l==V?Q:l)==Q,d=u==l;if(d&&no(t)){if(!no(e))return!1;o=!0,f=!1}if(d&&!f)return a||(a=new mr),o||yo(t)?gn(t,e,i,r,s,a):function(t,e,i,r,s,n,a){switch(i){case it:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case et:return!(t.byteLength!=e.byteLength||!n(new Te(t),new Te(e)));case B:case X:case Y:return $a(+t,+e);case k:return t.name==e.name&&t.message==e.message;case G:case $:return t==e+"";case W:var o=di;case K:var h=r&m;if(o||(o=xi),t.size!=e.size&&!h)return!1;var u=a.get(t);if(u)return u==e;r|=g,a.set(t,e);var l=gn(o(t),o(e),r,s,n,a);return a.delete(t),l;case Z:if(ir)return ir.call(t)==ir.call(e)}return!1}(t,e,u,i,r,s,a);if(!(i&m)){var _=f&&re.call(t,"__wrapped__"),v=c&&re.call(e,"__wrapped__");if(_||v){var p=_?t.value():t,x=v?e.value():e;return a||(a=new mr),s(p,x,i,r,a)}}return!!d&&(a||(a=new mr),function(t,e,i,r,s,a){var o=i&m,h=_n(t),u=h.length;if(u!=_n(e).length&&!o)return!1;for(var l=u;l--;){var f=h[l];if(!(o?f in e:re.call(e,f)))return!1}var c=a.get(t);if(c&&a.get(e))return c==e;var g=!0;a.set(t,e),a.set(e,t);for(var d=o;++l<u;){var _=t[f=h[l]],v=e[f];if(r)var p=o?r(v,_,f,e,t,a):r(_,v,f,t,e,a);if(!(p===n?_===v||s(_,v,i,r,a):p)){g=!1;break}d||(d="constructor"==f)}if(g&&!d){var x=t.constructor,b=e.constructor;x!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof x&&x instanceof x&&"function"==typeof b&&b instanceof b)&&(g=!1)}return a.delete(t),a.delete(e),g}(t,e,i,r,s,a))}(t,e,i,r,Hr,s))}function Gr(t,e,i,r){var s=i.length,a=s,o=!r;if(null==t)return!a;for(t=Ht(t);s--;){var h=i[s];if(o&&h[2]?h[1]!==t[h[0]]:!(h[0]in t))return!1}for(;++s<a;){var u=(h=i[s])[0],l=t[u],f=h[1];if(o&&h[2]){if(l===n&&!(u in t))return!1}else{var c=new mr;if(r)var d=r(l,f,u,t,e,c);if(!(d===n?Hr(f,l,m|g,r,c):d))return!1}}return!0}function Kr(t){return!(!fo(t)||ne&&ne in t)&&(ho(t)?fe:Xt).test(Gn(t))}function $r(t){return"function"==typeof t?t:null==t?dh:"object"==typeof t?eo(t)?is(t[0],t[1]):es(t):Eh(t)}function Zr(t){if(!Cn(t))return Vi(t);var e=[];for(var i in Ht(t))re.call(t,i)&&"constructor"!=i&&e.push(i);return e}function Jr(t,e){return t<e}function ts(t,e){var i=-1,s=ro(t)?r(t.length):[];return wr(t,function(t,r,n){s[++i]=e(t,r,n)}),s}function es(t){var e=An(t);return 1==e.length&&e[0][2]?Bn(e[0][0],e[0][1]):function(i){return i===t||Gr(i,t,e)}}function is(t,e){return qn(t)&&Dn(e)?Bn(Hn(t),e):function(i){var r=Bo(i,t);return r===n&&r===e?Xo(i,t):Hr(e,r,m|g)}}function rs(t,e,i,r,s){t!==e&&zr(e,function(a,o){if(fo(a))s||(s=new mr),function(t,e,i,r,s,a,o){var h=pi(t,i),u=pi(e,i),l=o.get(u);if(l)_r(t,i,l);else{var f=a?a(h,u,i+"",t,e,o):n,c=f===n;if(c){var m=eo(u),g=!m&&no(u),d=!m&&!g&&yo(u);f=u,m||g||d?eo(h)?f=h:so(h)?f=ks(h):g?(c=!1,f=Vs(u,!0)):d?(c=!1,f=Ds(u,!0)):f=[]:_o(u)||to(u)?(f=h,to(h)?f=So(h):(!fo(h)||r&&ho(h))&&(f=Sn(u))):c=!1}c&&(o.set(u,f),s(f,u,r,a,o),o.delete(u)),_r(t,i,f)}}(t,e,o,i,rs,r,s);else{var h=r?r(pi(t,o),a,o+"",t,e,s):n;h===n&&(h=a),_r(t,o,h)}},Wo)}function ss(t,e){var i=t.length;if(i)return Un(e+=e<0?i:0,i)?t[e]:n}function ns(t,e,i){var r=-1;return e=Oe(e.length?e:[dh],ai(yn())),function(t,e){var i=t.length;for(t.sort(e);i--;)t[i]=t[i].value;return t}(ts(t,function(t,i,s){return{criteria:Oe(e,function(e){return e(t)}),index:++r,value:t}}),function(t,e){return function(t,e,i){for(var r=-1,s=t.criteria,n=e.criteria,a=s.length,o=i.length;++r<a;){var h=Bs(s[r],n[r]);if(h)return r>=o?h:h*("desc"==i[r]?-1:1)}return t.index-e.index}(t,e,i)})}function as(t,e,i){for(var r=-1,s=e.length,n={};++r<s;){var a=e[r],o=Xr(t,a);i(o,a)&&cs(n,Us(a,t),o)}return n}function os(t,e,i,r){var s=r?Ze:$e,n=-1,a=e.length,o=t;for(t===e&&(e=ks(e)),i&&(o=Oe(t,ai(i)));++n<a;)for(var h=0,u=e[n],l=i?i(u):u;(h=s(o,l,h,r))>-1;)o!==t&&Se.call(o,h,1),Se.call(t,h,1);return t}function hs(t,e){for(var i=t?e.length:0,r=i-1;i--;){var s=e[i];if(i==r||s!==n){var n=s;Un(s)?Se.call(t,s,1):As(t,s)}}return t}function us(t,e){return t+Mi(Ii()*(e-t+1))}function ls(t,e){var i="";if(!t||e<1||e>w)return i;do{e%2&&(i+=t),(e=Mi(e/2))&&(t+=t)}while(e);return i}function fs(t,e){return On(Xn(t,e,dh),t+"")}function cs(t,e,i,r){if(!fo(t))return t;for(var s=-1,a=(e=Us(e,t)).length,o=a-1,h=t;null!=h&&++s<a;){var u=Hn(e[s]),l=i;if(s!=o){var f=h[u];(l=r?r(f,u,h):n)===n&&(l=fo(f)?f:Un(e[s+1])?[]:{})}vr(h,u,l),h=h[u]}return t}var ms=Hi?function(t,e){return Hi.set(t,e),t}:dh,gs=Pi?function(t,e){return Pi(t,"toString",{configurable:!0,enumerable:!1,value:ch(e),writable:!0})}:dh;function ds(t,e,i){var s=-1,n=t.length;e<0&&(e=-e>n?0:n+e),(i=i>n?n:i)<0&&(i+=n),n=e>i?0:i-e>>>0,e>>>=0;for(var a=r(n);++s<n;)a[s]=t[s+e];return a}function _s(t,e){var i;return wr(t,function(t,r,s){return!(i=e(t,r,s))}),!!i}function vs(t,e,i){var r=0,s=null==t?r:t.length;if("number"==typeof e&&e==e&&s<=q){for(;r<s;){var n=r+s>>>1,a=t[n];null!==a&&!bo(a)&&(i?a<=e:a<e)?r=n+1:s=n}return s}return ps(t,e,dh,i)}function ps(t,e,i,r){e=i(e);for(var s=0,a=null==t?0:t.length,o=e!=e,h=null===e,u=bo(e),l=e===n;s<a;){var f=Mi((s+a)/2),c=i(t[f]),m=c!==n,g=null===c,d=c==c,_=bo(c);if(o)var v=r||d;else v=l?d&&(r||m):h?d&&m&&(r||!g):u?d&&m&&!g&&(r||!_):!g&&!_&&(r?c<=e:c<e);v?s=f+1:a=f}return Di(a,F)}function xs(t,e){for(var i=-1,r=t.length,s=0,n=[];++i<r;){var a=t[i],o=e?e(a):a;if(!i||!$a(o,h)){var h=o;n[s++]=0===a?0:a}}return n}function bs(t){return"number"==typeof t?t:bo(t)?M:+t}function ys(t){if("string"==typeof t)return t;if(eo(t))return Oe(t,ys)+"";if(bo(t))return rr?rr.call(t):"";var e=t+"";return"0"==e&&1/t==-R?"-0":e}function Ts(t,e,i){var r=-1,s=ke,n=t.length,o=!0,h=[],u=h;if(i)o=!1,s=Ne;else if(n>=a){var l=e?null:hn(t);if(l)return xi(l);o=!1,s=hi,u=new cr}else u=e?[]:h;t:for(;++r<n;){var f=t[r],c=e?e(f):f;if(f=i||0!==f?f:0,o&&c==c){for(var m=u.length;m--;)if(u[m]===c)continue t;e&&u.push(c),h.push(f)}else s(u,c,i)||(u!==h&&u.push(c),h.push(f))}return h}function As(t,e){return null==(t=In(t,e=Us(e,t)))||delete t[Hn(oa(e))]}function Es(t,e,i,r){return cs(t,e,i(Xr(t,e)),r)}function Ps(t,e,i,r){for(var s=t.length,n=r?s:-1;(r?n--:++n<s)&&e(t[n],n,t););return i?ds(t,r?0:n,r?n+1:s):ds(t,r?n+1:0,r?s:n)}function Ls(t,e){var i=t;return i instanceof hr&&(i=i.value()),Ye(e,function(t,e){return e.func.apply(e.thisArg,We([t],e.args))},i)}function Rs(t,e,i){var s=t.length;if(s<2)return s?Ts(t[0]):[];for(var n=-1,a=r(s);++n<s;)for(var o=t[n],h=-1;++h<s;)h!=n&&(a[n]=Rr(a[n]||o,t[h],e,i));return Ts(qr(a,1),e,i)}function ws(t,e,i){for(var r=-1,s=t.length,a=e.length,o={};++r<s;){var h=r<a?e[r]:n;i(o,t[r],h)}return o}function Ss(t){return so(t)?t:[]}function Ms(t){return"function"==typeof t?t:dh}function Us(t,e){return eo(t)?t:qn(t,e)?[t]:Qn(Mo(t))}var Fs=fs;function qs(t,e,i){var r=t.length;return i=i===n?r:i,!e&&i>=r?t:ds(t,e,i)}var zs=Li||function(t){return Ee.clearTimeout(t)};function Vs(t,e){if(e)return t.slice();var i=t.length,r=Ae?Ae(i):new t.constructor(i);return t.copy(r),r}function Cs(t){var e=new t.constructor(t.byteLength);return new Te(e).set(new Te(t)),e}function Ds(t,e){var i=e?Cs(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function Bs(t,e){if(t!==e){var i=t!==n,r=null===t,s=t==t,a=bo(t),o=e!==n,h=null===e,u=e==e,l=bo(e);if(!h&&!l&&!a&&t>e||a&&o&&u&&!h&&!l||r&&o&&u||!i&&u||!s)return 1;if(!r&&!a&&!l&&t<e||l&&i&&s&&!r&&!a||h&&i&&s||!o&&s||!u)return-1}return 0}function Xs(t,e,i,s){for(var n=-1,a=t.length,o=i.length,h=-1,u=e.length,l=Ci(a-o,0),f=r(u+l),c=!s;++h<u;)f[h]=e[h];for(;++n<o;)(c||n<a)&&(f[i[n]]=t[n]);for(;l--;)f[h++]=t[n++];return f}function Is(t,e,i,s){for(var n=-1,a=t.length,o=-1,h=i.length,u=-1,l=e.length,f=Ci(a-h,0),c=r(f+l),m=!s;++n<f;)c[n]=t[n];for(var g=n;++u<l;)c[g+u]=e[u];for(;++o<h;)(m||n<a)&&(c[g+i[o]]=t[n++]);return c}function ks(t,e){var i=-1,s=t.length;for(e||(e=r(s));++i<s;)e[i]=t[i];return e}function Ns(t,e,i,r){var s=!i;i||(i={});for(var a=-1,o=e.length;++a<o;){var h=e[a],u=r?r(i[h],t[h],h,i,t):n;u===n&&(u=t[h]),s?yr(i,h,u):vr(i,h,u)}return i}function Os(t,e){return function(i,r){var s=eo(i)?De:xr,n=e?e():{};return s(i,t,yn(r,2),n)}}function Ws(t){return fs(function(e,i){var r=-1,s=i.length,a=s>1?i[s-1]:n,o=s>2?i[2]:n;for(a=t.length>3&&"function"==typeof a?(s--,a):n,o&&Fn(i[0],i[1],o)&&(a=s<3?n:a,s=1),e=Ht(e);++r<s;){var h=i[r];h&&t(e,h,r,a)}return e})}function Ys(t,e){return function(i,r){if(null==i)return i;if(!ro(i))return t(i,r);for(var s=i.length,n=e?s:-1,a=Ht(i);(e?n--:++n<s)&&!1!==r(a[n],n,a););return i}}function js(t){return function(e,i,r){for(var s=-1,n=Ht(e),a=r(e),o=a.length;o--;){var h=a[t?o:++s];if(!1===i(n[h],h,n))break}return e}}function Qs(t){return function(e){var i=gi(e=Mo(e))?yi(e):n,r=i?i[0]:e.charAt(0),s=i?qs(i,1).join(""):e.slice(1);return r[t]()+s}}function Hs(t){return function(e){return Ye(uh(eh(e).replace(ue,"")),t,"")}}function Gs(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var i=nr(t.prototype),r=t.apply(i,e);return fo(r)?r:i}}function Ks(t){return function(e,i,r){var s=Ht(e);if(!ro(e)){var a=yn(i,3);e=Oo(e),i=function(t){return a(s[t],t,s)}}var o=t(e,i,r);return o>-1?s[a?e[o]:o]:n}}function $s(t){return dn(function(e){var i=e.length,r=i,s=or.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new $t(o);if(s&&!h&&"wrapper"==xn(a))var h=new or([],!0)}for(r=h?r:i;++r<i;){var u=xn(a=e[r]),l="wrapper"==u?pn(a):n;h=l&&zn(l[0])&&l[1]==(T|p|b|A)&&!l[4].length&&1==l[9]?h[xn(l[0])].apply(h,l[3]):1==a.length&&zn(a)?h[u]():h.thru(a)}return function(){var t=arguments,r=t[0];if(h&&1==t.length&&eo(r))return h.plant(r).value();for(var s=0,n=i?e[s].apply(this,t):r;++s<i;)n=e[s].call(this,n);return n}})}function Zs(t,e,i,s,a,o,h,u,l,f){var c=e&T,m=e&d,g=e&_,v=e&(p|x),b=e&E,y=g?n:Gs(t);return function d(){for(var _=arguments.length,p=r(_),x=_;x--;)p[x]=arguments[x];if(v)var T=bn(d),A=function(t,e){for(var i=t.length,r=0;i--;)t[i]===e&&++r;return r}(p,T);if(s&&(p=Xs(p,s,a,v)),o&&(p=Is(p,o,h,v)),_-=A,v&&_<f){var E=vi(p,T);return an(t,e,Zs,d.placeholder,i,p,E,u,l,f-_)}var P=m?i:this,L=g?P[t]:t;return _=p.length,u?p=function(t,e){for(var i=t.length,r=Di(e.length,i),s=ks(t);r--;){var a=e[r];t[r]=Un(a,i)?s[a]:n}return t}(p,u):b&&_>1&&p.reverse(),c&&l<_&&(p.length=l),this&&this!==Ee&&this instanceof d&&(L=y||Gs(L)),L.apply(P,p)}}function Js(t,e){return function(i,r){return function(t,e,i,r){return Cr(t,function(t,s,n){e(r,i(t),s,n)}),r}(i,t,e(r),{})}}function tn(t,e){return function(i,r){var s;if(i===n&&r===n)return e;if(i!==n&&(s=i),r!==n){if(s===n)return r;"string"==typeof i||"string"==typeof r?(i=ys(i),r=ys(r)):(i=bs(i),r=bs(r)),s=t(i,r)}return s}}function en(t){return dn(function(e){return e=Oe(e,ai(yn())),fs(function(i){var r=this;return t(e,function(t){return Ce(t,r,i)})})})}function rn(t,e){var i=(e=e===n?" ":ys(e)).length;if(i<2)return i?ls(e,t):e;var r=ls(e,Si(t/bi(e)));return gi(e)?qs(yi(r),0,t).join(""):r.slice(0,t)}function sn(t){return function(e,i,s){return s&&"number"!=typeof s&&Fn(e,i,s)&&(i=s=n),e=Po(e),i===n?(i=e,e=0):i=Po(i),function(t,e,i,s){for(var n=-1,a=Ci(Si((e-t)/(i||1)),0),o=r(a);a--;)o[s?a:++n]=t,t+=i;return o}(e,i,s=s===n?e<i?1:-1:Po(s),t)}}function nn(t){return function(e,i){return"string"==typeof e&&"string"==typeof i||(e=wo(e),i=wo(i)),t(e,i)}}function an(t,e,i,r,s,a,o,h,u,l){var f=e&p;e|=f?b:y,(e&=~(f?y:b))&v||(e&=~(d|_));var c=[t,e,s,f?a:n,f?o:n,f?n:a,f?n:o,h,u,l],m=i.apply(n,c);return zn(t)&&kn(m,c),m.placeholder=r,Wn(m,t,e)}function on(t){var e=Qt[t];return function(t,i){if(t=wo(t),i=null==i?0:Di(Lo(i),292)){var r=(Mo(t)+"e").split("e");return+((r=(Mo(e(r[0]+"e"+(+r[1]+i)))+"e").split("e"))[0]+"e"+(+r[1]-i))}return e(t)}}var hn=Yi&&1/xi(new Yi([,-0]))[1]==R?function(t){return new Yi(t)}:bh;function un(t){return function(e){var i=Rn(e);return i==W?di(e):i==K?function(t){var e=-1,i=Array(t.size);return t.forEach(function(t){i[++e]=[t,t]}),i}(e):function(t,e){return Oe(e,function(e){return[e,t[e]]})}(e,t(e))}}function ln(t,e,i,s,a,h,l,f){var c=e&_;if(!c&&"function"!=typeof t)throw new $t(o);var m=s?s.length:0;if(m||(e&=~(b|y),s=a=n),l=l===n?l:Ci(Lo(l),0),f=f===n?f:Lo(f),m-=a?a.length:0,e&y){var g=s,E=a;s=a=n}var P=c?n:pn(t),L=[t,e,i,s,a,g,E,h,l,f];if(P&&function(t,e){var i=t[1],r=e[1],s=i|r,n=s<(d|_|T),a=r==T&&i==p||r==T&&i==A&&t[7].length<=e[8]||r==(T|A)&&e[7].length<=e[8]&&i==p;if(!n&&!a)return t;r&d&&(t[2]=e[2],s|=i&d?0:v);var o=e[3];if(o){var h=t[3];t[3]=h?Xs(h,o,e[4]):o,t[4]=h?vi(t[3],u):e[4]}(o=e[5])&&(h=t[5],t[5]=h?Is(h,o,e[6]):o,t[6]=h?vi(t[5],u):e[6]),(o=e[7])&&(t[7]=o),r&T&&(t[8]=null==t[8]?e[8]:Di(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=s}(L,P),t=L[0],e=L[1],i=L[2],s=L[3],a=L[4],!(f=L[9]=L[9]===n?c?0:t.length:Ci(L[9]-m,0))&&e&(p|x)&&(e&=~(p|x)),e&&e!=d)R=e==p||e==x?function(t,e,i){var s=Gs(t);return function a(){for(var o=arguments.length,h=r(o),u=o,l=bn(a);u--;)h[u]=arguments[u];var f=o<3&&h[0]!==l&&h[o-1]!==l?[]:vi(h,l);return(o-=f.length)<i?an(t,e,Zs,a.placeholder,n,h,f,n,n,i-o):Ce(this&&this!==Ee&&this instanceof a?s:t,this,h)}}(t,e,f):e!=b&&e!=(d|b)||a.length?Zs.apply(n,L):function(t,e,i,s){var n=e&d,a=Gs(t);return function e(){for(var o=-1,h=arguments.length,u=-1,l=s.length,f=r(l+h),c=this&&this!==Ee&&this instanceof e?a:t;++u<l;)f[u]=s[u];for(;h--;)f[u++]=arguments[++o];return Ce(c,n?i:this,f)}}(t,e,i,s);else var R=function(t,e,i){var r=e&d,s=Gs(t);return function e(){return(this&&this!==Ee&&this instanceof e?s:t).apply(r?i:this,arguments)}}(t,e,i);return Wn((P?ms:kn)(R,L),t,e)}function fn(t,e,i,r){return t===n||$a(t,te[i])&&!re.call(r,i)?e:t}function cn(t,e,i,r,s,a){return fo(t)&&fo(e)&&(a.set(e,t),rs(t,e,n,cn,a),a.delete(e)),t}function mn(t){return _o(t)?n:t}function gn(t,e,i,r,s,a){var o=i&m,h=t.length,u=e.length;if(h!=u&&!(o&&u>h))return!1;var l=a.get(t);if(l&&a.get(e))return l==e;var f=-1,c=!0,d=i&g?new cr:n;for(a.set(t,e),a.set(e,t);++f<h;){var _=t[f],v=e[f];if(r)var p=o?r(v,_,f,e,t,a):r(_,v,f,t,e,a);if(p!==n){if(p)continue;c=!1;break}if(d){if(!Qe(e,function(t,e){if(!hi(d,e)&&(_===t||s(_,t,i,r,a)))return d.push(e)})){c=!1;break}}else if(_!==v&&!s(_,v,i,r,a)){c=!1;break}}return a.delete(t),a.delete(e),c}function dn(t){return On(Xn(t,n,ia),t+"")}function _n(t){return Ir(t,Oo,Pn)}function vn(t){return Ir(t,Wo,Ln)}var pn=Hi?function(t){return Hi.get(t)}:bh;function xn(t){for(var e=t.name+"",i=Gi[e],r=re.call(Gi,e)?i.length:0;r--;){var s=i[r],n=s.func;if(null==n||n==t)return s.name}return e}function bn(t){return(re.call(sr,"placeholder")?sr:t).placeholder}function yn(){var t=sr.iteratee||_h;return t=t===_h?$r:t,arguments.length?t(arguments[0],arguments[1]):t}function Tn(t,e){var i,r,s=t.__data__;return("string"==(r=typeof(i=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==i:null===i)?s["string"==typeof e?"string":"hash"]:s.map}function An(t){for(var e=Oo(t),i=e.length;i--;){var r=e[i],s=t[r];e[i]=[r,s,Dn(s)]}return e}function En(t,e){var i=function(t,e){return null==t?n:t[e]}(t,e);return Kr(i)?i:n}var Pn=Ui?function(t){return null==t?[]:(t=Ht(t),Ie(Ui(t),function(e){return we.call(t,e)}))}:Rh,Ln=Ui?function(t){for(var e=[];t;)We(e,Pn(t)),t=Pe(t);return e}:Rh,Rn=kr;function wn(t,e,i){for(var r=-1,s=(e=Us(e,t)).length,n=!1;++r<s;){var a=Hn(e[r]);if(!(n=null!=t&&i(t,a)))break;t=t[a]}return n||++r!=s?n:!!(s=null==t?0:t.length)&&lo(s)&&Un(a,s)&&(eo(t)||to(t))}function Sn(t){return"function"!=typeof t.constructor||Cn(t)?{}:nr(Pe(t))}function Mn(t){return eo(t)||to(t)||!!(He&&t&&t[He])}function Un(t,e){var i=typeof t;return!!(e=null==e?w:e)&&("number"==i||"symbol"!=i&&kt.test(t))&&t>-1&&t%1==0&&t<e}function Fn(t,e,i){if(!fo(i))return!1;var r=typeof e;return!!("number"==r?ro(i)&&Un(e,i.length):"string"==r&&e in i)&&$a(i[e],t)}function qn(t,e){if(eo(t))return!1;var i=typeof t;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!bo(t))||At.test(t)||!Tt.test(t)||null!=e&&t in Ht(e)}function zn(t){var e=xn(t),i=sr[e];if("function"!=typeof i||!(e in hr.prototype))return!1;if(t===i)return!0;var r=pn(i);return!!r&&t===r[0]}(Ni&&Rn(new Ni(new ArrayBuffer(1)))!=it||Oi&&Rn(new Oi)!=W||Wi&&"[object Promise]"!=Rn(Wi.resolve())||Yi&&Rn(new Yi)!=K||ji&&Rn(new ji)!=tt)&&(Rn=function(t){var e=kr(t),i=e==Q?t.constructor:n,r=i?Gn(i):"";if(r)switch(r){case Ki:return it;case $i:return W;case Zi:return"[object Promise]";case Ji:return K;case tr:return tt}return e});var Vn=ee?ho:wh;function Cn(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||te)}function Dn(t){return t==t&&!fo(t)}function Bn(t,e){return function(i){return null!=i&&i[t]===e&&(e!==n||t in Ht(i))}}function Xn(t,e,i){return e=Ci(e===n?t.length-1:e,0),function(){for(var s=arguments,n=-1,a=Ci(s.length-e,0),o=r(a);++n<a;)o[n]=s[e+n];n=-1;for(var h=r(e+1);++n<e;)h[n]=s[n];return h[e]=i(o),Ce(t,this,h)}}function In(t,e){return e.length<2?t:Xr(t,ds(e,0,-1))}var kn=Yn(ms),Nn=wi||function(t,e){return Ee.setTimeout(t,e)},On=Yn(gs);function Wn(t,e,i){var r=e+"";return On(t,function(t,e){var i=e.length;if(!i)return t;var r=i-1;return e[r]=(i>1?"& ":"")+e[r],e=e.join(i>2?", ":" "),t.replace(Mt,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Be(z,function(i){var r="_."+i[0];e&i[1]&&!ke(t,r)&&t.push(r)}),t.sort()}(function(t){var e=r.match(Ut);return e?e[1].split(Ft):[]}(),i)))}function Yn(t){var e=0,i=0;return function(){var r=Bi(),s=L-(r-i);if(i=r,s>0){if(++e>=P)return arguments[0]}else e=0;return t.apply(n,arguments)}}function jn(t,e){var i=-1,r=t.length,s=r-1;for(e=e===n?r:e;++i<e;){var a=us(i,s),o=t[a];t[a]=t[i],t[i]=o}return t.length=e,t}var Qn=function(t){var e=Ya(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Et,function(t,i,r,s){e.push(r?s.replace(zt,"$1"):i||t)}),e},function(t){return 500===i.size&&i.clear(),t}),i=e.cache;return e}();function Hn(t){if("string"==typeof t||bo(t))return t;var e=t+"";return"0"==e&&1/t==-R?"-0":e}function Gn(t){if(null!=t){try{return ie.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Kn(t){if(t instanceof hr)return t.clone();var e=new or(t.__wrapped__,t.__chain__);return e.__actions__=ks(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var $n=fs(function(t,e){return so(t)?Rr(t,qr(e,1,so,!0)):[]}),Zn=fs(function(t,e){var i=oa(e);return so(i)&&(i=n),so(t)?Rr(t,qr(e,1,so,!0),yn(i,2)):[]}),Jn=fs(function(t,e){var i=oa(e);return so(i)&&(i=n),so(t)?Rr(t,qr(e,1,so,!0),n,i):[]});function ta(t,e,i){var r=null==t?0:t.length;if(!r)return-1;var s=null==i?0:Lo(i);return s<0&&(s=Ci(r+s,0)),Ke(t,yn(e,3),s)}function ea(t,e,i){var r=null==t?0:t.length;if(!r)return-1;var s=r-1;return i!==n&&(s=Lo(i),s=i<0?Ci(r+s,0):Di(s,r-1)),Ke(t,yn(e,3),s,!0)}function ia(t){return null!=t&&t.length?qr(t,1):[]}function ra(t){return t&&t.length?t[0]:n}var sa=fs(function(t){var e=Oe(t,Ss);return e.length&&e[0]===t[0]?Yr(e):[]}),na=fs(function(t){var e=oa(t),i=Oe(t,Ss);return e===oa(i)?e=n:i.pop(),i.length&&i[0]===t[0]?Yr(i,yn(e,2)):[]}),aa=fs(function(t){var e=oa(t),i=Oe(t,Ss);return(e="function"==typeof e?e:n)&&i.pop(),i.length&&i[0]===t[0]?Yr(i,n,e):[]});function oa(t){var e=null==t?0:t.length;return e?t[e-1]:n}var ha=fs(ua);function ua(t,e){return t&&t.length&&e&&e.length?os(t,e):t}var la=dn(function(t,e){var i=null==t?0:t.length,r=Tr(t,e);return hs(t,Oe(e,function(t){return Un(t,i)?+t:t}).sort(Bs)),r});function fa(t){return null==t?t:ki.call(t)}var ca=fs(function(t){return Ts(qr(t,1,so,!0))}),ma=fs(function(t){var e=oa(t);return so(e)&&(e=n),Ts(qr(t,1,so,!0),yn(e,2))}),ga=fs(function(t){var e=oa(t);return e="function"==typeof e?e:n,Ts(qr(t,1,so,!0),n,e)});function da(t){if(!t||!t.length)return[];var e=0;return t=Ie(t,function(t){if(so(t))return e=Ci(t.length,e),!0}),ni(e,function(e){return Oe(t,ei(e))})}function _a(t,e){if(!t||!t.length)return[];var i=da(t);return null==e?i:Oe(i,function(t){return Ce(e,n,t)})}var va=fs(function(t,e){return so(t)?Rr(t,e):[]}),pa=fs(function(t){return Rs(Ie(t,so))}),xa=fs(function(t){var e=oa(t);return so(e)&&(e=n),Rs(Ie(t,so),yn(e,2))}),ba=fs(function(t){var e=oa(t);return e="function"==typeof e?e:n,Rs(Ie(t,so),n,e)}),ya=fs(da),Ta=fs(function(t){var e=t.length,i=e>1?t[e-1]:n;return _a(t,i="function"==typeof i?(t.pop(),i):n)});function Aa(t){var e=sr(t);return e.__chain__=!0,e}function Ea(t,e){return e(t)}var Pa=dn(function(t){var e=t.length,i=e?t[0]:0,r=this.__wrapped__,s=function(e){return Tr(e,t)};return!(e>1||this.__actions__.length)&&r instanceof hr&&Un(i)?((r=r.slice(i,+i+(e?1:0))).__actions__.push({func:Ea,args:[s],thisArg:n}),new or(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(n),t})):this.thru(s)}),La=Os(function(t,e,i){re.call(t,i)?++t[i]:yr(t,i,1)}),Ra=Ks(ta),wa=Ks(ea);function Sa(t,e){return(eo(t)?Be:wr)(t,yn(e,3))}function Ma(t,e){return(eo(t)?function(t,e){for(var i=null==t?0:t.length;i--&&!1!==e(t[i],i,t););return t}:Sr)(t,yn(e,3))}var Ua=Os(function(t,e,i){re.call(t,i)?t[i].push(e):yr(t,i,[e])}),Fa=fs(function(t,e,i){var s=-1,n="function"==typeof e,a=ro(t)?r(t.length):[];return wr(t,function(t){a[++s]=n?Ce(e,t,i):jr(t,e,i)}),a}),qa=Os(function(t,e,i){yr(t,i,e)});function za(t,e){return(eo(t)?Oe:ts)(t,yn(e,3))}var Va=Os(function(t,e,i){t[i?0:1].push(e)},function(){return[[],[]]}),Ca=fs(function(t,e){if(null==t)return[];var i=e.length;return i>1&&Fn(t,e[0],e[1])?e=[]:i>2&&Fn(e[0],e[1],e[2])&&(e=[e[0]]),ns(t,qr(e,1),[])}),Da=Ri||function(){return Ee.Date.now()};function Ba(t,e,i){return e=i?n:e,e=t&&null==e?t.length:e,ln(t,T,n,n,n,n,e)}function Xa(t,e){var i;if("function"!=typeof e)throw new $t(o);return t=Lo(t),function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=n),i}}var Ia=fs(function(t,e,i){var r=d;if(i.length){var s=vi(i,bn(Ia));r|=b}return ln(t,r,e,i,s)}),ka=fs(function(t,e,i){var r=d|_;if(i.length){var s=vi(i,bn(ka));r|=b}return ln(e,r,t,i,s)});function Na(t,e,i){var r,s,a,h,u,l,f=0,c=!1,m=!1,g=!0;if("function"!=typeof t)throw new $t(o);function d(e){var i=r,a=s;return r=s=n,f=e,h=t.apply(a,i)}function _(t){var i=t-l;return l===n||i>=e||i<0||m&&t-f>=a}function v(){var t=Da();if(_(t))return p(t);u=Nn(v,function(t){var i=e-(t-l);return m?Di(i,a-(t-f)):i}(t))}function p(t){return u=n,g&&r?d(t):(r=s=n,h)}function x(){var t=Da(),i=_(t);if(r=arguments,s=this,l=t,i){if(u===n)return function(t){return f=t,u=Nn(v,e),c?d(t):h}(l);if(m)return u=Nn(v,e),d(l)}return u===n&&(u=Nn(v,e)),h}return e=wo(e)||0,fo(i)&&(c=!!i.leading,a=(m="maxWait"in i)?Ci(wo(i.maxWait)||0,e):a,g="trailing"in i?!!i.trailing:g),x.cancel=function(){u!==n&&zs(u),f=0,r=l=s=u=n},x.flush=function(){return u===n?h:p(Da())},x}var Oa=fs(function(t,e){return Lr(t,1,e)}),Wa=fs(function(t,e,i){return Lr(t,wo(e)||0,i)});function Ya(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new $t(o);var i=function(){var r=arguments,s=e?e.apply(this,r):r[0],n=i.cache;if(n.has(s))return n.get(s);var a=t.apply(this,r);return i.cache=n.set(s,a)||n,a};return i.cache=new(Ya.Cache||fr),i}function ja(t){if("function"!=typeof t)throw new $t(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Ya.Cache=fr;var Qa=Fs(function(t,e){var i=(e=1==e.length&&eo(e[0])?Oe(e[0],ai(yn())):Oe(qr(e,1),ai(yn()))).length;return fs(function(r){for(var s=-1,n=Di(r.length,i);++s<n;)r[s]=e[s].call(this,r[s]);return Ce(t,this,r)})}),Ha=fs(function(t,e){var i=vi(e,bn(Ha));return ln(t,b,n,e,i)}),Ga=fs(function(t,e){var i=vi(e,bn(Ga));return ln(t,y,n,e,i)}),Ka=dn(function(t,e){return ln(t,A,n,n,n,e)});function $a(t,e){return t===e||t!=t&&e!=e}var Za=nn(Nr),Ja=nn(function(t,e){return t>=e}),to=Qr(function(){return arguments}())?Qr:function(t){return co(t)&&re.call(t,"callee")&&!we.call(t,"callee")},eo=r.isArray,io=Me?ai(Me):function(t){return co(t)&&kr(t)==et};function ro(t){return null!=t&&lo(t.length)&&!ho(t)}function so(t){return co(t)&&ro(t)}var no=Fi||wh,ao=Ue?ai(Ue):function(t){return co(t)&&kr(t)==X};function oo(t){if(!co(t))return!1;var e=kr(t);return e==k||e==I||"string"==typeof t.message&&"string"==typeof t.name&&!_o(t)}function ho(t){if(!fo(t))return!1;var e=kr(t);return e==N||e==O||e==D||e==H}function uo(t){return"number"==typeof t&&t==Lo(t)}function lo(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=w}function fo(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function co(t){return null!=t&&"object"==typeof t}var mo=Fe?ai(Fe):function(t){return co(t)&&Rn(t)==W};function go(t){return"number"==typeof t||co(t)&&kr(t)==Y}function _o(t){if(!co(t)||kr(t)!=Q)return!1;var e=Pe(t);if(null===e)return!0;var i=re.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&ie.call(i)==oe}var vo=qe?ai(qe):function(t){return co(t)&&kr(t)==G},po=ze?ai(ze):function(t){return co(t)&&Rn(t)==K};function xo(t){return"string"==typeof t||!eo(t)&&co(t)&&kr(t)==$}function bo(t){return"symbol"==typeof t||co(t)&&kr(t)==Z}var yo=Ve?ai(Ve):function(t){return co(t)&&lo(t.length)&&!!ve[kr(t)]},To=nn(Jr),Ao=nn(function(t,e){return t<=e});function Eo(t){if(!t)return[];if(ro(t))return xo(t)?yi(t):ks(t);if(ii&&t[ii])return function(t){for(var e,i=[];!(e=t.next()).done;)i.push(e.value);return i}(t[ii]());var e=Rn(t);return(e==W?di:e==K?xi:Zo)(t)}function Po(t){return t?(t=wo(t))===R||t===-R?(t<0?-1:1)*S:t==t?t:0:0===t?t:0}function Lo(t){var e=Po(t),i=e%1;return e==e?i?e-i:e:0}function Ro(t){return t?Ar(Lo(t),0,U):0}function wo(t){if("number"==typeof t)return t;if(bo(t))return M;if(fo(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=fo(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Rt,"");var i=Bt.test(t);return i||It.test(t)?ye(t.slice(2),i?2:8):Dt.test(t)?M:+t}function So(t){return Ns(t,Wo(t))}function Mo(t){return null==t?"":ys(t)}var Uo=Ws(function(t,e){if(Cn(e)||ro(e))Ns(e,Oo(e),t);else for(var i in e)re.call(e,i)&&vr(t,i,e[i])}),Fo=Ws(function(t,e){Ns(e,Wo(e),t)}),qo=Ws(function(t,e,i,r){Ns(e,Wo(e),t,r)}),zo=Ws(function(t,e,i,r){Ns(e,Oo(e),t,r)}),Vo=dn(Tr),Co=fs(function(t,e){t=Ht(t);var i=-1,r=e.length,s=r>2?e[2]:n;for(s&&Fn(e[0],e[1],s)&&(r=1);++i<r;)for(var a=e[i],o=Wo(a),h=-1,u=o.length;++h<u;){var l=o[h],f=t[l];(f===n||$a(f,te[l])&&!re.call(t,l))&&(t[l]=a[l])}return t}),Do=fs(function(t){return t.push(n,cn),Ce(jo,n,t)});function Bo(t,e,i){var r=null==t?n:Xr(t,e);return r===n?i:r}function Xo(t,e){return null!=t&&wn(t,e,Wr)}var Io=Js(function(t,e,i){null!=e&&"function"!=typeof e.toString&&(e=ae.call(e)),t[e]=i},ch(dh)),ko=Js(function(t,e,i){null!=e&&"function"!=typeof e.toString&&(e=ae.call(e)),re.call(t,e)?t[e].push(i):t[e]=[i]},yn),No=fs(jr);function Oo(t){return ro(t)?gr(t):Zr(t)}function Wo(t){return ro(t)?gr(t,!0):function(t){if(!fo(t))return function(t){var e=[];if(null!=t)for(var i in Ht(t))e.push(i);return e}(t);var e=Cn(t),i=[];for(var r in t)("constructor"!=r||!e&&re.call(t,r))&&i.push(r);return i}(t)}var Yo=Ws(function(t,e,i){rs(t,e,i)}),jo=Ws(function(t,e,i,r){rs(t,e,i,r)}),Qo=dn(function(t,e){var i={};if(null==t)return i;var r=!1;e=Oe(e,function(e){return e=Us(e,t),r||(r=e.length>1),e}),Ns(t,vn(t),i),r&&(i=Er(i,l|f|c,mn));for(var s=e.length;s--;)As(i,e[s]);return i}),Ho=dn(function(t,e){return null==t?{}:function(t,e){return as(t,e,function(e,i){return Xo(t,i)})}(t,e)});function Go(t,e){if(null==t)return{};var i=Oe(vn(t),function(t){return[t]});return e=yn(e),as(t,i,function(t,i){return e(t,i[0])})}var Ko=un(Oo),$o=un(Wo);function Zo(t){return null==t?[]:oi(t,Oo(t))}var Jo=Hs(function(t,e,i){return e=e.toLowerCase(),t+(i?th(e):e)});function th(t){return hh(Mo(t).toLowerCase())}function eh(t){return(t=Mo(t))&&t.replace(Nt,fi).replace(le,"")}var ih=Hs(function(t,e,i){return t+(i?"-":"")+e.toLowerCase()}),rh=Hs(function(t,e,i){return t+(i?" ":"")+e.toLowerCase()}),sh=Qs("toLowerCase"),nh=Hs(function(t,e,i){return t+(i?"_":"")+e.toLowerCase()}),ah=Hs(function(t,e,i){return t+(i?" ":"")+hh(e)}),oh=Hs(function(t,e,i){return t+(i?" ":"")+e.toUpperCase()}),hh=Qs("toUpperCase");function uh(t,e,i){return t=Mo(t),(e=i?n:e)===n?function(t){return ge.test(t)}(t)?function(t){return t.match(ce)||[]}(t):function(t){return t.match(qt)||[]}(t):t.match(e)||[]}var lh=fs(function(t,e){try{return Ce(t,n,e)}catch(t){return oo(t)?t:new Yt(t)}}),fh=dn(function(t,e){return Be(e,function(e){e=Hn(e),yr(t,e,Ia(t[e],t))}),t});function ch(t){return function(){return t}}var mh=$s(),gh=$s(!0);function dh(t){return t}function _h(t){return $r("function"==typeof t?t:Er(t,l))}var vh=fs(function(t,e){return function(i){return jr(i,t,e)}}),ph=fs(function(t,e){return function(i){return jr(t,i,e)}});function xh(t,e,i){var r=Oo(e),s=Br(e,r);null!=i||fo(e)&&(s.length||!r.length)||(i=e,e=t,t=this,s=Br(e,Oo(e)));var n=!(fo(i)&&"chain"in i&&!i.chain),a=ho(t);return Be(s,function(i){var r=e[i];t[i]=r,a&&(t.prototype[i]=function(){var e=this.__chain__;if(n||e){var i=t(this.__wrapped__);return(i.__actions__=ks(this.__actions__)).push({func:r,args:arguments,thisArg:t}),i.__chain__=e,i}return r.apply(t,We([this.value()],arguments))})}),t}function bh(){}var yh=en(Oe),Th=en(Xe),Ah=en(Qe);function Eh(t){return qn(t)?ei(Hn(t)):function(t){return function(e){return Xr(e,t)}}(t)}var Ph=sn(),Lh=sn(!0);function Rh(){return[]}function wh(){return!1}var Sh,Mh=tn(function(t,e){return t+e},0),Uh=on("ceil"),Fh=tn(function(t,e){return t/e},1),qh=on("floor"),zh=tn(function(t,e){return t*e},1),Vh=on("round"),Ch=tn(function(t,e){return t-e},0);return sr.after=function(t,e){if("function"!=typeof e)throw new $t(o);return t=Lo(t),function(){if(--t<1)return e.apply(this,arguments)}},sr.ary=Ba,sr.assign=Uo,sr.assignIn=Fo,sr.assignInWith=qo,sr.assignWith=zo,sr.at=Vo,sr.before=Xa,sr.bind=Ia,sr.bindAll=fh,sr.bindKey=ka,sr.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return eo(t)?t:[t]},sr.chain=Aa,sr.chunk=function(t,e,i){e=(i?Fn(t,e,i):e===n)?1:Ci(Lo(e),0);var s=null==t?0:t.length;if(!s||e<1)return[];for(var a=0,o=0,h=r(Si(s/e));a<s;)h[o++]=ds(t,a,a+=e);return h},sr.compact=function(t){for(var e=-1,i=null==t?0:t.length,r=0,s=[];++e<i;){var n=t[e];n&&(s[r++]=n)}return s},sr.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),i=arguments[0],s=t;s--;)e[s-1]=arguments[s];return We(eo(i)?ks(i):[i],qr(e,1))},sr.cond=function(t){var e=null==t?0:t.length,i=yn();return t=e?Oe(t,function(t){if("function"!=typeof t[1])throw new $t(o);return[i(t[0]),t[1]]}):[],fs(function(i){for(var r=-1;++r<e;){var s=t[r];if(Ce(s[0],this,i))return Ce(s[1],this,i)}})},sr.conforms=function(t){return function(t){var e=Oo(t);return function(i){return Pr(i,t,e)}}(Er(t,l))},sr.constant=ch,sr.countBy=La,sr.create=function(t,e){var i=nr(t);return null==e?i:br(i,e)},sr.curry=function t(e,i,r){var s=ln(e,p,n,n,n,n,n,i=r?n:i);return s.placeholder=t.placeholder,s},sr.curryRight=function t(e,i,r){var s=ln(e,x,n,n,n,n,n,i=r?n:i);return s.placeholder=t.placeholder,s},sr.debounce=Na,sr.defaults=Co,sr.defaultsDeep=Do,sr.defer=Oa,sr.delay=Wa,sr.difference=$n,sr.differenceBy=Zn,sr.differenceWith=Jn,sr.drop=function(t,e,i){var r=null==t?0:t.length;return r?ds(t,(e=i||e===n?1:Lo(e))<0?0:e,r):[]},sr.dropRight=function(t,e,i){var r=null==t?0:t.length;return r?ds(t,0,(e=r-(e=i||e===n?1:Lo(e)))<0?0:e):[]},sr.dropRightWhile=function(t,e){return t&&t.length?Ps(t,yn(e,3),!0,!0):[]},sr.dropWhile=function(t,e){return t&&t.length?Ps(t,yn(e,3),!0):[]},sr.fill=function(t,e,i,r){var s=null==t?0:t.length;return s?(i&&"number"!=typeof i&&Fn(t,e,i)&&(i=0,r=s),function(t,e,i,r){var s=t.length;for((i=Lo(i))<0&&(i=-i>s?0:s+i),(r=r===n||r>s?s:Lo(r))<0&&(r+=s),r=i>r?0:Ro(r);i<r;)t[i++]=e;return t}(t,e,i,r)):[]},sr.filter=function(t,e){return(eo(t)?Ie:Fr)(t,yn(e,3))},sr.flatMap=function(t,e){return qr(za(t,e),1)},sr.flatMapDeep=function(t,e){return qr(za(t,e),R)},sr.flatMapDepth=function(t,e,i){return i=i===n?1:Lo(i),qr(za(t,e),i)},sr.flatten=ia,sr.flattenDeep=function(t){return null!=t&&t.length?qr(t,R):[]},sr.flattenDepth=function(t,e){return null!=t&&t.length?qr(t,e=e===n?1:Lo(e)):[]},sr.flip=function(t){return ln(t,E)},sr.flow=mh,sr.flowRight=gh,sr.fromPairs=function(t){for(var e=-1,i=null==t?0:t.length,r={};++e<i;){var s=t[e];r[s[0]]=s[1]}return r},sr.functions=function(t){return null==t?[]:Br(t,Oo(t))},sr.functionsIn=function(t){return null==t?[]:Br(t,Wo(t))},sr.groupBy=Ua,sr.initial=function(t){return null!=t&&t.length?ds(t,0,-1):[]},sr.intersection=sa,sr.intersectionBy=na,sr.intersectionWith=aa,sr.invert=Io,sr.invertBy=ko,sr.invokeMap=Fa,sr.iteratee=_h,sr.keyBy=qa,sr.keys=Oo,sr.keysIn=Wo,sr.map=za,sr.mapKeys=function(t,e){var i={};return e=yn(e,3),Cr(t,function(t,r,s){yr(i,e(t,r,s),t)}),i},sr.mapValues=function(t,e){var i={};return e=yn(e,3),Cr(t,function(t,r,s){yr(i,r,e(t,r,s))}),i},sr.matches=function(t){return es(Er(t,l))},sr.matchesProperty=function(t,e){return is(t,Er(e,l))},sr.memoize=Ya,sr.merge=Yo,sr.mergeWith=jo,sr.method=vh,sr.methodOf=ph,sr.mixin=xh,sr.negate=ja,sr.nthArg=function(t){return t=Lo(t),fs(function(e){return ss(e,t)})},sr.omit=Qo,sr.omitBy=function(t,e){return Go(t,ja(yn(e)))},sr.once=function(t){return Xa(2,t)},sr.orderBy=function(t,e,i,r){return null==t?[]:(eo(e)||(e=null==e?[]:[e]),eo(i=r?n:i)||(i=null==i?[]:[i]),ns(t,e,i))},sr.over=yh,sr.overArgs=Qa,sr.overEvery=Th,sr.overSome=Ah,sr.partial=Ha,sr.partialRight=Ga,sr.partition=Va,sr.pick=Ho,sr.pickBy=Go,sr.property=Eh,sr.propertyOf=function(t){return function(e){return null==t?n:Xr(t,e)}},sr.pull=ha,sr.pullAll=ua,sr.pullAllBy=function(t,e,i){return t&&t.length&&e&&e.length?os(t,e,yn(i,2)):t},sr.pullAllWith=function(t,e,i){return t&&t.length&&e&&e.length?os(t,e,n,i):t},sr.pullAt=la,sr.range=Ph,sr.rangeRight=Lh,sr.rearg=Ka,sr.reject=function(t,e){return(eo(t)?Ie:Fr)(t,ja(yn(e,3)))},sr.remove=function(t,e){var i=[];if(!t||!t.length)return i;var r=-1,s=[],n=t.length;for(e=yn(e,3);++r<n;){var a=t[r];e(a,r,t)&&(i.push(a),s.push(r))}return hs(t,s),i},sr.rest=function(t,e){if("function"!=typeof t)throw new $t(o);return fs(t,e=e===n?e:Lo(e))},sr.reverse=fa,sr.sampleSize=function(t,e,i){return e=(i?Fn(t,e,i):e===n)?1:Lo(e),(eo(t)?function(t,e){return jn(ks(t),Ar(e,0,t.length))}:function(t,e){var i=Zo(t);return jn(i,Ar(e,0,i.length))})(t,e)},sr.set=function(t,e,i){return null==t?t:cs(t,e,i)},sr.setWith=function(t,e,i,r){return r="function"==typeof r?r:n,null==t?t:cs(t,e,i,r)},sr.shuffle=function(t){return(eo(t)?function(t){return jn(ks(t))}:function(t){return jn(Zo(t))})(t)},sr.slice=function(t,e,i){var r=null==t?0:t.length;return r?(i&&"number"!=typeof i&&Fn(t,e,i)?(e=0,i=r):(e=null==e?0:Lo(e),i=i===n?r:Lo(i)),ds(t,e,i)):[]},sr.sortBy=Ca,sr.sortedUniq=function(t){return t&&t.length?xs(t):[]},sr.sortedUniqBy=function(t,e){return t&&t.length?xs(t,yn(e,2)):[]},sr.split=function(t,e,i){return i&&"number"!=typeof i&&Fn(t,e,i)&&(e=i=n),(i=i===n?U:i>>>0)?(t=Mo(t))&&("string"==typeof e||null!=e&&!vo(e))&&!(e=ys(e))&&gi(t)?qs(yi(t),0,i):t.split(e,i):[]},sr.spread=function(t,e){if("function"!=typeof t)throw new $t(o);return e=null==e?0:Ci(Lo(e),0),fs(function(i){var r=i[e],s=qs(i,0,e);return r&&We(s,r),Ce(t,this,s)})},sr.tail=function(t){var e=null==t?0:t.length;return e?ds(t,1,e):[]},sr.take=function(t,e,i){return t&&t.length?ds(t,0,(e=i||e===n?1:Lo(e))<0?0:e):[]},sr.takeRight=function(t,e,i){var r=null==t?0:t.length;return r?ds(t,(e=r-(e=i||e===n?1:Lo(e)))<0?0:e,r):[]},sr.takeRightWhile=function(t,e){return t&&t.length?Ps(t,yn(e,3),!1,!0):[]},sr.takeWhile=function(t,e){return t&&t.length?Ps(t,yn(e,3)):[]},sr.tap=function(t,e){return e(t),t},sr.throttle=function(t,e,i){var r=!0,s=!0;if("function"!=typeof t)throw new $t(o);return fo(i)&&(r="leading"in i?!!i.leading:r,s="trailing"in i?!!i.trailing:s),Na(t,e,{leading:r,maxWait:e,trailing:s})},sr.thru=Ea,sr.toArray=Eo,sr.toPairs=Ko,sr.toPairsIn=$o,sr.toPath=function(t){return eo(t)?Oe(t,Hn):bo(t)?[t]:ks(Qn(Mo(t)))},sr.toPlainObject=So,sr.transform=function(t,e,i){var r=eo(t),s=r||no(t)||yo(t);if(e=yn(e,4),null==i){var n=t&&t.constructor;i=s?r?new n:[]:fo(t)&&ho(n)?nr(Pe(t)):{}}return(s?Be:Cr)(t,function(t,r,s){return e(i,t,r,s)}),i},sr.unary=function(t){return Ba(t,1)},sr.union=ca,sr.unionBy=ma,sr.unionWith=ga,sr.uniq=function(t){return t&&t.length?Ts(t):[]},sr.uniqBy=function(t,e){return t&&t.length?Ts(t,yn(e,2)):[]},sr.uniqWith=function(t,e){return e="function"==typeof e?e:n,t&&t.length?Ts(t,n,e):[]},sr.unset=function(t,e){return null==t||As(t,e)},sr.unzip=da,sr.unzipWith=_a,sr.update=function(t,e,i){return null==t?t:Es(t,e,Ms(i))},sr.updateWith=function(t,e,i,r){return r="function"==typeof r?r:n,null==t?t:Es(t,e,Ms(i),r)},sr.values=Zo,sr.valuesIn=function(t){return null==t?[]:oi(t,Wo(t))},sr.without=va,sr.words=uh,sr.wrap=function(t,e){return Ha(Ms(e),t)},sr.xor=pa,sr.xorBy=xa,sr.xorWith=ba,sr.zip=ya,sr.zipObject=function(t,e){return ws(t||[],e||[],vr)},sr.zipObjectDeep=function(t,e){return ws(t||[],e||[],cs)},sr.zipWith=Ta,sr.entries=Ko,sr.entriesIn=$o,sr.extend=Fo,sr.extendWith=qo,xh(sr,sr),sr.add=Mh,sr.attempt=lh,sr.camelCase=Jo,sr.capitalize=th,sr.ceil=Uh,sr.clamp=function(t,e,i){return i===n&&(i=e,e=n),i!==n&&(i=(i=wo(i))==i?i:0),e!==n&&(e=(e=wo(e))==e?e:0),Ar(wo(t),e,i)},sr.clone=function(t){return Er(t,c)},sr.cloneDeep=function(t){return Er(t,l|c)},sr.cloneDeepWith=function(t,e){return Er(t,l|c,e="function"==typeof e?e:n)},sr.cloneWith=function(t,e){return Er(t,c,e="function"==typeof e?e:n)},sr.conformsTo=function(t,e){return null==e||Pr(t,e,Oo(e))},sr.deburr=eh,sr.defaultTo=function(t,e){return null==t||t!=t?e:t},sr.divide=Fh,sr.endsWith=function(t,e,i){t=Mo(t),e=ys(e);var r=t.length,s=i=i===n?r:Ar(Lo(i),0,r);return(i-=e.length)>=0&&t.slice(i,s)==e},sr.eq=$a,sr.escape=function(t){return(t=Mo(t))&&pt.test(t)?t.replace(_t,ci):t},sr.escapeRegExp=function(t){return(t=Mo(t))&&Lt.test(t)?t.replace(Pt,"\\$&"):t},sr.every=function(t,e,i){var r=eo(t)?Xe:Mr;return i&&Fn(t,e,i)&&(e=n),r(t,yn(e,3))},sr.find=Ra,sr.findIndex=ta,sr.findKey=function(t,e){return Ge(t,yn(e,3),Cr)},sr.findLast=wa,sr.findLastIndex=ea,sr.findLastKey=function(t,e){return Ge(t,yn(e,3),Dr)},sr.floor=qh,sr.forEach=Sa,sr.forEachRight=Ma,sr.forIn=function(t,e){return null==t?t:zr(t,yn(e,3),Wo)},sr.forInRight=function(t,e){return null==t?t:Vr(t,yn(e,3),Wo)},sr.forOwn=function(t,e){return t&&Cr(t,yn(e,3))},sr.forOwnRight=function(t,e){return t&&Dr(t,yn(e,3))},sr.get=Bo,sr.gt=Za,sr.gte=Ja,sr.has=function(t,e){return null!=t&&wn(t,e,Or)},sr.hasIn=Xo,sr.head=ra,sr.identity=dh,sr.includes=function(t,e,i,r){t=ro(t)?t:Zo(t),i=i&&!r?Lo(i):0;var s=t.length;return i<0&&(i=Ci(s+i,0)),xo(t)?i<=s&&t.indexOf(e,i)>-1:!!s&&$e(t,e,i)>-1},sr.indexOf=function(t,e,i){var r=null==t?0:t.length;if(!r)return-1;var s=null==i?0:Lo(i);return s<0&&(s=Ci(r+s,0)),$e(t,e,s)},sr.inRange=function(t,e,i){return e=Po(e),i===n?(i=e,e=0):i=Po(i),function(t,e,i){return t>=Di(e,i)&&t<Ci(e,i)}(t=wo(t),e,i)},sr.invoke=No,sr.isArguments=to,sr.isArray=eo,sr.isArrayBuffer=io,sr.isArrayLike=ro,sr.isArrayLikeObject=so,sr.isBoolean=function(t){return!0===t||!1===t||co(t)&&kr(t)==B},sr.isBuffer=no,sr.isDate=ao,sr.isElement=function(t){return co(t)&&1===t.nodeType&&!_o(t)},sr.isEmpty=function(t){if(null==t)return!0;if(ro(t)&&(eo(t)||"string"==typeof t||"function"==typeof t.splice||no(t)||yo(t)||to(t)))return!t.length;var e=Rn(t);if(e==W||e==K)return!t.size;if(Cn(t))return!Zr(t).length;for(var i in t)if(re.call(t,i))return!1;return!0},sr.isEqual=function(t,e){return Hr(t,e)},sr.isEqualWith=function(t,e,i){var r=(i="function"==typeof i?i:n)?i(t,e):n;return r===n?Hr(t,e,n,i):!!r},sr.isError=oo,sr.isFinite=function(t){return"number"==typeof t&&qi(t)},sr.isFunction=ho,sr.isInteger=uo,sr.isLength=lo,sr.isMap=mo,sr.isMatch=function(t,e){return t===e||Gr(t,e,An(e))},sr.isMatchWith=function(t,e,i){return i="function"==typeof i?i:n,Gr(t,e,An(e),i)},sr.isNaN=function(t){return go(t)&&t!=+t},sr.isNative=function(t){if(Vn(t))throw new Yt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Kr(t)},sr.isNil=function(t){return null==t},sr.isNull=function(t){return null===t},sr.isNumber=go,sr.isObject=fo,sr.isObjectLike=co,sr.isPlainObject=_o,sr.isRegExp=vo,sr.isSafeInteger=function(t){return uo(t)&&t>=-w&&t<=w},sr.isSet=po,sr.isString=xo,sr.isSymbol=bo,sr.isTypedArray=yo,sr.isUndefined=function(t){return t===n},sr.isWeakMap=function(t){return co(t)&&Rn(t)==tt},sr.isWeakSet=function(t){return co(t)&&"[object WeakSet]"==kr(t)},sr.join=function(t,e){return null==t?"":zi.call(t,e)},sr.kebabCase=ih,sr.last=oa,sr.lastIndexOf=function(t,e,i){var r=null==t?0:t.length;if(!r)return-1;var s=r;return i!==n&&(s=(s=Lo(i))<0?Ci(r+s,0):Di(s,r-1)),e==e?function(t,e,i){for(var r=s+1;r--;)if(t[r]===e)return r;return r}(t,e):Ke(t,Je,s,!0)},sr.lowerCase=rh,sr.lowerFirst=sh,sr.lt=To,sr.lte=Ao,sr.max=function(t){return t&&t.length?Ur(t,dh,Nr):n},sr.maxBy=function(t,e){return t&&t.length?Ur(t,yn(e,2),Nr):n},sr.mean=function(t){return ti(t,dh)},sr.meanBy=function(t,e){return ti(t,yn(e,2))},sr.min=function(t){return t&&t.length?Ur(t,dh,Jr):n},sr.minBy=function(t,e){return t&&t.length?Ur(t,yn(e,2),Jr):n},sr.stubArray=Rh,sr.stubFalse=wh,sr.stubObject=function(){return{}},sr.stubString=function(){return""},sr.stubTrue=function(){return!0},sr.multiply=zh,sr.nth=function(t,e){return t&&t.length?ss(t,Lo(e)):n},sr.noConflict=function(){return Ee._===this&&(Ee._=he),this},sr.noop=bh,sr.now=Da,sr.pad=function(t,e,i){t=Mo(t);var r=(e=Lo(e))?bi(t):0;if(!e||r>=e)return t;var s=(e-r)/2;return rn(Mi(s),i)+t+rn(Si(s),i)},sr.padEnd=function(t,e,i){t=Mo(t);var r=(e=Lo(e))?bi(t):0;return e&&r<e?t+rn(e-r,i):t},sr.padStart=function(t,e,i){t=Mo(t);var r=(e=Lo(e))?bi(t):0;return e&&r<e?rn(e-r,i)+t:t},sr.parseInt=function(t,e,i){return i||null==e?e=0:e&&(e=+e),Xi(Mo(t).replace(wt,""),e||0)},sr.random=function(t,e,i){if(i&&"boolean"!=typeof i&&Fn(t,e,i)&&(e=i=n),i===n&&("boolean"==typeof e?(i=e,e=n):"boolean"==typeof t&&(i=t,t=n)),t===n&&e===n?(t=0,e=1):(t=Po(t),e===n?(e=t,t=0):e=Po(e)),t>e){var r=t;t=e,e=r}if(i||t%1||e%1){var s=Ii();return Di(t+s*(e-t+be("1e-"+((s+"").length-1))),e)}return us(t,e)},sr.reduce=function(t,e,i){var r=eo(t)?Ye:ri,s=arguments.length<3;return r(t,yn(e,4),i,s,wr)},sr.reduceRight=function(t,e,i){var r=eo(t)?je:ri,s=arguments.length<3;return r(t,yn(e,4),i,s,Sr)},sr.repeat=function(t,e,i){return e=(i?Fn(t,e,i):e===n)?1:Lo(e),ls(Mo(t),e)},sr.replace=function(){var t=arguments,e=Mo(t[0]);return t.length<3?e:e.replace(t[1],t[2])},sr.result=function(t,e,i){var r=-1,s=(e=Us(e,t)).length;for(s||(s=1,t=n);++r<s;){var a=null==t?n:t[Hn(e[r])];a===n&&(r=s,a=i),t=ho(a)?a.call(t):a}return t},sr.round=Vh,sr.runInContext=t,sr.sample=function(t){return(eo(t)?dr:function(t){return dr(Zo(t))})(t)},sr.size=function(t){if(null==t)return 0;if(ro(t))return xo(t)?bi(t):t.length;var e=Rn(t);return e==W||e==K?t.size:Zr(t).length},sr.snakeCase=nh,sr.some=function(t,e,i){var r=eo(t)?Qe:_s;return i&&Fn(t,e,i)&&(e=n),r(t,yn(e,3))},sr.sortedIndex=function(t,e){return vs(t,e)},sr.sortedIndexBy=function(t,e,i){return ps(t,e,yn(i,2))},sr.sortedIndexOf=function(t,e){var i=null==t?0:t.length;if(i){var r=vs(t,e);if(r<i&&$a(t[r],e))return r}return-1},sr.sortedLastIndex=function(t,e){return vs(t,e,!0)},sr.sortedLastIndexBy=function(t,e,i){return ps(t,e,yn(i,2),!0)},sr.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var i=vs(t,e,!0)-1;if($a(t[i],e))return i}return-1},sr.startCase=ah,sr.startsWith=function(t,e,i){return t=Mo(t),i=null==i?0:Ar(Lo(i),0,t.length),e=ys(e),t.slice(i,i+e.length)==e},sr.subtract=Ch,sr.sum=function(t){return t&&t.length?si(t,dh):0},sr.sumBy=function(t,e){return t&&t.length?si(t,yn(e,2)):0},sr.template=function(t,e,i){var r=sr.templateSettings;i&&Fn(t,e,i)&&(e=n),t=Mo(t),e=qo({},e,r,fn);var s,a,o=qo({},e.imports,r.imports,fn),h=Oo(o),u=oi(o,h),l=0,f=e.interpolate||Ot,c="__p += '",m=Gt((e.escape||Ot).source+"|"+f.source+"|"+(f===yt?Vt:Ot).source+"|"+(e.evaluate||Ot).source+"|$","g"),g="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++_e+"]")+"\n";t.replace(m,function(e,i,r,n,o,h){return r||(r=n),c+=t.slice(l,h).replace(Wt,mi),i&&(s=!0,c+="' +\n__e("+i+") +\n'"),o&&(a=!0,c+="';\n"+o+";\n__p += '"),r&&(c+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=h+e.length,e}),c+="';\n";var d=e.variable;d||(c="with (obj) {\n"+c+"\n}\n"),c=(a?c.replace(ct,""):c).replace(mt,"$1").replace(gt,"$1;"),c="function("+(d||"obj")+") {\n"+(d?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+c+"return __p\n}";var _=lh(function(){return jt(h,g+"return "+c).apply(n,u)});if(_.source=c,oo(_))throw _;return _},sr.times=function(t,e){if((t=Lo(t))<1||t>w)return[];var i=U,r=Di(t,U);e=yn(e),t-=U;for(var s=ni(r,e);++i<t;)e(i);return s},sr.toFinite=Po,sr.toInteger=Lo,sr.toLength=Ro,sr.toLower=function(t){return Mo(t).toLowerCase()},sr.toNumber=wo,sr.toSafeInteger=function(t){return t?Ar(Lo(t),-w,w):0===t?t:0},sr.toString=Mo,sr.toUpper=function(t){return Mo(t).toUpperCase()},sr.trim=function(t,e,i){if((t=Mo(t))&&(i||e===n))return t.replace(Rt,"");if(!t||!(e=ys(e)))return t;var r=yi(t),s=yi(e);return qs(r,ui(r,s),li(r,s)+1).join("")},sr.trimEnd=function(t,e,i){if((t=Mo(t))&&(i||e===n))return t.replace(St,"");if(!t||!(e=ys(e)))return t;var r=yi(t);return qs(r,0,li(r,yi(e))+1).join("")},sr.trimStart=function(t,e,i){if((t=Mo(t))&&(i||e===n))return t.replace(wt,"");if(!t||!(e=ys(e)))return t;var r=yi(t);return qs(r,ui(r,yi(e))).join("")},sr.truncate=function(t,e){var i=30,r="...";if(fo(e)){var s="separator"in e?e.separator:s;i="length"in e?Lo(e.length):i,r="omission"in e?ys(e.omission):r}var a=(t=Mo(t)).length;if(gi(t)){var o=yi(t);a=o.length}if(i>=a)return t;var h=i-bi(r);if(h<1)return r;var u=o?qs(o,0,h).join(""):t.slice(0,h);if(s===n)return u+r;if(o&&(h+=u.length-h),vo(s)){if(t.slice(h).search(s)){var l,f=u;for(s.global||(s=Gt(s.source,Mo(Ct.exec(s))+"g")),s.lastIndex=0;l=s.exec(f);)var c=l.index;u=u.slice(0,c===n?h:c)}}else if(t.indexOf(ys(s),h)!=h){var m=u.lastIndexOf(s);m>-1&&(u=u.slice(0,m))}return u+r},sr.unescape=function(t){return(t=Mo(t))&&vt.test(t)?t.replace(dt,Ti):t},sr.uniqueId=function(t){var e=++se;return Mo(t)+e},sr.upperCase=oh,sr.upperFirst=hh,sr.each=Sa,sr.eachRight=Ma,sr.first=ra,xh(sr,(Sh={},Cr(sr,function(t,e){re.call(sr.prototype,e)||(Sh[e]=t)}),Sh),{chain:!1}),sr.VERSION="4.17.5",Be(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){sr[t].placeholder=sr}),Be(["drop","take"],function(t,e){hr.prototype[t]=function(i){i=i===n?1:Ci(Lo(i),0);var r=this.__filtered__&&!e?new hr(this):this.clone();return r.__filtered__?r.__takeCount__=Di(i,r.__takeCount__):r.__views__.push({size:Di(i,U),type:t+(r.__dir__<0?"Right":"")}),r},hr.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Be(["filter","map","takeWhile"],function(t,e){var i=e+1,r=1==i||3==i;hr.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:yn(t,3),type:i}),e.__filtered__=e.__filtered__||r,e}}),Be(["head","last"],function(t,e){var i="take"+(e?"Right":"");hr.prototype[t]=function(){return this[i](1).value()[0]}}),Be(["initial","tail"],function(t,e){var i="drop"+(e?"":"Right");hr.prototype[t]=function(){return this.__filtered__?new hr(this):this[i](1)}}),hr.prototype.compact=function(){return this.filter(dh)},hr.prototype.find=function(t){return this.filter(t).head()},hr.prototype.findLast=function(t){return this.reverse().find(t)},hr.prototype.invokeMap=fs(function(t,e){return"function"==typeof t?new hr(this):this.map(function(i){return jr(i,t,e)})}),hr.prototype.reject=function(t){return this.filter(ja(yn(t)))},hr.prototype.slice=function(t,e){t=Lo(t);var i=this;return i.__filtered__&&(t>0||e<0)?new hr(i):(t<0?i=i.takeRight(-t):t&&(i=i.drop(t)),e!==n&&(i=(e=Lo(e))<0?i.dropRight(-e):i.take(e-t)),i)},hr.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},hr.prototype.toArray=function(){return this.take(U)},Cr(hr.prototype,function(t,e){var i=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),s=sr[r?"take"+("last"==e?"Right":""):e],a=r||/^find/.test(e);s&&(sr.prototype[e]=function(){var e=this.__wrapped__,o=r?[1]:arguments,h=e instanceof hr,u=o[0],l=h||eo(e),f=function(t){var e=s.apply(sr,We([t],o));return r&&c?e[0]:e};l&&i&&"function"==typeof u&&1!=u.length&&(h=l=!1);var c=this.__chain__,m=!!this.__actions__.length,g=a&&!c,d=h&&!m;if(!a&&l){e=d?e:new hr(this);var _=t.apply(e,o);return _.__actions__.push({func:Ea,args:[f],thisArg:n}),new or(_,c)}return g&&d?t.apply(this,o):(_=this.thru(f),g?r?_.value()[0]:_.value():_)})}),Be(["pop","push","shift","sort","splice","unshift"],function(t){var e=Zt[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);sr.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var s=this.value();return e.apply(eo(s)?s:[],t)}return this[i](function(i){return e.apply(eo(i)?i:[],t)})}}),Cr(hr.prototype,function(t,e){var i=sr[e];if(i){var r=i.name+"";(Gi[r]||(Gi[r]=[])).push({name:e,func:i})}}),Gi[Zs(n,_).name]=[{name:"wrapper",func:n}],hr.prototype.clone=function(){var t=new hr(this.__wrapped__);return t.__actions__=ks(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ks(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ks(this.__views__),t},hr.prototype.reverse=function(){if(this.__filtered__){var t=new hr(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},hr.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,i=eo(t),r=e<0,s=i?t.length:0,n=function(t,e,i){for(var r=-1,s=i.length;++r<s;){var n=i[r],a=n.size;switch(n.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Di(e,t+a);break;case"takeRight":t=Ci(t,e-a)}}return{start:t,end:e}}(0,s,this.__views__),a=n.start,o=n.end,h=o-a,u=r?o:a-1,l=this.__iteratees__,f=l.length,c=0,m=Di(h,this.__takeCount__);if(!i||!r&&s==h&&m==h)return Ls(t,this.__actions__);var g=[];t:for(;h--&&c<m;){for(var d=-1,_=t[u+=e];++d<f;){var v=l[d],p=v.iteratee,x=v.type,b=p(_);if(2==x)_=b;else if(!b){if(1==x)continue t;break t}}g[c++]=_}return g},sr.prototype.at=Pa,sr.prototype.chain=function(){return Aa(this)},sr.prototype.commit=function(){return new or(this.value(),this.__chain__)},sr.prototype.next=function(){this.__values__===n&&(this.__values__=Eo(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?n:this.__values__[this.__index__++]}},sr.prototype.plant=function(t){for(var e,i=this;i instanceof ar;){var r=Kn(i);r.__index__=0,r.__values__=n,e?s.__wrapped__=r:e=r;var s=r;i=i.__wrapped__}return s.__wrapped__=t,e},sr.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof hr){var e=t;return this.__actions__.length&&(e=new hr(this)),(e=e.reverse()).__actions__.push({func:Ea,args:[fa],thisArg:n}),new or(e,this.__chain__)}return this.thru(fa)},sr.prototype.toJSON=sr.prototype.valueOf=sr.prototype.value=function(){return Ls(this.__wrapped__,this.__actions__)},sr.prototype.first=sr.prototype.head,ii&&(sr.prototype[ii]=function(){return this}),sr}();Ee._=Ai,(s=function(){return Ai}.call(e,i,e,r))===n||(r.exports=s)}).call(this)}).call(e,i(31),i(32)(t))},function(t,e){var i=t.exports={version:"2.5.5"};"number"==typeof __e&&(__e=i)},function(t,e,i){t.exports=!i(10)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,i){var r=i(7),s=i(4),n=i(16),a=i(18),o=i(24),h=function(t,e,i){var u,l,f,c=t&h.F,m=t&h.G,g=t&h.S,d=t&h.P,_=t&h.B,v=t&h.W,p=m?s:s[e]||(s[e]={}),x=p.prototype,b=m?r:g?r[e]:(r[e]||{}).prototype;for(u in m&&(i=e),i)(l=!c&&b&&void 0!==b[u])&&o(p,u)||(f=l?b[u]:i[u],p[u]=m&&"function"!=typeof b[u]?i[u]:_&&l?n(f,r):v&&b[u]==f?function(t){var e=function(e,i,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,i)}return new t(e,i,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(f):d&&"function"==typeof f?n(Function.call,f):f,d&&((p.virtual||(p.virtual={}))[u]=f,t&h.R&&x&&!x[u]&&a(x,u,f)))};h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,h.U=64,h.R=128,t.exports=h},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,i){var r=i(19),s=i(20),n=i(22),a=Object.defineProperty;e.f=i(5)?Object.defineProperty:function(t,e,i){if(r(t),e=n(e,!0),r(i),s)try{return a(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),s=n(i(1));function n(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(){(0,r.default)(this,t)}return(0,s.default)(t,null,[{key:"smoothWave",value:function(t,e,i){for(var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=0,n=0,a=void 0,o=1,h=0;h<i-1;h++){a=o,o=Math.min(i-1,h+2);for(var u=0;u<3;u++)e[3*s+u]=t[3*h+u];if(r)for(var l=0;l<3;l++)e[3*(s+1)+l]=.5*(-.15*t[3*n+l]+1.15*t[3*h+l]+1.15*t[3*a+l]+-.15*t[3*o+l]);else{for(var f=0;f<2;f++)e[3*(s+1)+f]=.5*(-.15*t[3*n+f]+1.15*t[3*h+f]+1.15*t[3*a+f]+-.15*t[3*o+f]);e[3*(s+1)+2]=0}n=h,s+=2}for(var c=0;c<3;c++)e[3*s+c]=t[3*(i-1)+c]}},{key:"smoothWaveAndColor",value:function(t,e,i,r,s){for(var n=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=0,o=0,h=void 0,u=1,l=0;l<s-1;l++){h=u,u=Math.min(s-1,l+2);for(var f=0;f<3;f++)i[3*a+f]=t[3*l+f];if(n)for(var c=0;c<3;c++)i[3*(a+1)+c]=.5*(-.15*t[3*o+c]+1.15*t[3*l+c]+1.15*t[3*h+c]+-.15*t[3*u+c]);else{for(var m=0;m<2;m++)i[3*(a+1)+m]=.5*(-.15*t[3*o+m]+1.15*t[3*l+m]+1.15*t[3*h+m]+-.15*t[3*u+m]);i[3*(a+1)+2]=0}for(var g=0;g<4;g++)r[4*a+g]=e[4*l+g],r[4*(a+1)+g]=e[4*l+g];o=l,a+=2}for(var d=0;d<3;d++)i[3*a+d]=t[3*(s-1)+d];for(var _=0;_<4;_++)r[4*a+_]=e[4*(s-1)+_]}}]),t}();e.default=a,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i(0)),s=a(i(1));i(25),i(26);var n=a(i(27));function a(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(){(0,r.default)(this,t)}return(0,s.default)(t,null,[{key:"createVisualizer",value:function(t,e,i){return new n.default(t,e,i)}}]),t}();e.default=o,t.exports=o,t.exports=e.default},function(t,e,i){t.exports={default:i(14),__esModule:!0}},function(t,e,i){i(15);var r=i(4).Object;t.exports=function(t,e,i){return r.defineProperty(t,e,i)}},function(t,e,i){var r=i(6);r(r.S+r.F*!i(5),"Object",{defineProperty:i(9).f})},function(t,e,i){var r=i(17);t.exports=function(t,e,i){if(r(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,r){return t.call(e,i,r)};case 3:return function(i,r,s){return t.call(e,i,r,s)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,i){var r=i(9),s=i(23);t.exports=i(5)?function(t,e,i){return r.f(t,e,s(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){var r=i(8);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,i){t.exports=!i(5)&&!i(10)(function(){return 7!=Object.defineProperty(i(21)("div"),"a",{get:function(){return 7}}).a})},function(t,e,i){var r=i(8),s=i(7).document,n=r(s)&&r(s.createElement);t.exports=function(t){return n?s.createElement(t):{}}},function(t,e,i){var r=i(8);t.exports=function(t,e){if(!r(t))return t;var i,s;if(e&&"function"==typeof(i=t.toString)&&!r(s=i.call(t)))return s;if("function"==typeof(i=t.valueOf)&&!r(s=i.call(t)))return s;if(!e&&"function"==typeof(i=t.toString)&&!r(s=i.call(t)))return s;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){"use strict";{const t=(t,e)=>{var i="function"==typeof e,r="function"==typeof e,s="function"==typeof e;Object.defineProperty(Math,t,{configurable:i,enumerable:s,writable:r,value:e})};t("DEG_PER_RAD",Math.PI/180),t("RAD_PER_DEG",180/Math.PI);const e=new Float32Array(1);t("scale",function(t,e,i,r,s){return 0===arguments.length?NaN:Number.isNaN(t)||Number.isNaN(e)||Number.isNaN(i)||Number.isNaN(r)||Number.isNaN(s)?NaN:t===1/0||t===-1/0?t:(t-e)*(s-r)/(i-e)+r}),t("fscale",function(t,i,r,s,n){return e[0]=Math.scale(t,i,r,s,n),e[0]}),t("clamp",function(t,e,i){return Math.min(i,Math.max(e,t))}),t("radians",function(t){return t*Math.DEG_PER_RAD}),t("degrees",function(t){return t*Math.RAD_PER_DEG})}},function(t,e,i){"use strict";function r(t){return isFinite(t)&&!isNaN(t)}window.sqr=function(t){return t*t},window.sqrt=function(t){return Math.sqrt(Math.abs(t))},window.log10=function(t){return Math.log(t)*Math.LOG10E},window.sign=function(t){return t>0?1:t<0?-1:0},window.rand=function(t){return Math.floor(Math.random()*t)},window.bnot=function(t){return 0==t?1:0},window.pow=function(t,e){var i=Math.pow(t,e);return r(i)?i:0},window.div=function(t,e){if(0===e)return 0;var i=t/e;return r(i)?i:0},window.mod=function(t,e){return 0===e?0:Math.floor(t)%Math.floor(e)},window.bitor=function(t,e){return Math.floor(t)|Math.floor(e)},window.bitand=function(t,e){return Math.floor(t)&Math.floor(e)},window.sigmoid=function(t,e){var i=1+Math.exp(-t*e);return Math.abs(i)>1e-5?1/i:0},window.bor=function(t,e){return 0!=t||0!=e?1:0},window.band=function(t,e){return 0!=t&&0!=e?1:0},window.equal=function(t,e){return Math.abs(t-e)<1e-5?1:0},window.above=function(t,e){return t>e?1:0},window.below=function(t,e){return t<e?1:0},window.ifcond=function(t,e,i){return 0!=t?e:i}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(i(0)),s=o(i(1)),n=o(i(28)),a=o(i(30));function o(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e,i,s){(0,r.default)(this,t),this.audio=new n.default(e);var o=i.getContext("webgl2",{alpha:!1,antialias:!1,depth:!1,stencil:!1,premultipliedAlpha:!1});this.renderer=new a.default(o,this.audio,s)}return(0,s.default)(t,[{key:"connectAudio",value:function(t){this.audioNode=t,this.audio.connectAudio(t)}},{key:"disconnectAudio",value:function(t){this.audio.disconnectAudio(t)}},{key:"loadPreset",value:function(t,e){this.renderer.loadPreset(t,e)}},{key:"setRendererSize",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.renderer.setRendererSize(t,e,i)}},{key:"render",value:function(){this.renderer.render()}}]),t}();e.default=h,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i(0)),s=a(i(1)),n=a(i(29));function a(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(e){(0,r.default)(this,t),this.numSamps=512,this.fft=new n.default(this.numSamps,512),this.audioContext=e,this.audible=e.createDelay(),this.analyser=e.createAnalyser(),this.analyser.smoothingTimeConstant=0,this.analyser.fftSize=2*this.numSamps,this.audible.connect(this.analyser),this.analyserL=e.createAnalyser(),this.analyserL.smoothingTimeConstant=0,this.analyserL.fftSize=2*this.numSamps,this.analyserR=e.createAnalyser(),this.analyserR.smoothingTimeConstant=0,this.analyserR.fftSize=2*this.numSamps,this.splitter=e.createChannelSplitter(2),this.audible.connect(this.splitter),this.splitter.connect(this.analyserL,0),this.splitter.connect(this.analyserR,1)}return(0,s.default)(t,[{key:"sampleAudio",value:function(){this.timeByteArray=new Uint8Array(this.numSamps),this.timeByteArrayL=new Uint8Array(this.numSamps),this.timeByteArrayR=new Uint8Array(this.numSamps),this.analyser.getByteTimeDomainData(this.timeByteArray),this.analyserL.getByteTimeDomainData(this.timeByteArrayL),this.analyserR.getByteTimeDomainData(this.timeByteArrayR),this.timeArray=[],this.timeArrayL=[],this.timeArrayR=[];for(var t=[],e=[],i=0,r=0;r<this.numSamps;r++)this.timeArray.push(this.timeByteArray[r]-128),this.timeArrayL.push(this.timeByteArrayL[r]-128),this.timeArrayR.push(this.timeByteArrayR[r]-128),t[r]=.5*(this.timeArrayL[r]+this.timeArrayL[i]),e[r]=.5*(this.timeArrayR[r]+this.timeArrayR[i]),i=r;this.freqArray=this.fft.timeToFrequencyDomain(this.timeByteArray),this.freqArrayL=this.fft.timeToFrequencyDomain(t),this.freqArrayR=this.fft.timeToFrequencyDomain(e);for(var s=0;s<this.numSamps;s++)this.freqArray[s]/=128,this.freqArrayL[s]/=128,this.freqArrayR[s]/=128}},{key:"connectAudio",value:function(t){t.connect(this.audible)}},{key:"disconnectAudio",value:function(t){t.disconnect(this.audible)}}]),t}();e.default=o,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),s=n(i(1));function n(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e,i){(0,r.default)(this,t),this.samplesIn=e,this.samplesOut=i,this.NFREQ=2*i,this.initBitRevTable(),this.initCosSinTable()}return(0,s.default)(t,[{key:"initBitRevTable",value:function(){this.bitrevtable=new Uint16Array(this.NFREQ);for(var t=0;t<this.NFREQ;t++)this.bitrevtable[t]=t;for(var e=0,i=0;i<this.NFREQ;i++){if(e>i){var r=this.bitrevtable[i];this.bitrevtable[i]=this.bitrevtable[e],this.bitrevtable[e]=r}for(var s=this.NFREQ>>1;s>=1&&e>=s;)e-=s,s>>=1;e+=s}}},{key:"initCosSinTable",value:function(){for(var t=2,e=0;t<=this.NFREQ;)e+=1,t<<=1;this.cossintable=[new Float32Array(e),new Float32Array(e)],t=2;for(var i=0;t<=this.NFREQ;){var r=-2*Math.PI/t;this.cossintable[0][i]=Math.cos(r),this.cossintable[1][i]=Math.sin(r),i+=1,t<<=1}}},{key:"timeToFrequencyDomain",value:function(t){for(var e=new Float32Array(this.NFREQ),i=new Float32Array(this.NFREQ),r=0;r<this.NFREQ;r++){var s=this.bitrevtable[r];s<this.samplesIn?e[r]=t[s]:e[r]=0,i[r]=0}for(var n=2,a=0;n<=this.NFREQ;){for(var o=this.cossintable[0][a],h=this.cossintable[1][a],u=1,l=0,f=n>>1,c=0;c<f;c++){for(var m=c;m<this.NFREQ;m+=n){var g=m+f,d=u*e[g]-l*i[g],_=u*i[g]+l*e[g];e[g]=e[m]-d,i[g]=i[m]-_,e[m]+=d,i[m]+=_}var v=u;u=v*o-l*h,l=l*o+v*h}n<<=1,a+=1}for(var p=new Float32Array(this.samplesOut),x=0;x<this.samplesOut;x++)p[x]=Math.sqrt(e[x]*e[x]+i[x]*i[x]);return p}}]),t}();e.default=a,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=y(i(0)),s=y(i(1)),n=y(i(3)),a=y(i(33)),o=y(i(40)),h=y(i(41)),u=y(i(42)),l=y(i(43)),f=y(i(44)),c=y(i(45)),m=y(i(46)),g=y(i(47)),d=y(i(48)),_=y(i(49)),v=y(i(50)),p=y(i(51)),x=y(i(54)),b=y(i(55));function y(t){return t&&t.__esModule?t:{default:t}}var T=function(){function t(e,i,s){(0,r.default)(this,t),this.gl=e,this.audio=i,this.frameNum=0,this.fps=30,this.time=0,this.presetTime=0,this.lastTime=performance.now(),this.timeHist=[0],this.timeHistMax=120,this.blending=!1,this.blendStartTime=0,this.blendProgress=0,this.blendDuration=0,this.width=s.width||1200,this.height=s.height||900,this.mesh_width=s.mesh_width||32,this.mesh_height=s.mesh_height||24,this.pixelRatio=s.pixelRatio||1,this.textureRatio=s.textureRatio||1,this.texsizeX=this.width*this.pixelRatio*this.textureRatio,this.texsizeY=this.height*this.pixelRatio*this.textureRatio,this.aspectx=this.texsizeY>this.texsizeX?this.texsizeX/this.texsizeY:1,this.aspecty=this.texsizeX>this.texsizeY?this.texsizeY/this.texsizeX:1,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.qs=n.default.map(n.default.range(1,33),function(t){return"q"+t}),this.ts=n.default.map(n.default.range(1,9),function(t){return"t"+t}),this.blurRatios=[[.5,.25],[.125,.125],[.0625,.0625]],this.lastAudioTime=performance.now(),this.audioLevels=new a.default(this.audio),this.prevFrameBuffer=this.gl.createFramebuffer(),this.targetFrameBuffer=this.gl.createFramebuffer(),this.prevTexture=this.gl.createTexture(),this.targetTexture=this.gl.createTexture(),this.compFrameBuffer=this.gl.createFramebuffer(),this.compTexture=this.gl.createTexture(),this.anisoExt=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.bindFrameBufferTexture(this.prevFrameBuffer,this.prevTexture),this.bindFrameBufferTexture(this.targetFrameBuffer,this.targetTexture),this.bindFrameBufferTexture(this.compFrameBuffer,this.compTexture);var b={texsizeX:this.texsizeX,texsizeY:this.texsizeY,mesh_width:this.mesh_width,mesh_height:this.mesh_height,aspectx:this.aspectx,aspecty:this.aspecty};this.noise=new x.default(e),this.warpShader=new d.default(e,this.noise,b),this.compShader=new _.default(e,this.noise,b),this.outputShader=new v.default(e,b),this.prevWarpShader=new d.default(e,this.noise,b),this.prevCompShader=new _.default(e,this.noise,b),this.numBlurPasses=0,this.blurShader1=new p.default(0,this.blurRatios,e,b),this.blurShader2=new p.default(1,this.blurRatios,e,b),this.blurShader3=new p.default(2,this.blurRatios,e,b),this.blurTexture1=this.blurShader1.blurVerticalTexture,this.blurTexture2=this.blurShader2.blurVerticalTexture,this.blurTexture3=this.blurShader3.blurVerticalTexture,this.basicWaveform=new u.default(e,b),this.customWaveforms=n.default.map(n.default.range(4),function(t){return new l.default(t,e,b)}),this.customShapes=n.default.map(n.default.range(4),function(t){return new f.default(t,e,b)}),this.darkenCenter=new m.default(e,b),this.innerBorder=new c.default(e,b),this.outerBorder=new c.default(e,b),this.motionVectors=new g.default(e,b),this.warpUVs=new Float32Array((this.mesh_width+1)*(this.mesh_height+1)*2),this.warpColor=new Float32Array((this.mesh_width+1)*(this.mesh_height+1)*4),this.gl.clearColor(0,0,0,1),this.blankPreset=o.default,this.preset=o.default,this.prevPreset=this.preset,this.presetEquationRunner=new h.default(this.preset,b),this.prevPresetEquationRunner=new h.default(this.prevPreset,b)}return(0,s.default)(t,[{key:"genPlasma",value:function(t,e,i,r,s){var n=Math.floor((t+e)/2),a=Math.floor((i+r)/2),o=this.vertInfoC[i*(this.mesh_width+1)+t],h=this.vertInfoC[i*(this.mesh_width+1)+e],u=this.vertInfoC[r*(this.mesh_width+1)+t],l=this.vertInfoC[r*(this.mesh_width+1)+e];r-i>=2&&(0===t&&(this.vertInfoC[a*(this.mesh_width+1)+t]=.5*(o+u)+(2*Math.random()-1)*s*this.aspecty),this.vertInfoC[a*(this.mesh_width+1)+e]=.5*(h+l)+(2*Math.random()-1)*s*this.aspecty),e-t>=2&&(0===i&&(this.vertInfoC[i*(this.mesh_width+1)+n]=.5*(o+h)+(2*Math.random()-1)*s*this.aspectx),this.vertInfoC[r*(this.mesh_width+1)+n]=.5*(u+l)+(2*Math.random()-1)*s*this.aspectx),r-i>=2&&e-t>=2&&(o=this.vertInfoC[a*(this.mesh_width+1)+t],h=this.vertInfoC[a*(this.mesh_width+1)+e],u=this.vertInfoC[i*(this.mesh_width+1)+n],l=this.vertInfoC[r*(this.mesh_width+1)+n],this.vertInfoC[a*(this.mesh_width+1)+n]=.25*(u+l+o+h)+(2*Math.random()-1)*s,this.genPlasma(t,n,i,a,.5*s),this.genPlasma(n,e,i,a,.5*s),this.genPlasma(t,n,a,r,.5*s),this.genPlasma(n,e,a,r,.5*s))}},{key:"randomizeBlendPattern",value:function(){this.vertInfoA=new Float32Array((this.mesh_width+1)*(this.mesh_height+1)),this.vertInfoC=new Float32Array((this.mesh_width+1)*(this.mesh_height+1));var t=1+Math.floor(3*Math.random());if(0===t)for(var e=0,i=0;i<=this.mesh_height;i++)for(var r=0;r<=this.mesh_width;r++)this.vertInfoA[e]=1,this.vertInfoC[e]=0,e+=1;else if(1===t)for(var s=6.28*Math.random(),n=Math.cos(s),a=Math.sin(s),o=.1+.2*Math.random(),h=1/o,u=0,l=0;l<=this.mesh_height;l++)for(var f=l/this.mesh_height*this.aspecty,c=0;c<=this.mesh_width;c++){var m=(c/this.mesh_width*this.aspectx-.5)*n+(f-.5)*a+.5;m=(m-.5)/Math.sqrt(2)+.5,this.vertInfoA[u]=h*(1+o),this.vertInfoC[u]=h*m-h,u+=1}else if(2===t){var g=.12+.13*Math.random(),d=1/g;this.vertInfoC[0]=Math.random(),this.vertInfoC[this.mesh_width]=Math.random(),this.vertInfoC[this.mesh_height*(this.mesh_width+1)]=Math.random(),this.vertInfoC[this.mesh_height*(this.mesh_width+1)+this.mesh_width]=Math.random(),this.genPlasma(0,this.mesh_width,0,this.mesh_height,.25);for(var _=this.vertInfoC[0],v=this.vertInfoC[0],p=0,x=0;x<=this.mesh_height;x++)for(var b=0;b<=this.mesh_width;b++)_>this.vertInfoC[p]&&(_=this.vertInfoC[p]),v<this.vertInfoC[p]&&(v=this.vertInfoC[p]),p+=1;var y=1/(v-_);p=0;for(var T=0;T<=this.mesh_height;T++)for(var A=0;A<=this.mesh_width;A++){var E=(this.vertInfoC[p]-_)*y;this.vertInfoA[p]=d*(1+g),this.vertInfoC[p]=d*E-d,p+=1}}else if(3===t)for(var P=.02+.14*Math.random()+.34*Math.random(),L=1/P,R=2*Math.floor(2*Math.random())-1,w=0,S=0;S<=this.mesh_height;S++)for(var M=(S/this.mesh_height-.5)*this.aspecty,U=0;U<=this.mesh_width;U++){var F=(U/this.mesh_width-.5)*this.aspectx,q=1.41421*Math.sqrt(F*F+M*M);-1===R&&(q=1-q),this.vertInfoA[w]=L*(1+P),this.vertInfoC[w]=L*q-L,w+=1}}},{key:"loadPreset",value:function(e,i){this.randomizeBlendPattern(),this.blending=!0,this.blendStartTime=this.time,this.blendDuration=i,this.blendProgress=0;var r=this.prevPresetEquationRunner;this.prevPresetEquationRunner=this.presetEquationRunner,this.presetEquationRunner=r,this.prevPreset=this.preset,this.preset=e,this.preset.baseVals.old_wave_mode=this.prevPreset.baseVals.wave_mode,this.presetTime=this.time,this.presetEquationRunner.updatePreset(this.preset);var s=this.prevWarpShader;this.prevWarpShader=this.warpShader,this.warpShader=s;var n=this.prevCompShader;this.prevCompShader=this.compShader,this.compShader=n;var a=this.preset.warp.trim(),o=this.preset.comp.trim();this.warpShader.updateShader(a),this.compShader.updateShader(o),0===a.length?this.numBlurPasses=0:this.numBlurPasses=t.getHighestBlur(a),0!==o.length&&(this.numBlurPasses=Math.max(this.numBlurPasses,t.getHighestBlur(o)))}},{key:"setRendererSize",value:function(t,e,i){this.width=t,this.height=e,this.mesh_width=i.mesh_width||this.mesh_width,this.mesh_height=i.mesh_height||this.mesh_height,this.pixelRatio=i.pixelRatio||this.pixelRatio,this.textureRatio=i.textureRatio||this.textureRatio,this.texsizeX=t*this.pixelRatio*this.textureRatio,this.texsizeY=e*this.pixelRatio*this.textureRatio,this.aspectx=this.texsizeY>this.texsizeX?this.texsizeX/this.texsizeY:1,this.aspecty=this.texsizeX>this.texsizeY?this.texsizeY/this.texsizeX:1,this.bindFrameBufferTexture(this.prevFrameBuffer,this.prevTexture),this.bindFrameBufferTexture(this.targetFrameBuffer,this.targetTexture),this.bindFrameBufferTexture(this.compFrameBuffer,this.compTexture),this.updateGlobals()}},{key:"updateGlobals",value:function(){var t={texsizeX:this.texsizeX,texsizeY:this.texsizeY,mesh_width:this.mesh_width,mesh_height:this.mesh_height,aspectx:this.aspectx,aspecty:this.aspecty};this.presetEquationRunner.updateGlobals(t),this.prevPresetEquationRunner.updateGlobals(t),this.warpShader.updateGlobals(t),this.prevWarpShader.updateGlobals(t),this.compShader.updateGlobals(t),this.prevCompShader.updateGlobals(t),this.outputShader.updateGlobals(t),this.blurShader1.updateGlobals(t),this.blurShader2.updateGlobals(t),this.blurShader3.updateGlobals(t),this.basicWaveform.updateGlobals(t),n.default.forEach(this.customWaveforms,function(e){return e.updateGlobals(t)}),n.default.forEach(this.customShapes,function(e){return e.updateGlobals(t)}),this.darkenCenter.updateGlobals(t),this.innerBorder.updateGlobals(t),this.outerBorder.updateGlobals(t),this.motionVectors.updateGlobals(t),this.warpUVs=new Float32Array((this.mesh_width+1)*(this.mesh_height+1)*2),this.warpColor=new Float32Array((this.mesh_width+1)*(this.mesh_height+1)*4)}},{key:"calcTimeAndFPS",value:function(){var t=performance.now(),e=(t-this.lastTime)/1e3;(e>1||e<0||this.frame<2)&&(e=1/30),this.lastTime=t,this.time+=1/this.fps,this.blending&&(this.blendProgress=(this.time-this.blendStartTime)/this.blendDuration,this.blendProgress>1&&(this.blending=!1));var i=this.timeHist[this.timeHist.length-1]+e;this.timeHist.push(i),this.timeHist.length>this.timeHistMax&&this.timeHist.shift();var r=this.timeHist.length/(i-this.timeHist[0]);Math.abs(r-this.fps)>3&&this.frame>this.timeHistMax?this.fps=r:this.fps=.93*this.fps+(1-.93)*r}},{key:"runPixelEquations",value:function(t,e,i,r,s){for(var a=this.mesh_width,o=this.mesh_height,h=a+1,u=o+1,l=this.time*e.warpanimspeed,f=1/e.warpscale,c=11.68+4*Math.cos(1.413*l+10),m=8.77+3*Math.cos(1.113*l+7),g=10.54+3*Math.cos(1.233*l+3),d=11.49+4*Math.cos(.933*l+5),_=0/this.texsizeX,v=0/this.texsizeY,p=this.aspectx,x=this.aspecty,y=n.default.clone(e),T=y.rkeys||[],A={},E=0;E<T.length;E++){var P=T[E];n.default.includes(i,P)||n.default.includes(this.qs,P)||(A[P]=y[P])}for(var L=0,R=0,w=0;w<u;w++)for(var S=0;S<h;S++){var M=S/a*2-1,U=w/o*2-1,F=Math.sqrt(M*M*p*p+U*U*x*x);if(r){var q;q=w===o/2&&S===a/2?0:b.default.atan2(U*x,M*p),y.x=.5*M*p+.5,y.y=-.5*U*x+.5,y.rad=F,y.ang=q,y=b.default.repairPerVertexEQs(y,A),y=t.pixel_eqs(y)}var z=y.warp,V=y.zoom,C=y.zoomexp,D=y.cx,B=y.cy,X=y.sx,I=y.sy,k=y.dx,N=y.dy,O=y.rot,W=1/Math.pow(V,Math.pow(C,2*F-1)),Y=.5*M*p*W+.5,j=.5*-U*x*W+.5;Y=(Y-D)/X+D,j=(j-B)/I+B,z>.001&&(Y+=.0035*z*Math.sin(.333*l+f*(M*c-U*d)),j+=.0035*z*Math.cos(.375*l-f*(M*g+U*m)),Y+=.0035*z*Math.cos(.753*l-f*(M*m-U*g)),j+=.0035*z*Math.sin(.825*l+f*(M*c+U*d)));var Q=Y-D,H=j-B,G=Math.cos(O),K=Math.sin(O);if(Y=Q*G-H*K+D,j=Q*K+H*G+B,Y=((Y-=k)-.5)/p+.5,j=((j-=N)-.5)/x+.5,Y+=_,j+=v,s){var $=this.vertInfoA[L/2]*this.blendProgress+this.vertInfoC[L/2];$=Math.clamp($,0,1),this.warpUVs[L]=this.warpUVs[L]*$+Y*(1-$),this.warpUVs[L+1]=this.warpUVs[L+1]*$+j*(1-$),this.warpColor[R+0]=1,this.warpColor[R+1]=1,this.warpColor[R+2]=1,this.warpColor[R+3]=$}else this.warpUVs[L]=Y,this.warpUVs[L+1]=j,this.warpColor[R+0]=1,this.warpColor[R+1]=1,this.warpColor[R+2]=1,this.warpColor[R+3]=1;L+=2,R+=4}}},{key:"bindFrambufferAndSetViewport",value:function(t,e,i){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t),this.gl.viewport(0,0,e,i)}},{key:"bindFrameBufferTexture",value:function(t,e){if(this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,this.texsizeX,this.texsizeY,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,new Uint8Array(this.texsizeX*this.texsizeY*4)),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.anisoExt){var i=this.gl.getParameter(this.anisoExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT);this.gl.texParameterf(this.gl.TEXTURE_2D,this.anisoExt.TEXTURE_MAX_ANISOTROPY_EXT,i)}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,e,0)}},{key:"render",value:function(){var e=this;this.audio.sampleAudio();var i=performance.now(),r=i-this.lastAudioTime;r>30&&(this.audioLevels.updateAudioLevels(r,this.frameNum),this.lastAudioTime=i),this.calcTimeAndFPS(),this.frameNum+=1;var s={frame:this.frameNum,time:this.time,fps:this.fps,bass:this.audioLevels.bass,bass_att:this.audioLevels.bass_att,mid:this.audioLevels.mid,mid_att:this.audioLevels.mid_att,treb:this.audioLevels.treb,treb_att:this.audioLevels.treb_att,meshx:this.mesh_width,meshy:this.mesh_height,aspectx:this.invAspectx,aspecty:this.invAspecty,pixelsx:this.texsizeX,pixelsy:this.texsizeY};this.presetEquationRunner.runFrameEquations(s);var a=this.presetEquationRunner.mdVSFrame,o=this.presetEquationRunner.mdVSUserKeys;this.runPixelEquations(this.presetEquationRunner.preset,a,o,this.presetEquationRunner.runVertEQs,!1);var h=void 0;this.blending?(this.prevPresetEquationRunner.runFrameEquations(s),this.runPixelEquations(this.prevPresetEquationRunner.preset,this.prevPresetEquationRunner.mdVSFrame,this.prevPresetEquationRunner.mdVSUserKeys,this.prevPresetEquationRunner.runVertEQs,!0),h=t.mixFrameEquations(this.blendProgress,a,this.prevPresetEquationRunner.mdVSFrame)):h=a;var u=this.targetTexture;this.targetTexture=this.prevTexture,this.prevTexture=u;var l=this.targetFrameBuffer;this.targetFrameBuffer=this.prevFrameBuffer,this.prevFrameBuffer=l,this.gl.bindTexture(this.gl.TEXTURE_2D,this.prevTexture),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.bindFrambufferAndSetViewport(this.targetFrameBuffer,this.texsizeX,this.texsizeY),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.enable(this.gl.BLEND),this.gl.blendEquation(this.gl.FUNC_ADD),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.blending?(this.prevWarpShader.renderQuadTexture(!1,this.prevTexture,this.blurTexture1,this.blurTexture2,this.blurTexture3,this.prevPresetEquationRunner.mdVSFrame,this.warpUVs,this.warpColor),this.warpShader.renderQuadTexture(!0,this.prevTexture,this.blurTexture1,this.blurTexture2,this.blurTexture3,h,this.warpUVs,this.warpColor)):this.warpShader.renderQuadTexture(!1,this.prevTexture,this.blurTexture1,this.blurTexture2,this.blurTexture3,a,this.warpUVs,this.warpColor),this.numBlurPasses>0&&(this.blurShader1.renderBlurTexture(this.targetTexture,a),this.numBlurPasses>1&&(this.blurShader2.renderBlurTexture(this.blurTexture1,a),this.numBlurPasses>2&&this.blurShader3.renderBlurTexture(this.blurTexture2,a)),this.bindFrambufferAndSetViewport(this.targetFrameBuffer,this.texsizeX,this.texsizeY)),this.motionVectors.drawMotionVectors(h,this.warpUVs),this.preset.shapes&&this.preset.shapes.length>0&&n.default.forEach(this.customShapes,function(t,i){t.drawCustomShape(e.blending,e.blendProgress,s,e.presetEquationRunner,e.preset.shapes[i],e.prevPresetEquationRunner,n.default.get(e.prevPreset,"shapes["+i+"]"),e.prevTexture)}),this.preset.waves&&this.preset.waves.length>0&&n.default.forEach(this.customWaveforms,function(t,i){t.drawCustomWaveform(e.blending,e.blendProgress,e.audio.timeArrayL,e.audio.timeArrayR,e.audio.freqArrayL,e.audio.freqArrayR,s,e.presetEquationRunner,e.preset.waves[i],e.prevPresetEquationRunner,n.default.get(e.prevPreset,"waves["+i+"]"))}),this.basicWaveform.drawBasicWaveform(this.blending,this.blendProgress,this.audio.timeArrayL,this.audio.timeArrayR,h),this.darkenCenter.drawDarkenCenter(h);var f=[h.ob_r,h.ob_g,h.ob_b,h.ob_a];this.outerBorder.drawBorder(f,h.ob_size,0);var c=[h.ib_r,h.ib_g,h.ib_b,h.ib_a];this.innerBorder.drawBorder(c,h.ib_size,h.ob_size),this.bindFrambufferAndSetViewport(this.compFrameBuffer,this.texsizeX,this.texsizeY),this.gl.clear(this.gl.COLOR_BUFFER_BIT),this.gl.enable(this.gl.BLEND),this.gl.blendEquation(this.gl.FUNC_ADD),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.blending?(this.prevCompShader.renderQuadTexture(!1,this.targetTexture,this.blurTexture1,this.blurTexture2,this.blurTexture3,this.prevPresetEquationRunner.mdVSFrame,this.warpColor),this.compShader.renderQuadTexture(!0,this.targetTexture,this.blurTexture1,this.blurTexture2,this.blurTexture3,h,this.warpColor)):this.compShader.renderQuadTexture(!1,this.targetTexture,this.blurTexture1,this.blurTexture2,this.blurTexture3,a,this.warpColor),this.gl.bindTexture(this.gl.TEXTURE_2D,this.compTexture),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.bindFrambufferAndSetViewport(null,this.width,this.height),this.outputShader.renderQuadTexture(this.compTexture)}}],[{key:"getHighestBlur",value:function(t){return/sampler_blur3/.test(t)?3:/sampler_blur2/.test(t)?2:/sampler_blur1/.test(t)?1:0}},{key:"mixFrameEquations",value:function(t,e,i){var r=.5-.5*Math.cos(3.1415926535898*t),s=1-r,a=n.default.clone(e);return a.decay=r*e.decay+s*i.decay,a.wave_a=r*e.wave_a+s*i.wave_a,a.wave_r=r*e.wave_r+s*i.wave_r,a.wave_g=r*e.wave_g+s*i.wave_g,a.wave_b=r*e.wave_b+s*i.wave_b,a.wave_x=r*e.wave_x+s*i.wave_x,a.wave_y=r*e.wave_y+s*i.wave_y,a.wave_mystery=r*e.wave_mystery+s*i.wave_mystery,a.ob_size=r*e.ob_size+s*i.ob_size,a.ob_r=r*e.ob_r+s*i.ob_r,a.ob_g=r*e.ob_g+s*i.ob_g,a.ob_b=r*e.ob_b+s*i.ob_b,a.ob_a=r*e.ob_a+s*i.ob_a,a.ib_size=r*e.ib_size+s*i.ib_size,a.ib_r=r*e.ib_r+s*i.ib_r,a.ib_g=r*e.ib_g+s*i.ib_g,a.ib_b=r*e.ib_b+s*i.ib_b,a.ib_a=r*e.ib_a+s*i.ib_a,a.mv_x=r*e.mv_x+s*i.mv_x,a.mv_y=r*e.mv_y+s*i.mv_y,a.mv_dx=r*e.mv_dx+s*i.mv_dx,a.mv_dy=r*e.mv_dy+s*i.mv_dy,a.mv_l=r*e.mv_l+s*i.mv_l,a.mv_r=r*e.mv_r+s*i.mv_r,a.mv_g=r*e.mv_g+s*i.mv_g,a.mv_b=r*e.mv_b+s*i.mv_b,a.mv_a=r*e.mv_a+s*i.mv_a,a.echo_zoom=r*e.echo_zoom+s*i.echo_zoom,a.echo_alpha=r*e.echo_alpha+s*i.echo_alpha,a.echo_orient=r*e.echo_orient+s*i.echo_orient,a.wave_dots=r<.5?i.wave_dots:e.wave_dots,a.wave_thick=r<.5?i.wave_thick:e.wave_thick,a.additivewave=r<.5?i.additivewave:e.additivewave,a.wave_brighten=r<.5?i.wave_brighten:e.wave_brighten,a.darken_center=r<.5?i.darken_center:e.darken_center,a.gammaadj=r<.5?i.gammaadj:e.gammaadj,a.wrap=r<.5?i.wrap:e.wrap,a.invert=r<.5?i.invert:e.invert,a.brighten=r<.5?i.brighten:e.brighten,a.darken=r<.5?i.darken:e.darken,a.solarize=r<.5?i.brighten:e.solarize,a.b1n=r*(e.b1n||0)+s*(i.b1n||0),a.b2n=r*(e.b2n||0)+s*(i.b2n||0),a.b3n=r*(e.b3n||0)+s*(i.b3n||0),a.b1x=r*(e.b1x||1)+s*(i.b1x||1),a.b2x=r*(e.b2x||1)+s*(i.b2x||1),a.b3x=r*(e.b3x||1)+s*(i.b3x||1),a.b1ed=r*(e.b1ed||0)+s*(i.b1ed||0),a}}]),t}();e.default=T,t.exports=e.default},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(i(34)),s=o(i(37)),n=o(i(0)),a=o(i(1));function o(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e){(0,n.default)(this,t),this.audio=e,this.bass=1,this.bass_att=1,this.bass_imm=0,this.bass_avg=1,this.bass_long_avg=1,this.mid=1,this.mid_att=1,this.mid_imm=0,this.mid_avg=1,this.mid_long_avg=1,this.treb=1,this.treb_att=1,this.treb_imm=0,this.treb_avg=1,this.treb_long_avg=1}return(0,a.default)(t,[{key:"updateAudioLevels",value:function(e,i){if(this.audio.freqArray.length>0){var r=1e3/e;!t.isFiniteNumber(r)||r<15?r=15:r>120&&(r=120);for(var s=[0,0,0],n=[0,0,0],a=0;a<3;a++)for(var o=Math.floor(this.audio.numSamps*(a/6)),h=Math.floor(this.audio.numSamps*((a+1)/6)),u=o;u<h;u++)n[a]+=this.audio.freqArray[u];for(var l=[this.bass_att,this.mid_att,this.treb_att],f=[this.bass_avg,this.mid_avg,this.treb_avg],c=[this.bass_long_avg,this.mid_long_avg,this.treb_long_avg],m=0;m<3;m++){var g=void 0;g=n[m]>f[m]?.2:.5,g=t.adjustRateToFPS(g,30,r),f[m]=f[m]*g+n[m]*(1-g),g=i<50?.9:.992,g=t.adjustRateToFPS(g,30,r),c[m]=c[m]*g+n[m]*(1-g),Math.abs(c[m])<.001?(s[m]=1,l[m]=1):(s[m]=n[m]/c[m],l[m]=f[m]/c[m])}this.bass=s[0],this.mid=s[1],this.treb=s[2],this.bass_att=l[0],this.mid_att=l[1],this.treb_att=l[2],this.bass_imm=n[0],this.mid_imm=n[1],this.treb_imm=n[2],this.bass_avg=f[0],this.mid_avg=f[1],this.treb_avg=f[2],this.bass_long_avg=c[0],this.mid_long_avg=c[1],this.treb_long_avg=c[2]}}}],[{key:"isFiniteNumber",value:function(t){return(0,s.default)(t)&&!(0,r.default)(t)}},{key:"adjustRateToFPS",value:function(t,e,i){var r=Math.pow(t,e);return Math.pow(r,1/i)}}]),t}();e.default=h,t.exports=e.default},function(t,e,i){t.exports={default:i(35),__esModule:!0}},function(t,e,i){i(36),t.exports=i(4).Number.isNaN},function(t,e,i){var r=i(6);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,i){t.exports={default:i(38),__esModule:!0}},function(t,e,i){i(39),t.exports=i(4).Number.isFinite},function(t,e,i){var r=i(6),s=i(7).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&s(t)}})},function(t,e,i){"use strict";var r;void 0===(r=function(){"use strict;";return{baseVals:{gammaadj:1.25,wave_g:.5,mv_x:12,warpscale:1,brighten:0,mv_y:9,wave_scale:1,echo_alpha:0,additivewave:0,sx:1,sy:1,warp:.01,red_blue:0,wave_mode:0,wave_brighten:0,wrap:0,zoomexp:1,fshader:0,wave_r:.5,echo_zoom:1,wave_smoothing:.75,warpanimspeed:1,wave_dots:0,wave_x:.5,wave_y:.5,zoom:1,solarize:0,modwavealphabyvolume:0,dx:0,cx:.5,dy:0,darken_center:0,cy:.5,invert:0,bmotionvectorson:0,rot:0,modwavealphaend:.95,wave_mystery:-.2,decay:.9,wave_a:1,wave_b:.5,rating:5,modwavealphastart:.75,darken:0,echo_orient:0,ib_r:.5,ib_g:.5,ib_b:.5,ib_a:0,ib_size:0,ob_r:.5,ob_g:.5,ob_b:.5,ob_a:0,ob_size:0,mv_dx:0,mv_dy:0,mv_a:0,mv_r:.5,mv_g:.5,mv_b:.5,mv_l:0},init_eqs:function(){return{}},frame_eqs:function(t){return t.rkeys=["warp"],t.zoom=1.01+.02*t.treb_att,t.warp=.15+.25*t.bass_att,t},pixel_eqs:function(t){return t.warp=t.warp+.15*t.rad,t},waves:[{baseVals:{a:1,enabled:0,b:1,g:1,scaling:1,samples:512,additive:0,usedots:0,spectrum:0,r:1,smoothing:.5,thick:0,sep:0},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t},point_eqs:""},{baseVals:{a:1,enabled:0,b:1,g:1,scaling:1,samples:512,additive:0,usedots:0,spectrum:0,r:1,smoothing:.5,thick:0,sep:0},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t},point_eqs:""},{baseVals:{a:1,enabled:0,b:1,g:1,scaling:1,samples:512,additive:0,usedots:0,spectrum:0,r:1,smoothing:.5,thick:0,sep:0},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t},point_eqs:""},{baseVals:{a:1,enabled:0,b:1,g:1,scaling:1,samples:512,additive:0,usedots:0,spectrum:0,r:1,smoothing:.5,thick:0,sep:0},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t},point_eqs:""}],shapes:[{baseVals:{r2:0,a:1,enabled:0,b:0,tex_ang:0,thickoutline:0,g:0,textured:0,g2:1,tex_zoom:1,additive:0,border_a:.1,border_b:1,b2:0,a2:0,r:1,border_g:1,rad:.1,x:.5,y:.5,ang:0,sides:4,border_r:1},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t}},{baseVals:{r2:0,a:1,enabled:0,b:0,tex_ang:0,thickoutline:0,g:0,textured:0,g2:1,tex_zoom:1,additive:0,border_a:.1,border_b:1,b2:0,a2:0,r:1,border_g:1,rad:.1,x:.5,y:.5,ang:0,sides:4,border_r:1},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t}},{baseVals:{r2:0,a:1,enabled:0,b:0,tex_ang:0,thickoutline:0,g:0,textured:0,g2:1,tex_zoom:1,additive:0,border_a:.1,border_b:1,b2:0,a2:0,r:1,border_g:1,rad:.1,x:.5,y:.5,ang:0,sides:4,border_r:1},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t}},{baseVals:{r2:0,a:1,enabled:0,b:0,tex_ang:0,thickoutline:0,g:0,textured:0,g2:1,tex_zoom:1,additive:0,border_a:.1,border_b:1,b2:0,a2:0,r:1,border_g:1,rad:.1,x:.5,y:.5,ang:0,sides:4,border_r:1},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t}}],warp:"shader_body {\nret = texture2D(sampler_main, uv).rgb;\nret -= 0.004;\n}\n",comp:"shader_body {\nret = texture2D(sampler_main, uv).rgb;\nret *= hue_shader;\n}\n"}}.apply(e,[]))||(t.exports=r)},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i(0)),s=a(i(1)),n=a(i(3));function a(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(e,i){(0,r.default)(this,t),this.preset=e,this.texsizeX=i.texsizeX,this.texsizeY=i.texsizeY,this.mesh_width=i.mesh_width,this.mesh_height=i.mesh_height,this.aspectx=i.aspectx,this.aspecty=i.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.qs=n.default.map(n.default.range(1,33),function(t){return"q"+t}),this.ts=n.default.map(n.default.range(1,9),function(t){return"t"+t}),this.frameNum=0,this.time=0,this.initializeEquations()}return(0,s.default)(t,[{key:"initializeEquations",value:function(){this.runVertEQs=""!==this.preset.pixel_eqs,this.mdVSQInit=null,this.mdVSFrame=null,this.mdVSUserKeys=null,this.mdVSFrameMap=null,this.mdVSShapes=null,this.mdVSUserKeysShapes=null,this.mdVSFrameMapShapes=null,this.mdVSWaves=null,this.mdVSUserKeysWaves=null,this.mdVSFrameMapWaves=null,this.mdVSQAfterFrame=null,this.mdVS=n.default.clone(this.preset.baseVals);var t={bass:1,bass_att:1,mid:1,mid_att:1,treb:1,treb_att:1};this.mdVSBaseKeys=n.default.keys(t),this.mdVS=n.default.extend(this.mdVS,t),Object.prototype.hasOwnProperty.call(this.mdVS,"tex_filt")||(this.mdVS.tex_filt=1),Object.prototype.hasOwnProperty.call(this.mdVS,"fshader")||(this.mdVS.fshader=0),Object.prototype.hasOwnProperty.call(this.mdVS,"additivewave")||(this.mdVS.additivewave=0),this.mdVS.rand_start=new Float32Array([Math.random(),Math.random(),Math.random(),Math.random()]),this.mdVS.frame=this.frameNum,this.mdVS.fps=45,this.mdVS.time=this.time,this.mdVS.rand_preset=new Float32Array([Math.random(),Math.random(),Math.random(),Math.random()]),this.mdVS.meshx=this.mesh_width,this.mdVS.meshy=this.mesh_height,this.mdVS.aspectx=this.invAspectx,this.mdVS.aspecty=this.invAspecty,this.mdVS.pixelsx=this.texsizeX,this.mdVS.pixelsy=this.texsizeY;var e=n.default.concat(this.qs,this.ts,n.default.keys(this.mdVS)),i=n.default.omit(n.default.clone(this.mdVS),this.qs);this.mdVS=this.preset.init_eqs(n.default.clone(this.mdVS)),this.mdVS=n.default.extend(this.mdVS,i),this.mdVSQInit=n.default.pick(this.mdVS,this.qs),this.mdVSFrame=this.preset.frame_eqs(n.default.clone(this.mdVS)),this.mdVSUserKeys=n.default.keys(n.default.omit(this.mdVS,e)),this.mdVSFrameMap=n.default.pick(this.mdVS,this.mdVSUserKeys),this.mdVSQAfterFrame=n.default.pick(this.mdVSFrame,this.qs);var r=n.default.pick(this.mdVSFrame,this.mdVSBaseKeys);if(this.mdVSShapes=[],this.mdVSTShapeInits=[],this.mdVSUserKeysShapes=[],this.mdVSFrameMapShapes=[],this.preset.shapes&&this.preset.shapes.length>0)for(var s=0;s<this.preset.shapes.length;s++){var a=this.preset.shapes[s],o=a.baseVals;if(o.enabled>0){var h=n.default.extend(n.default.clone(o),r);h.frame=this.frameNum,h.fps=45,h.time=this.time,h=n.default.extend(h,this.mdVSQAfterFrame);var u=n.default.concat(this.qs,this.ts,n.default.keys(h),["num_inst"]);a.init_eqs&&(h=a.init_eqs(h),h=n.default.extend(h,o)),this.mdVSShapes.push(h),this.mdVSTShapeInits.push(n.default.pick(h,this.ts)),this.mdVSUserKeysShapes.push(n.default.keys(n.default.omit(h,u))),this.mdVSFrameMapShapes.push(n.default.pick(h,this.mdVSUserKeysShapes[s]))}else this.mdVSShapes.push({}),this.mdVSTShapeInits.push({}),this.mdVSUserKeysShapes.push([]),this.mdVSFrameMapShapes.push({})}if(this.mdVSWaves=[],this.mdVSTWaveInits=[],this.mdVSUserKeysWaves=[],this.mdVSFrameMapWaves=[],this.preset.waves&&this.preset.waves.length>0)for(var l=0;l<this.preset.waves.length;l++){var f=this.preset.waves[l],c=f.baseVals;if(c.enabled>0){var m=n.default.extend(n.default.clone(c),r);m.frame=this.frameNum,m.fps=45,m.time=this.time,m=n.default.extend(m,this.mdVSQAfterFrame);var g=n.default.concat(this.qs,this.ts,n.default.keys(m));f.init_eqs&&(m=f.init_eqs(m),m=n.default.extend(m,c)),this.mdVSWaves.push(m),this.mdVSTWaveInits.push(n.default.pick(m,this.ts)),this.mdVSUserKeysWaves.push(n.default.keys(n.default.omit(m,g))),this.mdVSFrameMapWaves.push(n.default.pick(m,this.mdVSUserKeysWaves[l]))}else this.mdVSWaves.push({}),this.mdVSTWaveInits.push({}),this.mdVSUserKeysWaves.push([]),this.mdVSFrameMapWaves.push({})}}},{key:"updatePreset",value:function(t){this.preset=t,this.initializeEquations()}},{key:"updateGlobals",value:function(t){this.texsizeX=t.texsizeX,this.texsizeY=t.texsizeY,this.mesh_width=t.mesh_width,this.mesh_height=t.mesh_height,this.aspectx=t.aspectx,this.aspecty=t.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty}},{key:"runFrameEquations",value:function(t){this.frameNum=t.frame,this.time=t.time,this.fps=t.fps,this.mdVS=n.default.extend(n.default.clone(this.mdVS),t),this.mdVSFrame=n.default.clone(this.mdVS),this.mdVSFrame.time=this.time,this.mdVSFrame.x=0,this.mdVSFrame.y=0,this.mdVSFrame.rad=0,this.mdVSFrame.ang=0,this.mdVSFrame=n.default.extend(this.mdVSFrame,this.mdVSQInit),this.mdVSFrame=n.default.extend(this.mdVSFrame,this.mdVSFrameMap),this.mdVSFrame=this.preset.frame_eqs(this.mdVSFrame),this.mdVSFrameMap=n.default.pick(this.mdVSFrame,this.mdVSUserKeys),this.mdVSQAfterFrame=n.default.pick(this.mdVSFrame,this.qs)}}]),t}();e.default=o,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(i(0)),s=o(i(1)),n=o(i(2)),a=o(i(11));function o(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.default)(this,t),this.gl=e,this.positions=new Float32Array(1536),this.positions2=new Float32Array(1536),this.oldPositions=new Float32Array(1536),this.oldPositions2=new Float32Array(1536),this.smoothedPositions=new Float32Array(3069),this.smoothedPositions2=new Float32Array(3069),this.color=[0,0,0,1],this.texsizeX=i.texsizeX,this.texsizeY=i.texsizeY,this.aspectx=i.aspectx,this.aspecty=i.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.floatPrecision=n.default.getFragmentFloatPrecision(this.gl),this.createShader(),this.vertexBuf=this.gl.createBuffer()}return(0,s.default)(t,[{key:"updateGlobals",value:function(t){this.texsizeX=t.texsizeX,this.texsizeY=t.texsizeY,this.aspectx=t.aspectx,this.aspecty=t.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty}},{key:"createShader",value:function(){this.shaderProgram=this.gl.createProgram();var t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,"#version 300 es\n                                      in vec3 aPos;\n                                      uniform vec2 thickOffset;\n                                      void main(void) {\n                                        gl_Position = vec4(aPos + vec3(thickOffset, 0.0), 1.0);\n                                      }"),this.gl.compileShader(t);var e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,"#version 300 es\n                                      precision "+this.floatPrecision+" float;\n                                      precision highp int;\n                                      precision mediump sampler2D;\n                                      out vec4 fragColor;\n                                      uniform vec4 u_color;\n                                      void main(void) {\n                                        fragColor = u_color;\n                                      }"),this.gl.compileShader(e),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.aPosLoc=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.colorLoc=this.gl.getUniformLocation(this.shaderProgram,"u_color"),this.thickOffsetLoc=this.gl.getUniformLocation(this.shaderProgram,"thickOffset")}},{key:"generateWaveform",value:function(e,i,r,s,n){var o=n.wave_a,h=(n.bass+n.mid+n.treb)/3;if(h>-.01&&o>.001&&r.length>0){var u=t.processWaveform(r,n),l=t.processWaveform(s,n),f=Math.floor(n.wave_mode)%8,c=Math.floor(n.old_wave_mode)%8,m=2*n.wave_x-1,g=2*n.wave_y-1;this.numVert=0,this.oldNumVert=0;for(var d=e&&f!==c?2:1,_=0;_<d;_++){var v=0===_?f:c,p=n.wave_mystery;0!==v&&1!==v&&4!==v||!(p<-1||p>1)||(p=.5*p+.5,p-=Math.floor(p),p=2*(p=Math.abs(p))-1);var x=void 0,b=void 0,y=void 0;if(0===_?(b=this.positions,y=this.positions2):(b=this.oldPositions,y=this.oldPositions2),o=n.wave_a,0===v){if(n.modwavealphabyvolume>0){var T=n.modwavealphaend-n.modwavealphastart;o*=(h-n.modwavealphastart)/T}o=Math.clamp(o,0,1);for(var A=1/((x=Math.floor(u.length/2)+1)-1),E=Math.floor((u.length-x)/2),P=0;P<x-1;P++){var L=.5+.4*l[P+E]+p,R=P*A*2*Math.PI+.2*n.time;if(P<x/10){var w=P/(.1*x);L=(1-(w=.5-.5*Math.cos(w*Math.PI)))*(.5+.4*l[P+x+E]+p)+L*w}b[3*P+0]=L*Math.cos(R)*this.aspecty+m,b[3*P+1]=L*Math.sin(R)*this.aspectx+g,b[3*P+2]=0}b[3*(x-1)+0]=b[0],b[3*(x-1)+1]=b[1],b[3*(x-1)+2]=0}else if(1===v){if(o*=1.25,n.modwavealphabyvolume>0){var S=n.modwavealphaend-n.modwavealphastart;o*=(h-n.modwavealphastart)/S}o=Math.clamp(o,0,1),x=Math.floor(u.length/2);for(var M=0;M<x;M++){var U=.53+.43*l[M]+p,F=.5*u[M+32]*Math.PI+2.3*n.time;b[3*M+0]=U*Math.cos(F)*this.aspecty+m,b[3*M+1]=U*Math.sin(F)*this.aspectx+g,b[3*M+2]=0}}else if(2===v){if(this.texsizeX<1024?o*=.09:this.texsizeX>=1024&&this.texsizeX<2048?o*=.11:o*=.13,n.modwavealphabyvolume>0){var q=n.modwavealphaend-n.modwavealphastart;o*=(h-n.modwavealphastart)/q}o=Math.clamp(o,0,1),x=u.length;for(var z=0;z<u.length;z++)b[3*z+0]=l[z]*this.aspecty+m,b[3*z+1]=u[(z+32)%u.length]*this.aspectx+g,b[3*z+2]=0}else if(3===v){if(this.texsizeX<1024?o*=.15:this.texsizeX>=1024&&this.texsizeX<2048?o*=.22:o*=.33,o*=1.3,o*=n.treb*n.treb,n.modwavealphabyvolume>0){var V=n.modwavealphaend-n.modwavealphastart;o*=(h-n.modwavealphastart)/V}o=Math.clamp(o,0,1),x=u.length;for(var C=0;C<u.length;C++)b[3*C+0]=l[C]*this.aspecty+m,b[3*C+1]=u[(C+32)%u.length]*this.aspectx+g,b[3*C+2]=0}else if(4===v){if(n.modwavealphabyvolume>0){var D=n.modwavealphaend-n.modwavealphastart;o*=(h-n.modwavealphastart)/D}o=Math.clamp(o,0,1),(x=u.length)>this.texsizeX/3&&(x=Math.floor(this.texsizeX/3));for(var B=1/x,X=Math.floor((u.length-x)/2),I=.45+.5*(.5*p+.5),k=1-I,N=0;N<x;N++){var O=2*N*B+(m-1)+.44*l[(N+25+X)%u.length],W=.47*u[N+X]+g;N>1&&(O=O*k+I*(2*b[3*(N-1)+0]-b[3*(N-2)+0]),W=W*k+I*(2*b[3*(N-1)+1]-b[3*(N-2)+1])),b[3*N+0]=O,b[3*N+1]=W,b[3*N+2]=0}}else if(5===v){if(this.texsizeX<1024?o*=.09:this.texsizeX>=1024&&this.texsizeX<2048?o*=.11:o*=.13,n.modwavealphabyvolume>0){var Y=n.modwavealphaend-n.modwavealphastart;o*=(h-n.modwavealphastart)/Y}o=Math.clamp(o,0,1);var j=Math.cos(.3*n.time),Q=Math.sin(.3*n.time);x=u.length;for(var H=0;H<u.length;H++){var G=(H+32)%u.length,K=l[H]*u[G]+u[H]*l[G],$=l[H]*l[H]-u[G]*u[G];b[3*H+0]=(K*j-$*Q)*(this.aspecty+m),b[3*H+1]=(K*Q+$*j)*(this.aspectx+g),b[3*H+2]=0}}else if(6===v||7===v){if(n.modwavealphabyvolume>0){var Z=n.modwavealphaend-n.modwavealphastart;o*=(h-n.modwavealphastart)/Z}o=Math.clamp(o,0,1),(x=Math.floor(u.length/2))>this.texsizeX/3&&(x=Math.floor(this.texsizeX/3));for(var J=Math.floor((u.length-x)/2),tt=.5*Math.PI*p,et=Math.cos(tt),it=Math.sin(tt),rt=[m*Math.cos(tt+.5*Math.PI)-3*et,m*Math.cos(tt+.5*Math.PI)+3*et],st=[m*Math.sin(tt+.5*Math.PI)-3*it,m*Math.sin(tt+.5*Math.PI)+3*it],nt=0;nt<2;nt++)for(var at=0;at<4;at++){var ot=void 0,ht=!1;switch(at){case 0:rt[nt]>1.1&&(ot=(1.1-rt[1-nt])/(rt[nt]-rt[1-nt]),ht=!0);break;case 1:rt[nt]<-1.1&&(ot=(-1.1-rt[1-nt])/(rt[nt]-rt[1-nt]),ht=!0);break;case 2:st[nt]>1.1&&(ot=(1.1-st[1-nt])/(st[nt]-st[1-nt]),ht=!0);break;case 3:st[nt]<-1.1&&(ot=(-1.1-st[1-nt])/(st[nt]-st[1-nt]),ht=!0)}if(ht){var ut=rt[nt]-rt[1-nt],lt=st[nt]-st[1-nt];rt[nt]=rt[1-nt]+ut*ot,st[nt]=st[1-nt]+lt*ot}}et=(rt[1]-rt[0])/x,it=(st[1]-st[0])/x;var ft=Math.atan2(it,et),ct=Math.cos(ft+.5*Math.PI),mt=Math.sin(ft+.5*Math.PI);if(6===v)for(var gt=0;gt<x;gt++){var dt=u[gt+J];b[3*gt+0]=rt[0]+et*gt+.25*ct*dt,b[3*gt+1]=st[0]+it*gt+.25*mt*dt,b[3*gt+2]=0}else if(7===v){for(var _t=Math.pow(.5*g+.5,2),vt=0;vt<x;vt++){var pt=u[vt+J];b[3*vt+0]=rt[0]+et*vt+ct*(.25*pt+_t),b[3*vt+1]=st[0]+it*vt+mt*(.25*pt+_t),b[3*vt+2]=0}for(var xt=0;xt<x;xt++){var bt=l[xt+J];y[3*xt+0]=rt[0]+et*xt+ct*(.25*bt-_t),y[3*xt+1]=st[0]+it*xt+mt*(.25*bt-_t),y[3*xt+2]=0}}}0===_?(this.positions=b,this.positions2=y,this.numVert=x,this.alpha=o):(this.oldPositions=b,this.oldPositions2=y,this.oldNumVert=x,this.oldAlpha=o)}var yt=.5-.5*Math.cos(3.1415926535898*i),Tt=1-yt;this.oldNumVert>0&&(o=yt*this.alpha+Tt*this.oldAlpha);var At=Math.clamp(n.wave_r,0,1),Et=Math.clamp(n.wave_g,0,1),Pt=Math.clamp(n.wave_b,0,1);if(n.wave_brighten>0){var Lt=Math.max(At,Et,Pt);Lt>.01&&(At/=Lt,Et/=Lt,Pt/=Lt)}if(this.color=[At,Et,Pt,o],this.oldNumVert>0)if(7===f){for(var Rt=(this.oldNumVert-1)/(2*this.numVert),wt=0;wt<this.numVert;wt++){var St=wt*Rt,Mt=Math.floor(St),Ut=St-Mt,Ft=this.oldPositions[3*Mt+0]*(1-Ut)+this.oldPositions[3*(Mt+1)+0]*Ut,qt=this.oldPositions[3*Mt+1]*(1-Ut)+this.oldPositions[3*(Mt+1)+1]*Ut;this.positions[3*wt+0]=this.positions[3*wt+0]*yt+Ft*Tt,this.positions[3*wt+1]=this.positions[3*wt+1]*yt+qt*Tt,this.positions[3*wt+2]=0}for(var zt=0;zt<this.numVert;zt++){var Vt=(zt+this.numVert)*Rt,Ct=Math.floor(Vt),Dt=Vt-Ct,Bt=this.oldPositions[3*Ct+0]*(1-Dt)+this.oldPositions[3*(Ct+1)+0]*Dt,Xt=this.oldPositions[3*Ct+1]*(1-Dt)+this.oldPositions[3*(Ct+1)+1]*Dt;this.positions2[3*zt+0]=this.positions2[3*zt+0]*yt+Bt*Tt,this.positions2[3*zt+1]=this.positions2[3*zt+1]*yt+Xt*Tt,this.positions2[3*zt+2]=0}}else if(7===c){for(var It=this.numVert/2,kt=(this.oldNumVert-1)/It,Nt=0;Nt<It;Nt++){var Ot=Nt*kt,Wt=Math.floor(Ot),Yt=Ot-Wt,jt=this.oldPositions[3*Wt+0]*(1-Yt)+this.oldPositions[3*(Wt+1)+0]*Yt,Qt=this.oldPositions[3*Wt+1]*(1-Yt)+this.oldPositions[3*(Wt+1)+1]*Yt;this.positions[3*Nt+0]=this.positions[3*Nt+0]*yt+jt*Tt,this.positions[3*Nt+1]=this.positions[3*Nt+1]*yt+Qt*Tt,this.positions[3*Nt+2]=0}for(var Ht=0;Ht<It;Ht++){var Gt=Ht*kt,Kt=Math.floor(Gt),$t=Gt-Kt,Zt=this.oldPositions2[3*Kt+0]*(1-$t)+this.oldPositions2[3*(Kt+1)+0]*$t,Jt=this.oldPositions2[3*Kt+1]*(1-$t)+this.oldPositions2[3*(Kt+1)+1]*$t;this.positions2[3*Ht+0]=this.positions[3*(Ht+It)+0]*yt+Zt*Tt,this.positions2[3*Ht+1]=this.positions[3*(Ht+It)+1]*yt+Jt*Tt,this.positions2[3*Ht+2]=0}}else for(var te=(this.oldNumVert-1)/this.numVert,ee=0;ee<this.numVert;ee++){var ie=ee*te,re=Math.floor(ie),se=ie-re,ne=this.oldPositions[3*re+0]*(1-se)+this.oldPositions[3*(re+1)+0]*se,ae=this.oldPositions[3*re+1]*(1-se)+this.oldPositions[3*(re+1)+1]*se;this.positions[3*ee+0]=this.positions[3*ee+0]*yt+ne*Tt,this.positions[3*ee+1]=this.positions[3*ee+1]*yt+ae*Tt,this.positions[3*ee+2]=0}for(var oe=0;oe<this.numVert;oe++)this.positions[3*oe+1]=-this.positions[3*oe+1];if(this.smoothedNumVert=2*this.numVert-1,a.default.smoothWave(this.positions,this.smoothedPositions,this.numVert),7===f||7===c){for(var he=0;he<this.numVert;he++)this.positions2[3*he+1]=-this.positions2[3*he+1];a.default.smoothWave(this.positions2,this.smoothedPositions2,this.numVert)}return!0}return!1}},{key:"drawBasicWaveform",value:function(t,e,i,r,s){if(this.generateWaveform(t,e,i,r,s)){this.gl.useProgram(this.shaderProgram),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.smoothedPositions,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.aPosLoc,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aPosLoc),this.gl.uniform4fv(this.colorLoc,this.color);var n=1;(s.wave_thick>0||s.wave_dots>0)&&(n=4),s.additivewave>0?this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE):this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);for(var a=s.wave_dots>0?this.gl.POINTS:this.gl.LINE_STRIP,o=0;o<n;o++)0===o?this.gl.uniform2fv(this.thickOffsetLoc,[0,0]):1===o?this.gl.uniform2fv(this.thickOffsetLoc,[2/this.texsizeX,0]):2===o?this.gl.uniform2fv(this.thickOffsetLoc,[0,2/this.texsizeY]):3===o&&this.gl.uniform2fv(this.thickOffsetLoc,[2/this.texsizeX,2/this.texsizeY]),this.gl.drawArrays(a,0,this.smoothedNumVert);if(7==Math.floor(s.wave_mode)%8){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.smoothedPositions2,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.aPosLoc,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aPosLoc);for(var h=0;h<n;h++)0===h?this.gl.uniform2fv(this.thickOffsetLoc,[0,0]):1===h?this.gl.uniform2fv(this.thickOffsetLoc,[2/this.texsizeX,0]):2===h?this.gl.uniform2fv(this.thickOffsetLoc,[0,2/this.texsizeY]):3===h&&this.gl.uniform2fv(this.thickOffsetLoc,[2/this.texsizeX,2/this.texsizeY]),this.gl.drawArrays(a,0,this.smoothedNumVert)}}}}],[{key:"processWaveform",value:function(t,e){var i=[],r=e.wave_scale/128,s=e.wave_smoothing,n=r*(1-s);i.push(t[0]*r);for(var a=1;a<t.length;a++)i.push(t[a]*n+i[a-1]*s);return i}}]),t}();e.default=h,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=h(i(0)),s=h(i(1)),n=h(i(3)),a=h(i(2)),o=h(i(11));function h(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,i,s){(0,r.default)(this,t),this.index=e,this.gl=i,this.pointsData=[new Float32Array(512),new Float32Array(512)],this.positions=new Float32Array(1536),this.colors=new Float32Array(2048),this.smoothedPositions=new Float32Array(3069),this.smoothedColors=new Float32Array(4092),this.texsizeX=s.texsizeX,this.texsizeY=s.texsizeY,this.mesh_width=s.mesh_width,this.mesh_height=s.mesh_height,this.aspectx=s.aspectx,this.aspecty=s.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.positionVertexBuf=this.gl.createBuffer(),this.colorVertexBuf=this.gl.createBuffer(),this.floatPrecision=a.default.getFragmentFloatPrecision(this.gl),this.createShader()}return(0,s.default)(t,[{key:"updateGlobals",value:function(t){this.texsizeX=t.texsizeX,this.texsizeY=t.texsizeY,this.mesh_width=t.mesh_width,this.mesh_height=t.mesh_height,this.aspectx=t.aspectx,this.aspecty=t.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty}},{key:"createShader",value:function(){this.shaderProgram=this.gl.createProgram();var t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,"#version 300 es\n                                      uniform float uSize;\n                                      uniform vec2 thickOffset;\n                                      in vec3 aPos;\n                                      in vec4 aColor;\n                                      out vec4 vColor;\n                                      void main(void) {\n                                        vColor = aColor;\n                                        gl_PointSize = uSize;\n                                        gl_Position = vec4(aPos + vec3(thickOffset, 0.0), 1.0);\n                                      }"),this.gl.compileShader(t);var e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,"#version 300 es\n                                      precision "+this.floatPrecision+" float;\n                                      precision highp int;\n                                      precision mediump sampler2D;\n                                      in vec4 vColor;\n                                      out vec4 fragColor;\n                                      void main(void) {\n                                        fragColor = vColor;\n                                      }"),this.gl.compileShader(e),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.aPosLocation=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.aColorLocation=this.gl.getAttribLocation(this.shaderProgram,"aColor"),this.sizeLoc=this.gl.getUniformLocation(this.shaderProgram,"uSize"),this.thickOffsetLoc=this.gl.getUniformLocation(this.shaderProgram,"thickOffset")}},{key:"generateWaveform",value:function(e,i,r,s,a,h,u,l){if(1===u.baseVals.enabled&&e.length>0){var f=n.default.clone(h.mdVSWaves[this.index]),c=h.mdVSTWaveInits[this.index],m=f.rkeys||[];f=n.default.extend(f,h.mdVSQAfterFrame),f=n.default.extend(f,c),(f=n.default.extend(f,a)).time=h.time,f.frame=h.frameNum,f.meshx=this.mesh_width,f.meshy=this.mesh_height,f.aspectx=this.invAspectx,f.aspecty=this.invAspecty,f.pixelsx=this.texsizeX,f.pixelsy=this.texsizeY,f=n.default.extend(f,h.mdVSFrameMapWaves[this.index]);for(var g=u.frame_eqs(f),d={},_=0;_<m.length;_++){var v=m[_];n.default.includes(h.mdVSUserKeysWaves[this.index],v)||n.default.includes(h.qs,v)||n.default.includes(h.ts,v)||(d[v]=g[v])}Object.prototype.hasOwnProperty.call(g,"samples")?this.samples=g.samples:this.samples=512,this.samples>512&&(this.samples=512),this.samples=Math.floor(this.samples);var p=Math.floor(g.sep),x=g.scaling,b=g.spectrum,y=g.smoothing,T=g.usedots,A=g.r,E=g.g,P=g.b,L=g.a,R=h.mdVS.wave_scale;if(this.samples-=p,this.samples>=2||T&&this.samples>=1){var w=(b>0?.15:.004)*x*R,S=b>0?r:e,M=b>0?s:i,U=b>0?0:Math.floor((512-this.samples)/2-p/2),F=b>0?0:Math.floor((512-this.samples)/2+p/2),q=b>0?(512-p)/this.samples:1,z=Math.pow(.98*y,.5),V=1-z;this.pointsData[0][0]=S[U],this.pointsData[1][0]=M[F+64];for(var C=1;C<this.samples;C++){var D=S[Math.floor(C*q+U)],B=M[Math.floor(C*q+F+64)%M.length];this.pointsData[0][C]=D*V+this.pointsData[0][C-1]*z,this.pointsData[1][C]=B*V+this.pointsData[1][C-1]*z}for(var X=this.samples-2;X>=0;X--)this.pointsData[0][X]=this.pointsData[0][X]*V+this.pointsData[0][X+1]*z,this.pointsData[1][X]=this.pointsData[1][X]*V+this.pointsData[1][X+1]*z;for(var I=0;I<this.samples;I++)this.pointsData[0][I]*=w,this.pointsData[1][I]*=w;for(var k=0;k<this.samples;k++){g=t.repairPerVertexEQs(g,d);var N=this.pointsData[0][k],O=this.pointsData[1][k];g.sample=k/(this.samples-1),g.value1=N,g.value2=O,g.x=.5+N,g.y=.5+O,g.r=A,g.g=E,g.b=P,g.a=L,""!==u.point_eqs&&(g=u.point_eqs(g));var W=(2*g.x-1)*this.invAspectx,Y=(-2*g.y+1)*this.invAspecty,j=g.r,Q=g.g,H=g.b,G=g.a;this.positions[3*k+0]=W,this.positions[3*k+1]=Y,this.positions[3*k+2]=0,this.colors[4*k+0]=j,this.colors[4*k+1]=Q,this.colors[4*k+2]=H,this.colors[4*k+3]=G*l}var K=h.mdVSUserKeysWaves[this.index],$=n.default.pick(g,K);return h.mdVSFrameMapWaves[this.index]=$,this.mdVSWaveFrame=g,0===T&&o.default.smoothWaveAndColor(this.positions,this.colors,this.smoothedPositions,this.smoothedColors,this.samples),!0}}return!1}},{key:"drawCustomWaveform",value:function(t,e,i,r,s,n,a,o,h,u,l){for(var f=t?2:1,c=0;c<f;c++){var m=1;2===f&&(m=0===c?e:1-e);var g=0===c?o:u,d=0===c?h:l;if(d&&this.generateWaveform(i,r,s,n,a,g,d,m)){this.gl.useProgram(this.shaderProgram);var _=void 0,v=void 0,p=void 0,x=this.mdVSWaveFrame.usedots;0===x?(_=this.smoothedPositions,v=this.smoothedColors,p=2*this.samples-1):(_=this.positions,v=this.colors,p=this.samples),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,_,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.aPosLocation,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aPosLocation),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.colorVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,v,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.aColorLocation,4,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aColorLocation);var b=1,y=this.mdVSWaveFrame.thick;x>0?y>0?this.gl.uniform1f(this.sizeLoc,2+(this.texsizeX>=1024?1:0)):this.gl.uniform1f(this.sizeLoc,1+(this.texsizeX>=1024?1:0)):(this.gl.uniform1f(this.sizeLoc,1),y>0&&(b=4)),this.mdVSWaveFrame.additive>0?this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE):this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA);for(var T=x>0?this.gl.POINTS:this.gl.LINE_STRIP,A=0;A<b;A++)0===A?this.gl.uniform2fv(this.thickOffsetLoc,[0,0]):1===A?this.gl.uniform2fv(this.thickOffsetLoc,[2/this.texsizeX,0]):2===A?this.gl.uniform2fv(this.thickOffsetLoc,[0,2/this.texsizeY]):3===A&&this.gl.uniform2fv(this.thickOffsetLoc,[2/this.texsizeX,2/this.texsizeY]),this.gl.drawArrays(T,0,p)}}}}],[{key:"repairPerVertexEQs",value:function(t,e){return n.default.isEmpty(e)||n.default.forEach(e,function(e,i){t[i]=e}),t}}]),t}();e.default=u,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(i(0)),s=o(i(1)),n=o(i(3)),a=o(i(2));function o(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e,i,s){(0,r.default)(this,t),this.index=e,this.gl=i,this.positions=new Float32Array(309),this.colors=new Float32Array(412),this.uvs=new Float32Array(206),this.borderPositions=new Float32Array(306),this.texsizeX=s.texsizeX,this.texsizeY=s.texsizeY,this.mesh_width=s.mesh_width,this.mesh_height=s.mesh_height,this.aspectx=s.aspectx,this.aspecty=s.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.positionVertexBuf=this.gl.createBuffer(),this.colorVertexBuf=this.gl.createBuffer(),this.uvVertexBuf=this.gl.createBuffer(),this.borderPositionVertexBuf=this.gl.createBuffer(),this.floatPrecision=a.default.getFragmentFloatPrecision(this.gl),this.createShader(),this.createBorderShader(),this.mainSampler=this.gl.createSampler(),i.samplerParameteri(this.mainSampler,i.TEXTURE_MIN_FILTER,i.LINEAR_MIPMAP_LINEAR),i.samplerParameteri(this.mainSampler,i.TEXTURE_MAG_FILTER,i.LINEAR),i.samplerParameteri(this.mainSampler,i.TEXTURE_WRAP_S,i.REPEAT),i.samplerParameteri(this.mainSampler,i.TEXTURE_WRAP_T,i.REPEAT)}return(0,s.default)(t,[{key:"updateGlobals",value:function(t){this.texsizeX=t.texsizeX,this.texsizeY=t.texsizeY,this.mesh_width=t.mesh_width,this.mesh_height=t.mesh_height,this.aspectx=t.aspectx,this.aspecty=t.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty}},{key:"createShader",value:function(){this.shaderProgram=this.gl.createProgram();var t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,"#version 300 es\n                                      in vec3 aPos;\n                                      in vec4 aColor;\n                                      in vec2 aUv;\n                                      out vec4 vColor;\n                                      out vec2 vUv;\n                                      void main(void) {\n                                        vColor = aColor;\n                                        vUv = aUv;\n                                        gl_Position = vec4(aPos, 1.0);\n                                      }"),this.gl.compileShader(t);var e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,"#version 300 es\n                                      precision "+this.floatPrecision+" float;\n                                      precision highp int;\n                                      precision mediump sampler2D;\n                                      uniform sampler2D uTexture;\n                                      uniform float uTextured;\n                                      in vec4 vColor;\n                                      in vec2 vUv;\n                                      out vec4 fragColor;\n                                      void main(void) {\n                                        if (uTextured > 0.0) {\n                                          fragColor = texture(uTexture, vUv) * vColor;\n                                        } else {\n                                          fragColor = vColor;\n                                        }\n                                      }"),this.gl.compileShader(e),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.aPosLocation=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.aColorLocation=this.gl.getAttribLocation(this.shaderProgram,"aColor"),this.aUvLocation=this.gl.getAttribLocation(this.shaderProgram,"aUv"),this.texturedLoc=this.gl.getUniformLocation(this.shaderProgram,"uTextured"),this.textureLoc=this.gl.getUniformLocation(this.shaderProgram,"uTexture")}},{key:"createBorderShader",value:function(){this.borderShaderProgram=this.gl.createProgram();var t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,"#version 300 es\n                                      in vec3 aBorderPos;\n                                      uniform vec2 thickOffset;\n                                      void main(void) {\n                                        gl_Position = vec4(aBorderPos +\n                                                           vec3(thickOffset, 0.0), 1.0);\n                                      }"),this.gl.compileShader(t);var e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,"#version 300 es\n                                      precision "+this.floatPrecision+" float;\n                                      precision highp int;\n                                      precision mediump sampler2D;\n                                      out vec4 fragColor;\n                                      uniform vec4 uBorderColor;\n                                      void main(void) {\n                                        fragColor = uBorderColor;\n                                      }"),this.gl.compileShader(e),this.gl.attachShader(this.borderShaderProgram,t),this.gl.attachShader(this.borderShaderProgram,e),this.gl.linkProgram(this.borderShaderProgram),this.aBorderPosLoc=this.gl.getAttribLocation(this.borderShaderProgram,"aBorderPos"),this.uBorderColorLoc=this.gl.getUniformLocation(this.borderShaderProgram,"uBorderColor"),this.thickOffsetLoc=this.gl.getUniformLocation(this.shaderProgram,"thickOffset")}},{key:"drawCustomShape",value:function(e,i,r,s,a,o,h,u){for(var l=e?2:1,f=0;f<l;f++){var c=1;2===l&&(c=0===f?i:1-i);var m=0===f?s:o,g=0===f?a:h;if(g&&1===g.baseVals.enabled){this.setupShapeBuffers();var d=m.mdVSFrame.wrap>0?this.gl.REPEAT:this.gl.CLAMP_TO_EDGE;this.gl.samplerParameteri(this.mainSampler,this.gl.TEXTURE_WRAP_S,d),this.gl.samplerParameteri(this.mainSampler,this.gl.TEXTURE_WRAP_T,d);var _=n.default.clone(m.mdVSShapes[this.index]),v=m.mdVSTShapeInits[this.index],p=_.rkeys||[];_=n.default.extend(_,m.mdVSQAfterFrame),_=n.default.extend(_,v);for(var x={},b=0;b<p.length;b++){var y=p[b];n.default.includes(m.mdVSUserKeysShapes[this.index],y)||n.default.includes(m.qs,y)||n.default.includes(m.ts,y)||(x[y]=_[y])}(_=n.default.extend(_,r)).time=m.time,_.frame=m.frameNum,_.meshx=this.mesh_width,_.meshy=this.mesh_height,_.aspectx=this.invAspectx,_.aspecty=this.invAspecty,_.pixelsx=this.texsizeX,_.pixelsy=this.texsizeY,_=n.default.extend(_,m.mdVSFrameMapShapes[this.index]);var T=n.default.clone(_),A=_.num_inst||1;A=Math.clamp(A,1,1024);for(var E=0;E<A;E++){(_=t.repairPerVertexEQs(_,x)).instance=E,_.x=T.x,_.y=T.y,_.rad=T.rad,_.ang=T.ang,_.r=T.r,_.g=T.g,_.b=T.b,_.a=T.a,_.r2=T.r2,_.g2=T.g2,_.b2=T.b2,_.a2=T.a2,_.border_r=T.border_r,_.border_g=T.border_g,_.border_b=T.border_b,_.border_a=T.border_a,_.thickoutline=T.thickoutline,_.textured=T.textured,_.tex_zoom=T.tex_zoom,_.tex_ang=T.tex_ang,_.additive=T.additive;var P=g.frame_eqs(_),L=P.sides;L=Math.clamp(L,3,100),L=Math.floor(L);var R=P.rad,w=P.ang,S=2*P.x-1,M=-2*P.y+1,U=P.r,F=P.g,q=P.b,z=P.a,V=P.r2,C=P.g2,D=P.b2,B=P.a2,X=P.border_r,I=P.border_g,k=P.border_b,N=P.border_a;this.borderColor=[X,I,k,N];var O=P.thickoutline,W=P.textured,Y=P.tex_zoom,j=P.tex_ang,Q=W>0,H=N>0,G=O>0,K=P.additive>0;this.positions[0]=S,this.positions[1]=M,this.positions[2]=0,this.colors[0]=U,this.colors[1]=F,this.colors[2]=q,this.colors[3]=z,Q&&(this.uvs[0]=.5,this.uvs[1]=.5);for(var $=.25*Math.PI,Z=1;Z<=L+1;Z++){var J=(Z-1)/L*2*Math.PI,tt=J+w+$;if(this.positions[3*Z+0]=S+R*Math.cos(tt)*this.aspecty,this.positions[3*Z+1]=M+R*Math.sin(tt),this.positions[3*Z+2]=0,this.colors[4*Z+0]=V,this.colors[4*Z+1]=C,this.colors[4*Z+2]=D,this.colors[4*Z+3]=B*c,Q){var et=J+j+$;this.uvs[2*Z+0]=.5+.5*Math.cos(et)/Y*this.aspecty,this.uvs[2*Z+1]=.5+.5*Math.sin(et)/Y}H&&(this.borderPositions[3*(Z-1)+0]=this.positions[3*Z+0],this.borderPositions[3*(Z-1)+1]=this.positions[3*Z+1],this.borderPositions[3*(Z-1)+2]=this.positions[3*Z+2])}this.drawCustomShapeInstance(u,L,Q,H,G,K)}var it=m.mdVSUserKeysShapes[this.index],rt=n.default.pick(_,it);m.mdVSFrameMapShapes[this.index]=rt}}}},{key:"setupShapeBuffers",value:function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.positions,this.gl.DYNAMIC_DRAW),this.gl.vertexAttribPointer(this.aPosLocation,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aPosLocation),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.colorVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.colors,this.gl.DYNAMIC_DRAW),this.gl.vertexAttribPointer(this.aColorLocation,4,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aColorLocation),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.uvVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.uvs,this.gl.DYNAMIC_DRAW),this.gl.vertexAttribPointer(this.aUvLocation,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aUvLocation),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.borderPositionVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.borderPositions,this.gl.DYNAMIC_DRAW),this.gl.vertexAttribPointer(this.aBorderPosLoc,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aBorderPosLoc)}},{key:"drawCustomShapeInstance",value:function(t,e,i,r,s,n){this.gl.useProgram(this.shaderProgram);var a=new Float32Array(this.positions.buffer,0,3*(e+2));this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionVertexBuf),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,a),this.gl.vertexAttribPointer(this.aPosLocation,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aPosLocation);var o=new Float32Array(this.colors.buffer,0,4*(e+2));if(this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.colorVertexBuf),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,o),this.gl.vertexAttribPointer(this.aColorLocation,4,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aColorLocation),i){var h=new Float32Array(this.uvs.buffer,0,2*(e+2));this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.uvVertexBuf),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,h),this.gl.vertexAttribPointer(this.aUvLocation,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aUvLocation)}if(this.gl.uniform1f(this.texturedLoc,i?1:0),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.bindSampler(0,this.mainSampler),this.gl.uniform1i(this.textureLoc,0),n?this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE):this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.drawArrays(this.gl.TRIANGLE_FAN,0,e+2),r){this.gl.useProgram(this.borderShaderProgram);var u=new Float32Array(this.borderPositions.buffer,0,3*(e+1));this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.borderPositionVertexBuf),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,u),this.gl.vertexAttribPointer(this.aBorderPosLoc,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aBorderPosLoc),this.gl.uniform4fv(this.uBorderColorLoc,this.borderColor);for(var l=s?4:1,f=0;f<l;f++)0===f?this.gl.uniform2fv(this.thickOffsetLoc,[0,0]):1===f?this.gl.uniform2fv(this.thickOffsetLoc,[2/this.texsizeX,0]):2===f?this.gl.uniform2fv(this.thickOffsetLoc,[0,2/this.texsizeY]):3===f&&this.gl.uniform2fv(this.thickOffsetLoc,[2/this.texsizeX,2/this.texsizeY]),this.gl.drawArrays(this.gl.LINE_STRIP,0,e+1)}}}],[{key:"repairPerVertexEQs",value:function(t,e){return n.default.isEmpty(e)||n.default.forEach(e,function(e,i){t[i]=e}),t}}]),t}();e.default=h,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i(0)),s=a(i(1)),n=a(i(2));function a(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(0,r.default)(this,t),this.gl=e,this.positions=new Float32Array(72),this.aspectx=i.aspectx,this.aspecty=i.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.floatPrecision=n.default.getFragmentFloatPrecision(this.gl),this.createShader(),this.vertexBuf=this.gl.createBuffer()}return(0,s.default)(t,[{key:"updateGlobals",value:function(t){this.aspectx=t.aspectx,this.aspecty=t.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty}},{key:"createShader",value:function(){this.shaderProgram=this.gl.createProgram();var t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,"#version 300 es\n                                      in vec3 aPos;\n                                      void main(void) {\n                                        gl_Position = vec4(aPos, 1.0);\n                                      }"),this.gl.compileShader(t);var e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,"#version 300 es\n                                      precision "+this.floatPrecision+" float;\n                                      precision highp int;\n                                      precision mediump sampler2D;\n                                      out vec4 fragColor;\n                                      uniform vec4 u_color;\n                                      void main(void) {\n                                        fragColor = u_color;\n                                      }"),this.gl.compileShader(e),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.aPosLoc=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.colorLoc=this.gl.getUniformLocation(this.shaderProgram,"u_color")}},{key:"addTriangle",value:function(t,e,i,r){this.positions[t+0]=e[0],this.positions[t+1]=e[1],this.positions[t+2]=e[2],this.positions[t+3]=i[0],this.positions[t+4]=i[1],this.positions[t+5]=i[2],this.positions[t+6]=r[0],this.positions[t+7]=r[1],this.positions[t+8]=r[2]}},{key:"generateBorder",value:function(t,e,i){if(e>0&&t[3]>0){var r=i/2,s=e/2+r,n=2*r,a=2*r,o=2*s,h=2*s,u=[-1+n,-1+h,0],l=[-1+n,1-h,0],f=[-1+o,1-h,0],c=[-1+o,-1+h,0];return this.addTriangle(0,c,l,u),this.addTriangle(9,c,f,l),u=[1-n,-1+h,0],l=[1-n,1-h,0],f=[1-o,1-h,0],c=[1-o,-1+h,0],this.addTriangle(18,u,l,c),this.addTriangle(27,l,f,c),u=[-1+n,-1+a,0],l=[-1+n,h-1,0],f=[1-n,h-1,0],c=[1-n,-1+a,0],this.addTriangle(36,c,l,u),this.addTriangle(45,c,f,l),u=[-1+n,1-a,0],l=[-1+n,1-h,0],f=[1-n,1-h,0],c=[1-n,1-a,0],this.addTriangle(54,u,l,c),this.addTriangle(63,l,f,c),!0}return!1}},{key:"drawBorder",value:function(t,e,i){this.generateBorder(t,e,i)&&(this.gl.useProgram(this.shaderProgram),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.positions,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.aPosLoc,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aPosLoc),this.gl.uniform4fv(this.colorLoc,t),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.drawArrays(this.gl.TRIANGLES,0,this.positions.length/3))}}]),t}();e.default=o,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i(0)),s=a(i(1)),n=a(i(2));function a(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(e,i){(0,r.default)(this,t),this.gl=e,this.aspectx=i.aspectx,this.aspecty=i.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.generatePositions(),this.colors=new Float32Array([0,0,0,3/32,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),this.positionVertexBuf=this.gl.createBuffer(),this.colorVertexBuf=this.gl.createBuffer(),this.floatPrecision=n.default.getFragmentFloatPrecision(this.gl),this.createShader()}return(0,s.default)(t,[{key:"updateGlobals",value:function(t){this.aspectx=t.aspectx,this.aspecty=t.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.generatePositions()}},{key:"generatePositions",value:function(){this.positions=new Float32Array([0,0,0,-.05*this.aspecty,0,0,0,-.05,0,.05*this.aspecty,0,0,0,.05,0,-.05*this.aspecty,0,0])}},{key:"createShader",value:function(){this.shaderProgram=this.gl.createProgram();var t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,"#version 300 es\n                                      in vec3 aPos;\n                                      in vec4 aColor;\n                                      out vec4 vColor;\n                                      void main(void) {\n                                        vColor = aColor;\n                                        gl_Position = vec4(aPos, 1.0);\n                                      }"),this.gl.compileShader(t);var e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,"#version 300 es\n                                      precision "+this.floatPrecision+" float;\n                                      precision highp int;\n                                      precision mediump sampler2D;\n                                      in vec4 vColor;\n                                      out vec4 fragColor;\n                                      void main(void) {\n                                        fragColor = vColor;\n                                      }"),this.gl.compileShader(e),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.aPosLocation=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.aColorLocation=this.gl.getAttribLocation(this.shaderProgram,"aColor")}},{key:"drawDarkenCenter",value:function(t){t.darken_center>0&&(this.gl.useProgram(this.shaderProgram),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.positions,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.aPosLocation,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aPosLocation),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.colorVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.colors,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.aColorLocation,4,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aColorLocation),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.drawArrays(this.gl.TRIANGLE_FAN,0,this.positions.length/3))}}]),t}();e.default=o,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i(0)),s=a(i(1)),n=a(i(2));function a(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(e,i){(0,r.default)(this,t),this.gl=e,this.maxX=64,this.maxY=48,this.positions=new Float32Array(this.maxX*this.maxY*2*3),this.texsizeX=i.texsizeX,this.texsizeY=i.texsizeY,this.mesh_width=i.mesh_width,this.mesh_height=i.mesh_height,this.positionVertexBuf=this.gl.createBuffer(),this.floatPrecision=n.default.getFragmentFloatPrecision(this.gl),this.createShader()}return(0,s.default)(t,[{key:"updateGlobals",value:function(t){this.texsizeX=t.texsizeX,this.texsizeY=t.texsizeY,this.mesh_width=t.mesh_width,this.mesh_height=t.mesh_height}},{key:"createShader",value:function(){this.shaderProgram=this.gl.createProgram();var t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,"#version 300 es\n                                      in vec3 aPos;\n                                      void main(void) {\n                                        gl_Position = vec4(aPos, 1.0);\n                                      }"),this.gl.compileShader(t);var e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,"#version 300 es\n                                      precision "+this.floatPrecision+" float;\n                                      precision highp int;\n                                      precision mediump sampler2D;\n                                      out vec4 fragColor;\n                                      uniform vec4 u_color;\n                                      void main(void) {\n                                        fragColor = u_color;\n                                      }"),this.gl.compileShader(e),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.aPosLoc=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.colorLoc=this.gl.getUniformLocation(this.shaderProgram,"u_color")}},{key:"getMotionDir",value:function(t,e,i){var r=Math.floor(i*this.mesh_height),s=i*this.mesh_height-r,n=Math.floor(e*this.mesh_width),a=e*this.mesh_width-n,o=n+1,h=r+1,u=this.mesh_width+1,l=void 0,f=void 0;return l=t[2*(r*u+n)+0]*(1-a)*(1-s),f=t[2*(r*u+n)+1]*(1-a)*(1-s),l+=t[2*(r*u+o)+0]*a*(1-s),f+=t[2*(r*u+o)+1]*a*(1-s),l+=t[2*(h*u+n)+0]*(1-a)*s,f+=t[2*(h*u+n)+1]*(1-a)*s,[l+=t[2*(h*u+o)+0]*a*s,1-(f+=t[2*(h*u+o)+1]*a*s)]}},{key:"generateMotionVectors",value:function(t,e){var i=t.mv_a,r=Math.floor(t.mv_x),s=Math.floor(t.mv_y);if(i>.001&&r>0&&s>0){var n=t.mv_x-r,a=t.mv_y-s;r>this.maxX&&(r=this.maxX,n=0),s>this.maxY&&(s=this.maxY,a=0);var o=t.mv_dx,h=t.mv_dy,u=t.mv_l,l=1/this.texsizeX;this.numVecVerts=0;for(var f=0;f<s;f++){var c=(f+.25)/(s+a+.25-1);if((c-=h)>1e-4&&c<.9999)for(var m=0;m<r;m++){var g=(m+.25)/(r+n+.25-1);if((g+=o)>1e-4&&g<.9999){var d=this.getMotionDir(e,g,c),_=d[0],v=d[1],p=_-g,x=v-c;p*=u,x*=u;var b=Math.sqrt(p*p+x*x);b<l&&b>1e-8?(p*=b=l/b,x*=b):(p=l,p=l);var y=2*g-1,T=2*c-1,A=2*(_=g+p)-1,E=2*(v=c+x)-1;this.positions[3*this.numVecVerts+0]=y,this.positions[3*this.numVecVerts+1]=T,this.positions[3*this.numVecVerts+2]=0,this.positions[3*(this.numVecVerts+1)+0]=A,this.positions[3*(this.numVecVerts+1)+1]=E,this.positions[3*(this.numVecVerts+1)+2]=0,this.numVecVerts+=2}}}if(this.numVecVerts>0)return this.color=[t.mv_r,t.mv_g,t.mv_b,i],!0}return!1}},{key:"drawMotionVectors",value:function(t,e){this.generateMotionVectors(t,e)&&(this.gl.useProgram(this.shaderProgram),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.positions,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.aPosLoc,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.aPosLoc),this.gl.uniform4fv(this.colorLoc,this.color),this.gl.lineWidth(1),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.drawArrays(this.gl.LINES,0,this.numVecVerts))}}]),t}();e.default=o,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(i(0)),s=o(i(1)),n=o(i(3)),a=o(i(2));function o(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e,i){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,r.default)(this,t),this.gl=e,this.noise=i,this.texsizeX=s.texsizeX,this.texsizeY=s.texsizeY,this.mesh_width=s.mesh_width,this.mesh_height=s.mesh_height,this.aspectx=s.aspectx,this.aspecty=s.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.buildPositions(),this.indexBuf=e.createBuffer(),this.positionVertexBuf=this.gl.createBuffer(),this.warpUvVertexBuf=this.gl.createBuffer(),this.warpColorVertexBuf=this.gl.createBuffer(),this.floatPrecision=a.default.getFragmentFloatPrecision(this.gl),this.createShader(),this.mainSampler=this.gl.createSampler(),this.mainSamplerFW=this.gl.createSampler(),this.mainSamplerFC=this.gl.createSampler(),this.mainSamplerPW=this.gl.createSampler(),this.mainSamplerPC=this.gl.createSampler(),e.samplerParameteri(this.mainSampler,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.samplerParameteri(this.mainSampler,e.TEXTURE_MAG_FILTER,e.LINEAR),e.samplerParameteri(this.mainSampler,e.TEXTURE_WRAP_S,e.REPEAT),e.samplerParameteri(this.mainSampler,e.TEXTURE_WRAP_T,e.REPEAT),e.samplerParameteri(this.mainSamplerFW,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.samplerParameteri(this.mainSamplerFW,e.TEXTURE_MAG_FILTER,e.LINEAR),e.samplerParameteri(this.mainSamplerFW,e.TEXTURE_WRAP_S,e.REPEAT),e.samplerParameteri(this.mainSamplerFW,e.TEXTURE_WRAP_T,e.REPEAT),e.samplerParameteri(this.mainSamplerFC,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.samplerParameteri(this.mainSamplerFC,e.TEXTURE_MAG_FILTER,e.LINEAR),e.samplerParameteri(this.mainSamplerFC,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.samplerParameteri(this.mainSamplerFC,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.samplerParameteri(this.mainSamplerPW,e.TEXTURE_MIN_FILTER,e.NEAREST_MIPMAP_NEAREST),e.samplerParameteri(this.mainSamplerPW,e.TEXTURE_MAG_FILTER,e.NEAREST),e.samplerParameteri(this.mainSamplerPW,e.TEXTURE_WRAP_S,e.REPEAT),e.samplerParameteri(this.mainSamplerPW,e.TEXTURE_WRAP_T,e.REPEAT),e.samplerParameteri(this.mainSamplerPC,e.TEXTURE_MIN_FILTER,e.NEAREST_MIPMAP_NEAREST),e.samplerParameteri(this.mainSamplerPC,e.TEXTURE_MAG_FILTER,e.NEAREST),e.samplerParameteri(this.mainSamplerPC,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.samplerParameteri(this.mainSamplerPC,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}return(0,s.default)(t,[{key:"buildPositions",value:function(){for(var t=this.mesh_width,e=this.mesh_height,i=t+1,r=e+1,s=2/t,n=2/e,a=[],o=0;o<r;o++)for(var h=o*n-1,u=0;u<i;u++){var l=u*s-1;a.push(l,-h,0)}for(var f=[],c=0;c<e;c++)for(var m=0;m<t;m++){var g=m+i*c,d=m+i*(c+1),_=m+1+i*(c+1),v=m+1+i*c;f.push(g,d,v),f.push(d,_,v)}this.vertices=new Float32Array(a),this.indices=new Uint16Array(f)}},{key:"updateGlobals",value:function(t){this.texsizeX=t.texsizeX,this.texsizeY=t.texsizeY,this.aspectx=t.aspectx,this.aspecty=t.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.buildPositions()}},{key:"createShader",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=void 0,i=void 0;if(0===t.length)e="ret = texture(sampler_main, uv).rgb * decay;",i="";else{var r=a.default.getShaderParts(t);i=r[0],e=r[1]}e=n.default.replace(e,/texture2D/g,"texture"),e=n.default.replace(e,/texture3D/g,"texture"),this.shaderProgram=this.gl.createProgram();var s=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(s,"#version 300 es\n                                      precision "+this.floatPrecision+" float;\n                                      const vec2 halfmad = vec2(0.5);\n                                      in vec2 aPos;\n                                      in vec2 aWarpUv;\n                                      in vec4 aWarpColor;\n                                      out vec2 uv;\n                                      out vec2 uv_orig;\n                                      out vec4 vColor;\n                                      void main(void) {\n                                        gl_Position = vec4(aPos, 0.0, 1.0);\n                                        uv_orig = aPos * halfmad + halfmad;\n                                        uv = aWarpUv;\n                                        vColor = aWarpColor;\n                                      }"),this.gl.compileShader(s);var o=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(o,"#version 300 es\n                                      precision "+this.floatPrecision+" float;\n                                      precision highp int;\n                                      precision mediump sampler2D;\n                                      precision mediump sampler3D;\n\n                                      in vec2 uv;\n                                      in vec2 uv_orig;\n                                      in vec4 vColor;\n                                      out vec4 fragColor;\n                                      uniform sampler2D sampler_main;\n                                      uniform sampler2D sampler_fw_main;\n                                      uniform sampler2D sampler_fc_main;\n                                      uniform sampler2D sampler_pw_main;\n                                      uniform sampler2D sampler_pc_main;\n                                      uniform sampler2D sampler_blur1;\n                                      uniform sampler2D sampler_blur2;\n                                      uniform sampler2D sampler_blur3;\n                                      uniform sampler2D sampler_noise_lq;\n                                      uniform sampler2D sampler_noise_lq_lite;\n                                      uniform sampler2D sampler_noise_mq;\n                                      uniform sampler2D sampler_noise_hq;\n                                      uniform sampler3D sampler_noisevol_lq;\n                                      uniform sampler3D sampler_noisevol_hq;\n                                      uniform float time;\n                                      uniform float decay;\n                                      uniform vec2 resolution;\n                                      uniform vec4 aspect;\n                                      uniform vec4 texsize;\n                                      uniform vec4 texsize_noise_lq;\n                                      uniform vec4 texsize_noise_mq;\n                                      uniform vec4 texsize_noise_hq;\n                                      uniform vec4 texsize_noise_lq_lite;\n                                      uniform vec4 texsize_noisevol_lq;\n                                      uniform vec4 texsize_noisevol_hq;\n\n                                      uniform float bass;\n                                      uniform float mid;\n                                      uniform float treb;\n                                      uniform float vol;\n                                      uniform float bass_att;\n                                      uniform float mid_att;\n                                      uniform float treb_att;\n                                      uniform float vol_att;\n\n                                      uniform float frame;\n                                      uniform float fps;\n\n                                      uniform vec4 _qa;\n                                      uniform vec4 _qb;\n                                      uniform vec4 _qc;\n                                      uniform vec4 _qd;\n                                      uniform vec4 _qe;\n                                      uniform vec4 _qf;\n                                      uniform vec4 _qg;\n                                      uniform vec4 _qh;\n\n                                      #define q1 _qa.x\n                                      #define q2 _qa.y\n                                      #define q3 _qa.z\n                                      #define q4 _qa.w\n                                      #define q5 _qb.x\n                                      #define q6 _qb.y\n                                      #define q7 _qb.z\n                                      #define q8 _qb.w\n                                      #define q9 _qc.x\n                                      #define q10 _qc.y\n                                      #define q11 _qc.z\n                                      #define q12 _qc.w\n                                      #define q13 _qd.x\n                                      #define q14 _qd.y\n                                      #define q15 _qd.z\n                                      #define q16 _qd.w\n                                      #define q17 _qe.x\n                                      #define q18 _qe.y\n                                      #define q19 _qe.z\n                                      #define q20 _qe.w\n                                      #define q21 _qf.x\n                                      #define q22 _qf.y\n                                      #define q23 _qf.z\n                                      #define q24 _qf.w\n                                      #define q25 _qg.x\n                                      #define q26 _qg.y\n                                      #define q27 _qg.z\n                                      #define q28 _qg.w\n                                      #define q29 _qh.x\n                                      #define q30 _qh.y\n                                      #define q31 _qh.z\n                                      #define q32 _qh.w\n\n                                      uniform vec4 slow_roam_cos;\n                                      uniform vec4 roam_cos;\n                                      uniform vec4 slow_roam_sin;\n                                      uniform vec4 roam_sin;\n\n                                      uniform float blur1_min;\n                                      uniform float blur1_max;\n                                      uniform float blur2_min;\n                                      uniform float blur2_max;\n                                      uniform float blur3_min;\n                                      uniform float blur3_max;\n\n                                      uniform float scale1;\n                                      uniform float scale2;\n                                      uniform float scale3;\n                                      uniform float bias1;\n                                      uniform float bias2;\n                                      uniform float bias3;\n\n                                      uniform vec4 rand_frame;\n                                      uniform vec4 rand_preset;\n\n                                      float PI = 3.14159265358979323846264;\n\n                                      "+i+"\n\n                                      void main(void) {\n                                        vec3 ret;\n                                        float rad = length(uv_orig - 0.5);\n                                        float ang = atan(uv_orig.x - 0.5, uv_orig.y - 0.5);\n\n                                        "+e+"\n\n                                        fragColor = vec4(ret, 1.0) * vColor;\n                                      }"),this.gl.compileShader(o),this.gl.attachShader(this.shaderProgram,s),this.gl.attachShader(this.shaderProgram,o),this.gl.linkProgram(this.shaderProgram),this.positionLocation=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.warpUvLocation=this.gl.getAttribLocation(this.shaderProgram,"aWarpUv"),this.warpColorLocation=this.gl.getAttribLocation(this.shaderProgram,"aWarpColor"),this.textureLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_main"),this.textureFWLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_fw_main"),this.textureFCLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_fc_main"),this.texturePWLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_pw_main"),this.texturePCLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_pc_main"),this.blurTexture1Loc=this.gl.getUniformLocation(this.shaderProgram,"sampler_blur1"),this.blurTexture2Loc=this.gl.getUniformLocation(this.shaderProgram,"sampler_blur2"),this.blurTexture3Loc=this.gl.getUniformLocation(this.shaderProgram,"sampler_blur3"),this.noiseLQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noise_lq"),this.noiseMQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noise_mq"),this.noiseHQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noise_hq"),this.noiseLQLiteLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noise_lq_lite"),this.noiseVolLQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noisevol_lq"),this.noiseVolHQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noisevol_hq"),this.decayLoc=this.gl.getUniformLocation(this.shaderProgram,"decay"),this.texsizeLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize"),this.texsizeNoiseLQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noise_lq"),this.texsizeNoiseMQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noise_mq"),this.texsizeNoiseHQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noise_hq"),this.texsizeNoiseLQLiteLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noise_lq_lite"),this.texsizeNoiseVolLQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noisevol_lq"),this.texsizeNoiseVolHQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noisevol_hq"),this.resolutionLoc=this.gl.getUniformLocation(this.shaderProgram,"resolution"),this.aspectLoc=this.gl.getUniformLocation(this.shaderProgram,"aspect"),this.bassLoc=this.gl.getUniformLocation(this.shaderProgram,"bass"),this.midLoc=this.gl.getUniformLocation(this.shaderProgram,"mid"),this.trebLoc=this.gl.getUniformLocation(this.shaderProgram,"treb"),this.volLoc=this.gl.getUniformLocation(this.shaderProgram,"vol"),this.bassAttLoc=this.gl.getUniformLocation(this.shaderProgram,"bass_att"),this.midAttLoc=this.gl.getUniformLocation(this.shaderProgram,"mid_att"),this.trebAttLoc=this.gl.getUniformLocation(this.shaderProgram,"treb_att"),this.volAttLoc=this.gl.getUniformLocation(this.shaderProgram,"vol_att"),this.timeLoc=this.gl.getUniformLocation(this.shaderProgram,"time"),this.frameLoc=this.gl.getUniformLocation(this.shaderProgram,"frame"),this.fpsLoc=this.gl.getUniformLocation(this.shaderProgram,"fps"),this.blur1MinLoc=this.gl.getUniformLocation(this.shaderProgram,"blur1_min"),this.blur1MaxLoc=this.gl.getUniformLocation(this.shaderProgram,"blur1_max"),this.blur2MinLoc=this.gl.getUniformLocation(this.shaderProgram,"blur2_min"),this.blur2MaxLoc=this.gl.getUniformLocation(this.shaderProgram,"blur2_max"),this.blur3MinLoc=this.gl.getUniformLocation(this.shaderProgram,"blur3_min"),this.blur3MaxLoc=this.gl.getUniformLocation(this.shaderProgram,"blur3_max"),this.scale1Loc=this.gl.getUniformLocation(this.shaderProgram,"scale1"),this.scale2Loc=this.gl.getUniformLocation(this.shaderProgram,"scale2"),this.scale3Loc=this.gl.getUniformLocation(this.shaderProgram,"scale3"),this.bias1Loc=this.gl.getUniformLocation(this.shaderProgram,"bias1"),this.bias2Loc=this.gl.getUniformLocation(this.shaderProgram,"bias2"),this.bias3Loc=this.gl.getUniformLocation(this.shaderProgram,"bias3"),this.randPresetLoc=this.gl.getUniformLocation(this.shaderProgram,"rand_preset"),this.randFrameLoc=this.gl.getUniformLocation(this.shaderProgram,"rand_frame"),this.qaLoc=this.gl.getUniformLocation(this.shaderProgram,"_qa"),this.qbLoc=this.gl.getUniformLocation(this.shaderProgram,"_qb"),this.qcLoc=this.gl.getUniformLocation(this.shaderProgram,"_qc"),this.qdLoc=this.gl.getUniformLocation(this.shaderProgram,"_qd"),this.qeLoc=this.gl.getUniformLocation(this.shaderProgram,"_qe"),this.qfLoc=this.gl.getUniformLocation(this.shaderProgram,"_qf"),this.qgLoc=this.gl.getUniformLocation(this.shaderProgram,"_qg"),this.qhLoc=this.gl.getUniformLocation(this.shaderProgram,"_qh"),this.slowRoamCosLoc=this.gl.getUniformLocation(this.shaderProgram,"slow_roam_cos"),this.roamCosLoc=this.gl.getUniformLocation(this.shaderProgram,"roam_cos"),this.slowRoamSinLoc=this.gl.getUniformLocation(this.shaderProgram,"slow_roam_sin"),this.roamSinLoc=this.gl.getUniformLocation(this.shaderProgram,"roam_sin")}},{key:"updateShader",value:function(t){this.createShader(t)}},{key:"bindBlurVals",value:function(t){var e=t.b1n||0,i=t.b2n||0,r=t.b3n||0,s=t.b1x||1,n=t.b2x||1,a=t.b3x||1;if(s-e<.1){var o=.5*(e+s);e=o-.05,s=o+.05}if((n=Math.min(s,n))-(i=Math.max(e,i))<.1){var h=.5*(i+n);i=h-.05,n=h+.05}if((a=Math.min(n,a))-(r=Math.max(i,r))<.1){var u=.5*(r+a);r=u-.05,a=u+.05}var l=s-e,f=e,c=n-i,m=i,g=a-r,d=r;this.gl.uniform1f(this.blur1MinLoc,e),this.gl.uniform1f(this.blur1MaxLoc,s),this.gl.uniform1f(this.blur2MinLoc,i),this.gl.uniform1f(this.blur2MaxLoc,n),this.gl.uniform1f(this.blur3MinLoc,r),this.gl.uniform1f(this.blur3MaxLoc,a),this.gl.uniform1f(this.scale1Loc,l),this.gl.uniform1f(this.scale2Loc,c),this.gl.uniform1f(this.scale3Loc,g),this.gl.uniform1f(this.bias1Loc,f),this.gl.uniform1f(this.bias2Loc,m),this.gl.uniform1f(this.bias3Loc,d)}},{key:"renderQuadTexture",value:function(t,e,i,r,s,n,a,o){this.gl.useProgram(this.shaderProgram),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.indexBuf),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.indices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertices,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.positionLocation,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.positionLocation),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.warpUvVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,a,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.warpUvLocation,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.warpUvLocation),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.warpColorVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.warpColorLocation,4,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.warpColorLocation);var h=n.wrap>0?this.gl.REPEAT:this.gl.CLAMP_TO_EDGE;this.gl.samplerParameteri(this.mainSampler,this.gl.TEXTURE_WRAP_S,h),this.gl.samplerParameteri(this.mainSampler,this.gl.TEXTURE_WRAP_T,h),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(0,this.mainSampler),this.gl.uniform1i(this.textureLoc,0),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(1,this.mainSamplerFW),this.gl.uniform1i(this.textureFWLoc,1),this.gl.activeTexture(this.gl.TEXTURE2),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(2,this.mainSamplerFC),this.gl.uniform1i(this.textureFCLoc,2),this.gl.activeTexture(this.gl.TEXTURE3),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(3,this.mainSamplerPW),this.gl.uniform1i(this.texturePWLoc,3),this.gl.activeTexture(this.gl.TEXTURE4),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(4,this.mainSamplerPC),this.gl.uniform1i(this.texturePCLoc,4),this.gl.activeTexture(this.gl.TEXTURE5),this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.uniform1i(this.blurTexture1Loc,5),this.gl.activeTexture(this.gl.TEXTURE6),this.gl.bindTexture(this.gl.TEXTURE_2D,r),this.gl.uniform1i(this.blurTexture2Loc,6),this.gl.activeTexture(this.gl.TEXTURE7),this.gl.bindTexture(this.gl.TEXTURE_2D,s),this.gl.uniform1i(this.blurTexture3Loc,7),this.gl.activeTexture(this.gl.TEXTURE8),this.gl.bindTexture(this.gl.TEXTURE_2D,this.noise.noiseTexLQ),this.gl.uniform1i(this.noiseLQLoc,8),this.gl.activeTexture(this.gl.TEXTURE9),this.gl.bindTexture(this.gl.TEXTURE_2D,this.noise.noiseTexMQ),this.gl.uniform1i(this.noiseMQLoc,9),this.gl.activeTexture(this.gl.TEXTURE10),this.gl.bindTexture(this.gl.TEXTURE_2D,this.noise.noiseTexHQ),this.gl.uniform1i(this.noiseHQLoc,10),this.gl.activeTexture(this.gl.TEXTURE11),this.gl.bindTexture(this.gl.TEXTURE_2D,this.noise.noiseTexLQLite),this.gl.uniform1i(this.noiseLQLiteLoc,11),this.gl.activeTexture(this.gl.TEXTURE12),this.gl.bindTexture(this.gl.TEXTURE_3D,this.noise.noiseTexVolLQ),this.gl.uniform1i(this.noiseVolLQLoc,12),this.gl.activeTexture(this.gl.TEXTURE13),this.gl.bindTexture(this.gl.TEXTURE_3D,this.noise.noiseTexVolHQ),this.gl.uniform1i(this.noiseVolHQLoc,13),this.gl.uniform1f(this.decayLoc,n.decay),this.gl.uniform2fv(this.resolutionLoc,[this.texsizeX,this.texsizeY]),this.gl.uniform4fv(this.aspectLoc,[this.aspectx,this.aspecty,this.invAspectx,this.invAspecty]),this.gl.uniform4fv(this.texsizeLoc,[this.texsizeX,this.texsizeY,1/this.texsizeX,1/this.texsizeY]),this.gl.uniform4fv(this.texsizeNoiseLQLoc,[256,256,1/256,1/256]),this.gl.uniform4fv(this.texsizeNoiseMQLoc,[256,256,1/256,1/256]),this.gl.uniform4fv(this.texsizeNoiseHQLoc,[256,256,1/256,1/256]),this.gl.uniform4fv(this.texsizeNoiseLQLiteLoc,[32,32,1/32,1/32]),this.gl.uniform4fv(this.texsizeNoiseVolLQLoc,[32,32,1/32,1/32]),this.gl.uniform4fv(this.texsizeNoiseVolHQLoc,[32,32,1/32,1/32]),this.gl.uniform1f(this.bassLoc,n.bass),this.gl.uniform1f(this.midLoc,n.mid),this.gl.uniform1f(this.trebLoc,n.treb),this.gl.uniform1f(this.volLoc,(n.bass+n.mid+n.treb)/3),this.gl.uniform1f(this.bassAttLoc,n.bass_att),this.gl.uniform1f(this.midAttLoc,n.mid_att),this.gl.uniform1f(this.trebAttLoc,n.treb_att),this.gl.uniform1f(this.volAttLoc,(n.bass_att+n.mid_att+n.treb_att)/3),this.gl.uniform1f(this.timeLoc,n.time),this.gl.uniform1f(this.frameLoc,n.frame),this.gl.uniform1f(this.fpsLoc,n.fps),this.gl.uniform4fv(this.randPresetLoc,n.rand_preset),this.gl.uniform4fv(this.randFrameLoc,new Float32Array([Math.random(),Math.random(),Math.random(),Math.random()])),this.gl.uniform4fv(this.qaLoc,new Float32Array([n.q1||0,n.q2||0,n.q3||0,n.q4||0])),this.gl.uniform4fv(this.qbLoc,new Float32Array([n.q5||0,n.q6||0,n.q7||0,n.q8||0])),this.gl.uniform4fv(this.qcLoc,new Float32Array([n.q9||0,n.q10||0,n.q11||0,n.q12||0])),this.gl.uniform4fv(this.qdLoc,new Float32Array([n.q13||0,n.q14||0,n.q15||0,n.q16||0])),this.gl.uniform4fv(this.qeLoc,new Float32Array([n.q17||0,n.q18||0,n.q19||0,n.q20||0])),this.gl.uniform4fv(this.qfLoc,new Float32Array([n.q21||0,n.q22||0,n.q23||0,n.q24||0])),this.gl.uniform4fv(this.qgLoc,new Float32Array([n.q25||0,n.q26||0,n.q27||0,n.q28||0])),this.gl.uniform4fv(this.qhLoc,new Float32Array([n.q29||0,n.q30||0,n.q31||0,n.q32||0])),this.gl.uniform4fv(this.slowRoamCosLoc,[.5+.5*Math.cos(.005*n.time),.5+.5*Math.cos(.008*n.time),.5+.5*Math.cos(.013*n.time),.5+.5*Math.cos(.022*n.time)]),this.gl.uniform4fv(this.roamCosLoc,[.5+.5*Math.cos(.3*n.time),.5+.5*Math.cos(1.3*n.time),.5+.5*Math.cos(5*n.time),.5+.5*Math.cos(20*n.time)]),this.gl.uniform4fv(this.slowRoamSinLoc,[.5+.5*Math.sin(.005*n.time),.5+.5*Math.sin(.008*n.time),.5+.5*Math.sin(.013*n.time),.5+.5*Math.sin(.022*n.time)]),this.gl.uniform4fv(this.roamSinLoc,[.5+.5*Math.sin(.3*n.time),.5+.5*Math.sin(1.3*n.time),.5+.5*Math.sin(5*n.time),.5+.5*Math.sin(20*n.time)]),this.bindBlurVals(n),t?this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA):this.gl.disable(this.gl.BLEND),this.gl.drawElements(this.gl.TRIANGLES,this.indices.length,this.gl.UNSIGNED_SHORT,0),t||this.gl.enable(this.gl.BLEND)}}]),t}();e.default=h,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(i(0)),s=o(i(1)),n=o(i(3)),a=o(i(2));function o(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e,i){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,r.default)(this,t),this.gl=e,this.noise=i,this.texsizeX=s.texsizeX,this.texsizeY=s.texsizeY,this.aspectx=s.aspectx,this.aspecty=s.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.buildPositions(),this.indexBuf=e.createBuffer(),this.positionVertexBuf=this.gl.createBuffer(),this.compColorVertexBuf=this.gl.createBuffer(),this.floatPrecision=a.default.getFragmentFloatPrecision(this.gl),this.createShader(),this.mainSampler=this.gl.createSampler(),this.mainSamplerFW=this.gl.createSampler(),this.mainSamplerFC=this.gl.createSampler(),this.mainSamplerPW=this.gl.createSampler(),this.mainSamplerPC=this.gl.createSampler(),e.samplerParameteri(this.mainSampler,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.samplerParameteri(this.mainSampler,e.TEXTURE_MAG_FILTER,e.LINEAR),e.samplerParameteri(this.mainSampler,e.TEXTURE_WRAP_S,e.REPEAT),e.samplerParameteri(this.mainSampler,e.TEXTURE_WRAP_T,e.REPEAT),e.samplerParameteri(this.mainSamplerFW,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.samplerParameteri(this.mainSamplerFW,e.TEXTURE_MAG_FILTER,e.LINEAR),e.samplerParameteri(this.mainSamplerFW,e.TEXTURE_WRAP_S,e.REPEAT),e.samplerParameteri(this.mainSamplerFW,e.TEXTURE_WRAP_T,e.REPEAT),e.samplerParameteri(this.mainSamplerFC,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_LINEAR),e.samplerParameteri(this.mainSamplerFC,e.TEXTURE_MAG_FILTER,e.LINEAR),e.samplerParameteri(this.mainSamplerFC,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.samplerParameteri(this.mainSamplerFC,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.samplerParameteri(this.mainSamplerPW,e.TEXTURE_MIN_FILTER,e.NEAREST_MIPMAP_NEAREST),e.samplerParameteri(this.mainSamplerPW,e.TEXTURE_MAG_FILTER,e.NEAREST),e.samplerParameteri(this.mainSamplerPW,e.TEXTURE_WRAP_S,e.REPEAT),e.samplerParameteri(this.mainSamplerPW,e.TEXTURE_WRAP_T,e.REPEAT),e.samplerParameteri(this.mainSamplerPC,e.TEXTURE_MIN_FILTER,e.NEAREST),e.samplerParameteri(this.mainSamplerPC,e.TEXTURE_MAG_FILTER,e.NEAREST),e.samplerParameteri(this.mainSamplerPC,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.samplerParameteri(this.mainSamplerPC,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}return(0,s.default)(t,[{key:"buildPositions",value:function(){for(var t=[],e=0;e<25;e++)for(var i=e*(2/24)-1,r=0;r<33;r++){var s=r*(2/32)-1;t.push(s,-i,0)}for(var n=[],a=0;a<24;a++)for(var o=0;o<32;o++){var h=o+33*a,u=o+33*(a+1),l=o+1+33*(a+1),f=o+1+33*a;n.push(h,u,f),n.push(u,l,f)}this.vertices=new Float32Array(t),this.indices=new Uint16Array(n)}},{key:"updateGlobals",value:function(t){this.texsizeX=t.texsizeX,this.texsizeY=t.texsizeY,this.aspectx=t.aspectx,this.aspecty=t.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.buildPositions()}},{key:"createShader",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=void 0,i=void 0;if(0===t.length)e="float orient_horiz = mod(echo_orientation, 2.0);\n                        float orient_x = (orient_horiz > 0.0) ? -1.0 : 1.0;\n                        float orient_y = (echo_orientation >= 2.0) ? -1.0 : 1.0;\n                        vec2 uv_echo = ((uv - 0.5) *\n                                        (1.0 / echo_zoom) *\n                                        vec2(orient_x, orient_y)) + 0.5;\n\n                        ret = mix(texture(sampler_main, uv).rgb,\n                                  texture(sampler_main, uv_echo).rgb,\n                                  echo_alpha);\n\n                        ret *= gammaAdj;\n\n                        if(fShader >= 1.0) {\n                          ret *= hue_shader;\n                        } else if(fShader > 0.001) {\n                          ret *= (1.0 - fShader) + (fShader * hue_shader);\n                        }\n\n                        if(brighten > 0) ret = sqrt(ret);\n                        if(darken > 0) ret = ret*ret;\n                        if(solarize > 0) ret = ret * (1.0 - ret) * 4.0;\n                        if(invert > 0) ret = 1.0 - ret;",i="";else{var r=a.default.getShaderParts(t);i=r[0],e=r[1]}e=n.default.replace(e,/texture2D/g,"texture"),e=n.default.replace(e,/texture3D/g,"texture"),this.shaderProgram=this.gl.createProgram();var s=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(s,"#version 300 es\n                                      const vec2 halfmad = vec2(0.5);\n                                      in vec2 aPos;\n                                      in vec4 aCompColor;\n                                      out vec2 vUv;\n                                      out vec4 vColor;\n                                      void main(void) {\n                                        gl_Position = vec4(aPos, 0.0, 1.0);\n                                        vUv = aPos * halfmad + halfmad;\n                                        vColor = aCompColor;\n                                      }"),this.gl.compileShader(s);var o=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(o,"#version 300 es\n                                      precision "+this.floatPrecision+" float;\n                                      precision highp int;\n                                      precision mediump sampler2D;\n                                      precision mediump sampler3D;\n\n                                      vec3 lum(vec3 v){\n                                          return vec3(dot(v, vec3(0.32,0.49,0.29)));\n                                      }\n\n                                      vec3 calc_hue(vec3 hue_base[ 4 ], vec2 uv) {\n                                          vec3 tA = mix( hue_base[0], hue_base[1], uv.x );\n                                          vec3 tB = mix( hue_base[2], hue_base[3], uv.x );\n                                          return mix( tA, tB, uv.y );\n                                      }\n\n                                      in vec2 vUv;\n                                      in vec4 vColor;\n                                      out vec4 fragColor;\n                                      uniform sampler2D sampler_main;\n                                      uniform sampler2D sampler_fw_main;\n                                      uniform sampler2D sampler_fc_main;\n                                      uniform sampler2D sampler_pw_main;\n                                      uniform sampler2D sampler_pc_main;\n                                      uniform sampler2D sampler_blur1;\n                                      uniform sampler2D sampler_blur2;\n                                      uniform sampler2D sampler_blur3;\n                                      uniform sampler2D sampler_noise_lq;\n                                      uniform sampler2D sampler_noise_lq_lite;\n                                      uniform sampler2D sampler_noise_mq;\n                                      uniform sampler2D sampler_noise_hq;\n                                      uniform sampler3D sampler_noisevol_lq;\n                                      uniform sampler3D sampler_noisevol_hq;\n\n                                      uniform float time;\n                                      uniform float gammaAdj;\n                                      uniform float echo_zoom;\n                                      uniform float echo_alpha;\n                                      uniform float echo_orientation;\n                                      uniform int invert;\n                                      uniform int brighten;\n                                      uniform int darken;\n                                      uniform int solarize;\n                                      uniform vec2 resolution;\n                                      uniform vec4 aspect;\n                                      uniform vec4 texsize;\n                                      uniform vec4 texsize_noise_lq;\n                                      uniform vec4 texsize_noise_mq;\n                                      uniform vec4 texsize_noise_hq;\n                                      uniform vec4 texsize_noise_lq_lite;\n                                      uniform vec4 texsize_noisevol_lq;\n                                      uniform vec4 texsize_noisevol_hq;\n\n                                      uniform float bass;\n                                      uniform float mid;\n                                      uniform float treb;\n                                      uniform float vol;\n                                      uniform float bass_att;\n                                      uniform float mid_att;\n                                      uniform float treb_att;\n                                      uniform float vol_att;\n\n                                      uniform float frame;\n                                      uniform float fps;\n\n                                      uniform vec4 _qa;\n                                      uniform vec4 _qb;\n                                      uniform vec4 _qc;\n                                      uniform vec4 _qd;\n                                      uniform vec4 _qe;\n                                      uniform vec4 _qf;\n                                      uniform vec4 _qg;\n                                      uniform vec4 _qh;\n\n                                      #define q1 _qa.x\n                                      #define q2 _qa.y\n                                      #define q3 _qa.z\n                                      #define q4 _qa.w\n                                      #define q5 _qb.x\n                                      #define q6 _qb.y\n                                      #define q7 _qb.z\n                                      #define q8 _qb.w\n                                      #define q9 _qc.x\n                                      #define q10 _qc.y\n                                      #define q11 _qc.z\n                                      #define q12 _qc.w\n                                      #define q13 _qd.x\n                                      #define q14 _qd.y\n                                      #define q15 _qd.z\n                                      #define q16 _qd.w\n                                      #define q17 _qe.x\n                                      #define q18 _qe.y\n                                      #define q19 _qe.z\n                                      #define q20 _qe.w\n                                      #define q21 _qf.x\n                                      #define q22 _qf.y\n                                      #define q23 _qf.z\n                                      #define q24 _qf.w\n                                      #define q25 _qg.x\n                                      #define q26 _qg.y\n                                      #define q27 _qg.z\n                                      #define q28 _qg.w\n                                      #define q29 _qh.x\n                                      #define q30 _qh.y\n                                      #define q31 _qh.z\n                                      #define q32 _qh.w\n\n                                      uniform vec4 slow_roam_cos;\n                                      uniform vec4 roam_cos;\n                                      uniform vec4 slow_roam_sin;\n                                      uniform vec4 roam_sin;\n\n                                      uniform float blur1_min;\n                                      uniform float blur1_max;\n                                      uniform float blur2_min;\n                                      uniform float blur2_max;\n                                      uniform float blur3_min;\n                                      uniform float blur3_max;\n\n                                      uniform float scale1;\n                                      uniform float scale2;\n                                      uniform float scale3;\n                                      uniform float bias1;\n                                      uniform float bias2;\n                                      uniform float bias3;\n\n                                      uniform vec4 rand_frame;\n                                      uniform vec4 rand_preset;\n\n                                      uniform vec3 hue_base[ 4 ];\n                                      uniform float fShader;\n\n                                      float PI = 3.14159265358979323846264;\n\n                                      "+i+"\n\n                                      void main(void) {\n                                        vec3 ret;\n                                        vec2 uv = vUv;\n                                        vec2 uv_orig = vUv;\n                                        uv.y = 1.0 - uv.y;\n                                        uv_orig.y = 1.0 - uv_orig.y;\n                                        float rad = length(uv - 0.5);\n                                        float ang = atan(uv.x - 0.5, uv.y - 0.5);\n                                        vec3 hue_shader = calc_hue(hue_base, uv);\n\n                                        "+e+"\n\n                                        fragColor = vec4(ret, 1.0) * vColor;\n                                      }"),this.gl.compileShader(o),this.gl.attachShader(this.shaderProgram,s),this.gl.attachShader(this.shaderProgram,o),this.gl.linkProgram(this.shaderProgram),this.positionLocation=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.compColorLocation=this.gl.getAttribLocation(this.shaderProgram,"aCompColor"),this.textureLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_main"),this.textureFWLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_fw_main"),this.textureFCLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_fc_main"),this.texturePWLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_pw_main"),this.texturePCLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_pc_main"),this.blurTexture1Loc=this.gl.getUniformLocation(this.shaderProgram,"sampler_blur1"),this.blurTexture2Loc=this.gl.getUniformLocation(this.shaderProgram,"sampler_blur2"),this.blurTexture3Loc=this.gl.getUniformLocation(this.shaderProgram,"sampler_blur3"),this.noiseLQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noise_lq"),this.noiseMQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noise_mq"),this.noiseHQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noise_hq"),this.noiseLQLiteLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noise_lq_lite"),this.noiseVolLQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noisevol_lq"),this.noiseVolHQLoc=this.gl.getUniformLocation(this.shaderProgram,"sampler_noisevol_hq"),this.timeLoc=this.gl.getUniformLocation(this.shaderProgram,"time"),this.gammaAdjLoc=this.gl.getUniformLocation(this.shaderProgram,"gammaAdj"),this.echoZoomLoc=this.gl.getUniformLocation(this.shaderProgram,"echo_zoom"),this.echoAlphaLoc=this.gl.getUniformLocation(this.shaderProgram,"echo_alpha"),this.echoOrientationLoc=this.gl.getUniformLocation(this.shaderProgram,"echo_orientation"),this.invertLoc=this.gl.getUniformLocation(this.shaderProgram,"invert"),this.brightenLoc=this.gl.getUniformLocation(this.shaderProgram,"brighten"),this.darkenLoc=this.gl.getUniformLocation(this.shaderProgram,"darken"),this.solarizeLoc=this.gl.getUniformLocation(this.shaderProgram,"solarize"),this.texsizeLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize"),this.texsizeNoiseLQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noise_lq"),this.texsizeNoiseMQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noise_mq"),this.texsizeNoiseHQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noise_hq"),this.texsizeNoiseLQLiteLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noise_lq_lite"),this.texsizeNoiseVolLQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noisevol_lq"),this.texsizeNoiseVolHQLoc=this.gl.getUniformLocation(this.shaderProgram,"texsize_noisevol_hq"),this.resolutionLoc=this.gl.getUniformLocation(this.shaderProgram,"resolution"),this.aspectLoc=this.gl.getUniformLocation(this.shaderProgram,"aspect"),this.bassLoc=this.gl.getUniformLocation(this.shaderProgram,"bass"),this.midLoc=this.gl.getUniformLocation(this.shaderProgram,"mid"),this.trebLoc=this.gl.getUniformLocation(this.shaderProgram,"treb"),this.volLoc=this.gl.getUniformLocation(this.shaderProgram,"vol"),this.bassAttLoc=this.gl.getUniformLocation(this.shaderProgram,"bass_att"),this.midAttLoc=this.gl.getUniformLocation(this.shaderProgram,"mid_att"),this.trebAttLoc=this.gl.getUniformLocation(this.shaderProgram,"treb_att"),this.volAttLoc=this.gl.getUniformLocation(this.shaderProgram,"vol_att"),this.frameLoc=this.gl.getUniformLocation(this.shaderProgram,"frame"),this.fpsLoc=this.gl.getUniformLocation(this.shaderProgram,"fps"),this.blur1MinLoc=this.gl.getUniformLocation(this.shaderProgram,"blur1_min"),this.blur1MaxLoc=this.gl.getUniformLocation(this.shaderProgram,"blur1_max"),this.blur2MinLoc=this.gl.getUniformLocation(this.shaderProgram,"blur2_min"),this.blur2MaxLoc=this.gl.getUniformLocation(this.shaderProgram,"blur2_max"),this.blur3MinLoc=this.gl.getUniformLocation(this.shaderProgram,"blur3_min"),this.blur3MaxLoc=this.gl.getUniformLocation(this.shaderProgram,"blur3_max"),this.scale1Loc=this.gl.getUniformLocation(this.shaderProgram,"scale1"),this.scale2Loc=this.gl.getUniformLocation(this.shaderProgram,"scale2"),this.scale3Loc=this.gl.getUniformLocation(this.shaderProgram,"scale3"),this.bias1Loc=this.gl.getUniformLocation(this.shaderProgram,"bias1"),this.bias2Loc=this.gl.getUniformLocation(this.shaderProgram,"bias2"),this.bias3Loc=this.gl.getUniformLocation(this.shaderProgram,"bias3"),this.randPresetLoc=this.gl.getUniformLocation(this.shaderProgram,"rand_preset"),this.randFrameLoc=this.gl.getUniformLocation(this.shaderProgram,"rand_frame"),this.hueBaseLoc=this.gl.getUniformLocation(this.shaderProgram,"hue_base[0]"),this.fShaderLoc=this.gl.getUniformLocation(this.shaderProgram,"fShader"),this.qaLoc=this.gl.getUniformLocation(this.shaderProgram,"_qa"),this.qbLoc=this.gl.getUniformLocation(this.shaderProgram,"_qb"),this.qcLoc=this.gl.getUniformLocation(this.shaderProgram,"_qc"),this.qdLoc=this.gl.getUniformLocation(this.shaderProgram,"_qd"),this.qeLoc=this.gl.getUniformLocation(this.shaderProgram,"_qe"),this.qfLoc=this.gl.getUniformLocation(this.shaderProgram,"_qf"),this.qgLoc=this.gl.getUniformLocation(this.shaderProgram,"_qg"),this.qhLoc=this.gl.getUniformLocation(this.shaderProgram,"_qh"),this.slowRoamCosLoc=this.gl.getUniformLocation(this.shaderProgram,"slow_roam_cos"),this.roamCosLoc=this.gl.getUniformLocation(this.shaderProgram,"roam_cos"),this.slowRoamSinLoc=this.gl.getUniformLocation(this.shaderProgram,"slow_roam_sin"),this.roamSinLoc=this.gl.getUniformLocation(this.shaderProgram,"roam_sin")}},{key:"updateShader",value:function(t){this.createShader(t)}},{key:"bindBlurVals",value:function(t){var e=t.b1n||0,i=t.b2n||0,r=t.b3n||0,s=t.b1x||1,n=t.b2x||1,a=t.b3x||1;if(s-e<.1){var o=.5*(e+s);e=o-.05,s=o+.05}if((n=Math.min(s,n))-(i=Math.max(e,i))<.1){var h=.5*(i+n);i=h-.05,n=h+.05}if((a=Math.min(n,a))-(r=Math.max(i,r))<.1){var u=.5*(r+a);r=u-.05,a=u+.05}var l=s-e,f=e,c=n-i,m=i,g=a-r,d=r;this.gl.uniform1f(this.blur1MinLoc,e),this.gl.uniform1f(this.blur1MaxLoc,s),this.gl.uniform1f(this.blur2MinLoc,i),this.gl.uniform1f(this.blur2MaxLoc,n),this.gl.uniform1f(this.blur3MinLoc,r),this.gl.uniform1f(this.blur3MaxLoc,a),this.gl.uniform1f(this.scale1Loc,l),this.gl.uniform1f(this.scale2Loc,c),this.gl.uniform1f(this.scale3Loc,g),this.gl.uniform1f(this.bias1Loc,f),this.gl.uniform1f(this.bias2Loc,m),this.gl.uniform1f(this.bias3Loc,d)}},{key:"generateHueBase",value:function(t){this.hue_base=new Float32Array([1,1,1,1,1,1,1,1,1,1,1,1]);for(var e=0;e<4;e++){this.hue_base[3*e+0]=.6+.3*Math.sin(30*t.time*.0143+3+21*e+t.rand_start[3]),this.hue_base[3*e+1]=.6+.3*Math.sin(30*t.time*.0107+1+13*e+t.rand_start[1]),this.hue_base[3*e+2]=.6+.3*Math.sin(30*t.time*.0129+6+9*e+t.rand_start[2]);for(var i=Math.max(this.hue_base[3*e],this.hue_base[3*e+1],this.hue_base[3*e+2]),r=0;r<3;r++)this.hue_base[3*e+r]=this.hue_base[3*e+r]/i,this.hue_base[3*e+r]=.5+.5*this.hue_base[3*e+r]}}},{key:"renderQuadTexture",value:function(t,e,i,r,s,n,a){this.generateHueBase(n),this.gl.useProgram(this.shaderProgram),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.indexBuf),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.indices,this.gl.STATIC_DRAW),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.positionVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertices,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.positionLocation,3,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.positionLocation),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.compColorVertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,a,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.compColorLocation,4,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.compColorLocation);var o=n.wrap>0?this.gl.REPEAT:this.gl.CLAMP_TO_EDGE;this.gl.samplerParameteri(this.mainSampler,this.gl.TEXTURE_WRAP_S,o),this.gl.samplerParameteri(this.mainSampler,this.gl.TEXTURE_WRAP_T,o),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(0,this.mainSampler),this.gl.uniform1i(this.textureLoc,0),this.gl.activeTexture(this.gl.TEXTURE1),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(1,this.mainSamplerFW),this.gl.uniform1i(this.textureFWLoc,1),this.gl.activeTexture(this.gl.TEXTURE2),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(2,this.mainSamplerFC),this.gl.uniform1i(this.textureFCLoc,2),this.gl.activeTexture(this.gl.TEXTURE3),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(3,this.mainSamplerPW),this.gl.uniform1i(this.texturePWLoc,3),this.gl.activeTexture(this.gl.TEXTURE4),this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.bindSampler(4,this.mainSamplerPC),this.gl.uniform1i(this.texturePCLoc,4),this.gl.activeTexture(this.gl.TEXTURE5),this.gl.bindTexture(this.gl.TEXTURE_2D,i),this.gl.uniform1i(this.blurTexture1Loc,5),this.gl.activeTexture(this.gl.TEXTURE6),this.gl.bindTexture(this.gl.TEXTURE_2D,r),this.gl.uniform1i(this.blurTexture2Loc,6),this.gl.activeTexture(this.gl.TEXTURE7),this.gl.bindTexture(this.gl.TEXTURE_2D,s),this.gl.uniform1i(this.blurTexture3Loc,7),this.gl.activeTexture(this.gl.TEXTURE8),this.gl.bindTexture(this.gl.TEXTURE_2D,this.noise.noiseTexLQ),this.gl.uniform1i(this.noiseLQLoc,8),this.gl.activeTexture(this.gl.TEXTURE9),this.gl.bindTexture(this.gl.TEXTURE_2D,this.noise.noiseTexMQ),this.gl.uniform1i(this.noiseMQLoc,9),this.gl.activeTexture(this.gl.TEXTURE10),this.gl.bindTexture(this.gl.TEXTURE_2D,this.noise.noiseTexHQ),this.gl.uniform1i(this.noiseHQLoc,10),this.gl.activeTexture(this.gl.TEXTURE11),this.gl.bindTexture(this.gl.TEXTURE_2D,this.noise.noiseTexLQLite),this.gl.uniform1i(this.noiseLQLiteLoc,11),this.gl.activeTexture(this.gl.TEXTURE12),this.gl.bindTexture(this.gl.TEXTURE_3D,this.noise.noiseTexVolLQ),this.gl.uniform1i(this.noiseVolLQLoc,12),this.gl.activeTexture(this.gl.TEXTURE13),this.gl.bindTexture(this.gl.TEXTURE_3D,this.noise.noiseTexVolHQ),this.gl.uniform1i(this.noiseVolHQLoc,13),this.gl.uniform1f(this.timeLoc,n.time),this.gl.uniform1f(this.gammaAdjLoc,n.gammaadj),this.gl.uniform1f(this.echoZoomLoc,n.echo_zoom),this.gl.uniform1f(this.echoAlphaLoc,n.echo_alpha),this.gl.uniform1f(this.echoOrientationLoc,n.echo_orient),this.gl.uniform1i(this.invertLoc,n.invert),this.gl.uniform1i(this.brightenLoc,n.brighten),this.gl.uniform1i(this.darkenLoc,n.darken),this.gl.uniform1i(this.solarizeLoc,n.solarize),this.gl.uniform2fv(this.resolutionLoc,[this.texsizeX,this.texsizeY]),this.gl.uniform4fv(this.aspectLoc,[this.aspectx,this.aspecty,this.invAspectx,this.invAspecty]),this.gl.uniform4fv(this.texsizeLoc,new Float32Array([this.texsizeX,this.texsizeY,1/this.texsizeX,1/this.texsizeY])),this.gl.uniform4fv(this.texsizeNoiseLQLoc,[256,256,1/256,1/256]),this.gl.uniform4fv(this.texsizeNoiseMQLoc,[256,256,1/256,1/256]),this.gl.uniform4fv(this.texsizeNoiseHQLoc,[256,256,1/256,1/256]),this.gl.uniform4fv(this.texsizeNoiseLQLiteLoc,[32,32,1/32,1/32]),this.gl.uniform4fv(this.texsizeNoiseVolLQLoc,[32,32,1/32,1/32]),this.gl.uniform4fv(this.texsizeNoiseVolHQLoc,[32,32,1/32,1/32]),this.gl.uniform1f(this.bassLoc,n.bass),this.gl.uniform1f(this.midLoc,n.mid),this.gl.uniform1f(this.trebLoc,n.treb),this.gl.uniform1f(this.volLoc,(n.bass+n.mid+n.treb)/3),this.gl.uniform1f(this.bassAttLoc,n.bass_att),this.gl.uniform1f(this.midAttLoc,n.mid_att),this.gl.uniform1f(this.trebAttLoc,n.treb_att),this.gl.uniform1f(this.volAttLoc,(n.bass_att+n.mid_att+n.treb_att)/3),this.gl.uniform1f(this.frameLoc,n.frame),this.gl.uniform1f(this.fpsLoc,n.fps),this.gl.uniform3fv(this.hueBaseLoc,this.hue_base),this.gl.uniform4fv(this.randPresetLoc,n.rand_preset),this.gl.uniform4fv(this.randFrameLoc,new Float32Array([Math.random(),Math.random(),Math.random(),Math.random()])),this.gl.uniform1f(this.fShaderLoc,n.fshader),this.gl.uniform4fv(this.qaLoc,new Float32Array([n.q1||0,n.q2||0,n.q3||0,n.q4||0])),this.gl.uniform4fv(this.qbLoc,new Float32Array([n.q5||0,n.q6||0,n.q7||0,n.q8||0])),this.gl.uniform4fv(this.qcLoc,new Float32Array([n.q9||0,n.q10||0,n.q11||0,n.q12||0])),this.gl.uniform4fv(this.qdLoc,new Float32Array([n.q13||0,n.q14||0,n.q15||0,n.q16||0])),this.gl.uniform4fv(this.qeLoc,new Float32Array([n.q17||0,n.q18||0,n.q19||0,n.q20||0])),this.gl.uniform4fv(this.qfLoc,new Float32Array([n.q21||0,n.q22||0,n.q23||0,n.q24||0])),this.gl.uniform4fv(this.qgLoc,new Float32Array([n.q25||0,n.q26||0,n.q27||0,n.q28||0])),this.gl.uniform4fv(this.qhLoc,new Float32Array([n.q29||0,n.q30||0,n.q31||0,n.q32||0])),this.gl.uniform4fv(this.slowRoamCosLoc,[.5+.5*Math.cos(.005*n.time),.5+.5*Math.cos(.008*n.time),.5+.5*Math.cos(.013*n.time),.5+.5*Math.cos(.022*n.time)]),this.gl.uniform4fv(this.roamCosLoc,[.5+.5*Math.cos(.3*n.time),.5+.5*Math.cos(1.3*n.time),.5+.5*Math.cos(5*n.time),.5+.5*Math.cos(20*n.time)]),this.gl.uniform4fv(this.slowRoamSinLoc,[.5+.5*Math.sin(.005*n.time),.5+.5*Math.sin(.008*n.time),.5+.5*Math.sin(.013*n.time),.5+.5*Math.sin(.022*n.time)]),this.gl.uniform4fv(this.roamSinLoc,[.5+.5*Math.sin(.3*n.time),.5+.5*Math.sin(1.3*n.time),.5+.5*Math.sin(5*n.time),.5+.5*Math.sin(20*n.time)]),this.bindBlurVals(n),t?this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA):this.gl.disable(this.gl.BLEND),this.gl.drawElements(this.gl.TRIANGLES,this.indices.length,this.gl.UNSIGNED_SHORT,0),t||this.gl.enable(this.gl.BLEND)}}]),t}();e.default=h,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i(0)),s=a(i(1)),n=a(i(2));function a(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(e,i){(0,r.default)(this,t),this.gl=e,this.texsizeX=i.texsizeX,this.texsizeY=i.texsizeY,this.aspectx=i.aspectx,this.aspecty=i.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty,this.positions=new Float32Array([-1,-1,1,-1,-1,1,1,1]),this.vertexBuf=this.gl.createBuffer(),this.floatPrecision=n.default.getFragmentFloatPrecision(this.gl),this.createShader()}return(0,s.default)(t,[{key:"updateGlobals",value:function(t){this.texsizeX=t.texsizeX,this.texsizeY=t.texsizeY,this.aspectx=t.aspectx,this.aspecty=t.aspecty,this.invAspectx=1/this.aspectx,this.invAspecty=1/this.aspecty}},{key:"createShader",value:function(){this.shaderProgram=this.gl.createProgram();var t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,"#version 300 es\n       const vec2 halfmad = vec2(0.5);\n       in vec2 aPos;\n       out vec2 uv;\n       void main(void) {\n         gl_Position = vec4(aPos, 0.0, 1.0);\n         uv = aPos * halfmad + halfmad;\n       }"),this.gl.compileShader(t);var e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,"#version 300 es\n       precision "+this.floatPrecision+" float;\n       precision highp int;\n       precision mediump sampler2D;\n\n       in vec2 uv;\n       out vec4 fragColor;\n       uniform sampler2D uTexture;\n\n       void main(void) {\n         fragColor = vec4(texture(uTexture, uv).rgb, 1.0);\n       }"),this.gl.compileShader(e),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.positionLocation=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.textureLoc=this.gl.getUniformLocation(this.shaderProgram,"uTexture")}},{key:"renderQuadTexture",value:function(t){this.gl.useProgram(this.shaderProgram),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.positions,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.positionLocation,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.positionLocation),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.uniform1i(this.textureLoc,0),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}}]),t}();e.default=o,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(i(0)),s=o(i(1)),n=o(i(52)),a=o(i(53));function o(t){return t&&t.__esModule?t:{default:t}}var h=function(){function t(e,i,s){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,r.default)(this,t),this.blurLevel=e,this.blurRatios=i,this.gl=s,this.texsizeX=o.texsizeX,this.texsizeY=o.texsizeY,this.anisoExt=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.blurHorizontalFrameBuffer=this.gl.createFramebuffer(),this.blurVerticalFrameBuffer=this.gl.createFramebuffer(),this.blurHorizontalTexture=this.gl.createTexture(),this.blurVerticalTexture=this.gl.createTexture(),this.setupFrameBufferTextures(),this.blurHorizontal=new a.default(s,o),this.blurVertical=new n.default(s,o)}return(0,s.default)(t,[{key:"updateGlobals",value:function(t){this.texsizeX=t.texsizeX,this.texsizeY=t.texsizeY,this.setupFrameBufferTextures()}},{key:"getTextureSize",value:function(t){var e=Math.max(this.texsizeX*t,16);e=16*Math.floor((e+3)/16);var i=Math.max(this.texsizeY*t,16);return[e,i=4*Math.floor((i+3)/4)]}},{key:"setupFrameBufferTextures",value:function(){var t=this.blurLevel>0?this.blurRatios[this.blurLevel-1]:[1,1],e=this.blurRatios[this.blurLevel],i=this.getTextureSize(t[1]),r=this.getTextureSize(e[0]);this.bindFrameBufferTexture(this.blurHorizontalFrameBuffer,this.blurHorizontalTexture,r);var s=r,n=this.getTextureSize(e[1]);this.bindFrameBufferTexture(this.blurVerticalFrameBuffer,this.blurVerticalTexture,n),this.horizontalTexsizes=[i,r],this.verticalTexsizes=[s,n]}},{key:"bindFrambufferAndSetViewport",value:function(t,e){this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t),this.gl.viewport(0,0,e[0],e[1])}},{key:"bindFrameBufferTexture",value:function(t,e,i){if(this.gl.bindTexture(this.gl.TEXTURE_2D,e),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,i[0],i[1],0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,new Uint8Array(i[0]*i[1]*4)),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.anisoExt){var r=this.gl.getParameter(this.anisoExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT);this.gl.texParameterf(this.gl.TEXTURE_2D,this.anisoExt.TEXTURE_MAX_ANISOTROPY_EXT,r)}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,t),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,e,0)}},{key:"renderBlurTexture",value:function(t,e){this.bindFrambufferAndSetViewport(this.blurHorizontalFrameBuffer,this.horizontalTexsizes[1]),this.blurHorizontal.renderQuadTexture(t,e,this.horizontalTexsizes[0]),this.gl.bindTexture(this.gl.TEXTURE_2D,this.blurHorizontalTexture),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.bindFrambufferAndSetViewport(this.blurVerticalFrameBuffer,this.verticalTexsizes[1]),this.blurVertical.renderQuadTexture(this.blurHorizontalTexture,e,this.verticalTexsizes[0]),this.gl.bindTexture(this.gl.TEXTURE_2D,this.blurVerticalTexture),this.gl.generateMipmap(this.gl.TEXTURE_2D)}}]),t}();e.default=h,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i(0)),s=a(i(1)),n=a(i(2));function a(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(e){(0,r.default)(this,t),this.gl=e;var i=[4,3.8,3.5,2.9,1.9,1.2,.7,.3],s=i[0]+i[1],a=i[2]+i[3],o=i[4]+i[5],h=i[6]+i[7],u=0+2*i[1]/s,l=2+2*i[3]/a,f=4+2*i[5]/o,c=6+2*i[7]/h;this.ws=new Float32Array([s,a,o,h]),this.ds=new Float32Array([u,l,f,c]),this.wDiv=.5/(s+a+o+h),this.positions=new Float32Array([-1,-1,1,-1,-1,1,1,1]),this.vertexBuf=this.gl.createBuffer(),this.floatPrecision=n.default.getFragmentFloatPrecision(this.gl),this.createShader()}return(0,s.default)(t,[{key:"createShader",value:function(){this.shaderProgram=this.gl.createProgram();var t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,"#version 300 es\n                                      const vec2 halfmad = vec2(0.5);\n                                      in vec2 aPos;\n                                      out vec2 uv;\n                                      void main(void) {\n                                        gl_Position = vec4(aPos, 0.0, 1.0);\n                                        uv = aPos * halfmad + halfmad;\n                                      }"),this.gl.compileShader(t);var e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,"#version 300 es\n       precision "+this.floatPrecision+" float;\n       precision highp int;\n       precision mediump sampler2D;\n\n       in vec2 uv;\n       out vec4 fragColor;\n       uniform sampler2D uTexture;\n       uniform vec4 texsize;\n       uniform float scale;\n       uniform float bias;\n       uniform vec4 ws;\n       uniform vec4 ds;\n       uniform float wdiv;\n\n       void main(void) {\n         float w1 = ws[0];\n         float w2 = ws[1];\n         float w3 = ws[2];\n         float w4 = ws[3];\n         float d1 = ds[0];\n         float d2 = ds[1];\n         float d3 = ds[2];\n         float d4 = ds[3];\n\n         vec2 uv2 = uv.xy;\n\n         vec3 blur =\n           ( texture(uTexture, uv2 + vec2( d1 * texsize.z,0.0) ).xyz\n           + texture(uTexture, uv2 + vec2(-d1 * texsize.z,0.0) ).xyz) * w1 +\n           ( texture(uTexture, uv2 + vec2( d2 * texsize.z,0.0) ).xyz\n           + texture(uTexture, uv2 + vec2(-d2 * texsize.z,0.0) ).xyz) * w2 +\n           ( texture(uTexture, uv2 + vec2( d3 * texsize.z,0.0) ).xyz\n           + texture(uTexture, uv2 + vec2(-d3 * texsize.z,0.0) ).xyz) * w3 +\n           ( texture(uTexture, uv2 + vec2( d4 * texsize.z,0.0) ).xyz\n           + texture(uTexture, uv2 + vec2(-d4 * texsize.z,0.0) ).xyz) * w4;\n\n         blur.xyz *= wdiv;\n         blur.xyz = blur.xyz * scale + bias;\n\n         fragColor = vec4(blur, 1.0);\n       }"),this.gl.compileShader(e),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.positionLocation=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.textureLoc=this.gl.getUniformLocation(this.shaderProgram,"uTexture"),this.texsizeLocation=this.gl.getUniformLocation(this.shaderProgram,"texsize"),this.scaleLoc=this.gl.getUniformLocation(this.shaderProgram,"scale"),this.biasLoc=this.gl.getUniformLocation(this.shaderProgram,"bias"),this.wsLoc=this.gl.getUniformLocation(this.shaderProgram,"ws"),this.dsLocation=this.gl.getUniformLocation(this.shaderProgram,"ds"),this.wdivLoc=this.gl.getUniformLocation(this.shaderProgram,"wdiv")}},{key:"renderQuadTexture",value:function(t,e,i){this.gl.useProgram(this.shaderProgram),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.positions,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.positionLocation,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.positionLocation),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.uniform1i(this.textureLoc,0),this.gl.uniform4fv(this.texsizeLocation,[i[0],i[1],1/i[0],1/i[1]]),this.gl.uniform1f(this.scaleLoc,e.b1x||1),this.gl.uniform1f(this.biasLoc,e.b1n||0),this.gl.uniform4fv(this.wsLoc,this.ws),this.gl.uniform4fv(this.dsLocation,this.ds),this.gl.uniform1f(this.wdivLoc,this.wDiv),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}}]),t}();e.default=o,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i(0)),s=a(i(1)),n=a(i(2));function a(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(e){(0,r.default)(this,t),this.gl=e;var i=[4,3.8,3.5,2.9,1.9,1.2,.7,.3],s=i[0]+i[1]+i[2]+i[3],a=i[4]+i[5]+i[6]+i[7],o=0+(i[2]+i[3])/s*2,h=2+(i[6]+i[7])/a*2;this.wds=new Float32Array([s,a,o,h]),this.wDiv=1/(2*(s+a)),this.positions=new Float32Array([-1,-1,1,-1,-1,1,1,1]),this.vertexBuf=this.gl.createBuffer(),this.floatPrecision=n.default.getFragmentFloatPrecision(this.gl),this.createShader()}return(0,s.default)(t,[{key:"createShader",value:function(){this.shaderProgram=this.gl.createProgram();var t=this.gl.createShader(this.gl.VERTEX_SHADER);this.gl.shaderSource(t,"#version 300 es\n                                      const vec2 halfmad = vec2(0.5);\n                                      in vec2 aPos;\n                                      out vec2 uv;\n                                      void main(void) {\n                                        gl_Position = vec4(aPos, 0.0, 1.0);\n                                        uv = aPos * halfmad + halfmad;\n                                      }"),this.gl.compileShader(t);var e=this.gl.createShader(this.gl.FRAGMENT_SHADER);this.gl.shaderSource(e,"#version 300 es\n       precision "+this.floatPrecision+" float;\n       precision highp int;\n       precision mediump sampler2D;\n\n       in vec2 uv;\n       out vec4 fragColor;\n       uniform sampler2D uTexture;\n       uniform vec4 texsize;\n       uniform float ed1;\n       uniform float ed2;\n       uniform float ed3;\n       uniform vec4 wds;\n       uniform float wdiv;\n\n       void main(void) {\n         float w1 = wds[0];\n         float w2 = wds[1];\n         float d1 = wds[2];\n         float d2 = wds[3];\n\n         vec2 uv2 = uv.xy;\n\n         vec3 blur =\n           ( texture(uTexture, uv2 + vec2(0.0, d1 * texsize.w) ).xyz\n           + texture(uTexture, uv2 + vec2(0.0,-d1 * texsize.w) ).xyz) * w1 +\n           ( texture(uTexture, uv2 + vec2(0.0, d2 * texsize.w) ).xyz\n           + texture(uTexture, uv2 + vec2(0.0,-d2 * texsize.w) ).xyz) * w2;\n\n         blur.xyz *= wdiv;\n\n         float t = min(min(uv.x, uv.y), 1.0 - max(uv.x, uv.y));\n         t = sqrt(t);\n         t = ed1 + ed2 * clamp(t * ed3, 0.0, 1.0);\n         blur.xyz *= t;\n\n         fragColor = vec4(blur, 1.0);\n       }"),this.gl.compileShader(e),this.gl.attachShader(this.shaderProgram,t),this.gl.attachShader(this.shaderProgram,e),this.gl.linkProgram(this.shaderProgram),this.positionLocation=this.gl.getAttribLocation(this.shaderProgram,"aPos"),this.textureLoc=this.gl.getUniformLocation(this.shaderProgram,"uTexture"),this.texsizeLocation=this.gl.getUniformLocation(this.shaderProgram,"texsize"),this.ed1Loc=this.gl.getUniformLocation(this.shaderProgram,"ed1"),this.ed2Loc=this.gl.getUniformLocation(this.shaderProgram,"ed2"),this.ed3Loc=this.gl.getUniformLocation(this.shaderProgram,"ed3"),this.wdsLocation=this.gl.getUniformLocation(this.shaderProgram,"wds"),this.wdivLoc=this.gl.getUniformLocation(this.shaderProgram,"wdiv")}},{key:"renderQuadTexture",value:function(t,e,i){this.gl.useProgram(this.shaderProgram),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuf),this.gl.bufferData(this.gl.ARRAY_BUFFER,this.positions,this.gl.STATIC_DRAW),this.gl.vertexAttribPointer(this.positionLocation,2,this.gl.FLOAT,!1,0,0),this.gl.enableVertexAttribArray(this.positionLocation),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.uniform1i(this.textureLoc,0);var r=e.b1ed||0;this.gl.uniform4fv(this.texsizeLocation,[i[0],i[1],1/i[0],1/i[1]]),this.gl.uniform1f(this.ed1Loc,1-r),this.gl.uniform1f(this.ed2Loc,r),this.gl.uniform1f(this.ed3Loc,5),this.gl.uniform4fv(this.wdsLocation,this.wds),this.gl.uniform1f(this.wdivLoc,this.wDiv),this.gl.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4)}}]),t}();e.default=o,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(i(0)),s=n(i(1));function n(t){return t&&t.__esModule?t:{default:t}}var a=function(){function t(e){(0,r.default)(this,t),this.gl=e,this.anisoExt=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.noiseTexLQ=this.gl.createTexture(),this.noiseTexLQLite=this.gl.createTexture(),this.noiseTexMQ=this.gl.createTexture(),this.noiseTexHQ=this.gl.createTexture(),this.noiseTexVolLQ=this.gl.createTexture(),this.noiseTexVolHQ=this.gl.createTexture(),this.nTexArrLQ=t.createNoiseTex(256,1),this.nTexArrLQLite=t.createNoiseTex(32,1),this.nTexArrMQ=t.createNoiseTex(256,4),this.nTexArrHQ=t.createNoiseTex(256,8),this.nTexArrVolLQ=t.createNoiseVolTex(32,1),this.nTexArrVolHQ=t.createNoiseVolTex(32,4),this.bindTexture(this.noiseTexLQ,this.nTexArrLQ,256,256),this.bindTexture(this.noiseTexLQLite,this.nTexArrLQLite,32,32),this.bindTexture(this.noiseTexMQ,this.nTexArrMQ,256,256),this.bindTexture(this.noiseTexHQ,this.nTexArrHQ,256,256),this.bindTexture3D(this.noiseTexVolLQ,this.nTexArrVolLQ,32,32,32),this.bindTexture3D(this.noiseTexVolHQ,this.nTexArrVolHQ,32,32,32)}return(0,s.default)(t,[{key:"bindTexture",value:function(t,e,i,r){if(this.gl.bindTexture(this.gl.TEXTURE_2D,t),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,i,r,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e),this.gl.generateMipmap(this.gl.TEXTURE_2D),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.anisoExt){var s=this.gl.getParameter(this.anisoExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT);this.gl.texParameterf(this.gl.TEXTURE_2D,this.anisoExt.TEXTURE_MAX_ANISOTROPY_EXT,s)}}},{key:"bindTexture3D",value:function(t,e,i,r,s){if(this.gl.bindTexture(this.gl.TEXTURE_3D,t),this.gl.pixelStorei(this.gl.UNPACK_ALIGNMENT,1),this.gl.texImage3D(this.gl.TEXTURE_3D,0,this.gl.RGBA,i,r,s,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,e),this.gl.generateMipmap(this.gl.TEXTURE_3D),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_S,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_T,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_WRAP_R,this.gl.REPEAT),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR_MIPMAP_LINEAR),this.gl.texParameteri(this.gl.TEXTURE_3D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.anisoExt){var n=this.gl.getParameter(this.anisoExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT);this.gl.texParameterf(this.gl.TEXTURE_3D,this.anisoExt.TEXTURE_MAX_ANISOTROPY_EXT,n)}}}],[{key:"fCubicInterpolate",value:function(t,e,i,r,s){var n=s*s,a=r-i-t+e;return a*(s*n)+(t-e-a)*n+(i-t)*s+e}},{key:"dwCubicInterpolate",value:function(e,i,r,s,n){for(var a=[],o=0;o<4;o++){var h=t.fCubicInterpolate(e[o]/255,i[o]/255,r[o]/255,s[o]/255,n);h=Math.clamp(h,0,1),a[o]=255*h}return a}},{key:"createNoiseVolTex",value:function(e,i){for(var r=e*e*e,s=new Uint8Array(4*r),n=i>1?216:256,a=.5*n,o=0;o<r;o++)s[4*o+0]=Math.floor(Math.random()*n+a),s[4*o+1]=Math.floor(Math.random()*n+a),s[4*o+2]=Math.floor(Math.random()*n+a),s[4*o+3]=Math.floor(Math.random()*n+a);var h=e*e,u=e;if(i>1){for(var l=0;l<e;l+=i)for(var f=0;f<e;f+=i)for(var c=0;c<e;c++)if(c%i!=0){for(var m=Math.floor(c/i)*i+e,g=l*h+f*u,d=[],_=[],v=[],p=[],x=0;x<4;x++)d[x]=s[4*g+(m-i)%e*4+x],_[x]=s[4*g+m%e*4+x],v[x]=s[4*g+(m+i)%e*4+x],p[x]=s[4*g+(m+2*i)%e*4+x];for(var b=c%i/i,y=t.dwCubicInterpolate(d,_,v,p,b),T=0;T<4;T++)s[l*h*4+f*u*4+(4*c+T)]=y[T]}for(var A=0;A<e;A+=i)for(var E=0;E<e;E++)for(var P=0;P<e;P++)if(P%i!=0){for(var L=Math.floor(P/i)*i+e,R=A*h,w=[],S=[],M=[],U=[],F=0;F<4;F++){var q=4*E+4*R+F;w[F]=s[(L-i)%e*u*4+q],S[F]=s[L%e*u*4+q],M[F]=s[(L+i)%e*u*4+q],U[F]=s[(L+2*i)%e*u*4+q]}for(var z=P%i/i,V=t.dwCubicInterpolate(w,S,M,U,z),C=0;C<4;C++)s[P*u*4+(4*E+4*R+C)]=V[C]}for(var D=0;D<e;D++)for(var B=0;B<e;B++)for(var X=0;X<e;X++)if(X%i!=0){for(var I=B*u,k=Math.floor(X/i)*i+e,N=[],O=[],W=[],Y=[],j=0;j<4;j++){var Q=4*D+4*I+j;N[j]=s[(k-i)%e*h*4+Q],O[j]=s[k%e*h*4+Q],W[j]=s[(k+i)%e*h*4+Q],Y[j]=s[(k+2*i)%e*h*4+Q]}for(var H=B%i/i,G=t.dwCubicInterpolate(N,O,W,Y,H),K=0;K<4;K++)s[X*h*4+(4*D+4*I+K)]=G[K]}}return s}},{key:"createNoiseTex",value:function(e,i){for(var r=e*e,s=new Uint8Array(4*r),n=i>1?216:256,a=.5*n,o=0;o<r;o++)s[4*o+0]=Math.floor(Math.random()*n+a),s[4*o+1]=Math.floor(Math.random()*n+a),s[4*o+2]=Math.floor(Math.random()*n+a),s[4*o+3]=Math.floor(Math.random()*n+a);if(i>1){for(var h=0;h<e;h+=i)for(var u=0;u<e;u++)if(u%i!=0){for(var l=Math.floor(u/i)*i+e,f=h*e,c=[],m=[],g=[],d=[],_=0;_<4;_++)c[_]=s[4*f+(l-i)%e*4+_],m[_]=s[4*f+l%e*4+_],g[_]=s[4*f+(l+i)%e*4+_],d[_]=s[4*f+(l+2*i)%e*4+_];for(var v=u%i/i,p=t.dwCubicInterpolate(c,m,g,d,v),x=0;x<4;x++)s[h*e*4+4*u+x]=p[x]}for(var b=0;b<e;b++)for(var y=0;y<e;y++)if(y%i!=0){for(var T=Math.floor(y/i)*i+e,A=[],E=[],P=[],L=[],R=0;R<4;R++)A[R]=s[(T-i)%e*e*4+4*b+R],E[R]=s[T%e*e*4+4*b+R],P[R]=s[(T+i)%e*e*4+4*b+R],L[R]=s[(T+2*i)%e*e*4+4*b+R];for(var w=y%i/i,S=t.dwCubicInterpolate(A,E,P,L,w),M=0;M<4;M++)s[y*e*4+4*b+M]=S[M]}}return s}}]),t}();e.default=a,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(i(0)),s=a(i(1)),n=a(i(3));function a(t){return t&&t.__esModule?t:{default:t}}var o=function(){function t(){(0,r.default)(this,t)}return(0,s.default)(t,null,[{key:"repairPerVertexEQs",value:function(t,e){return n.default.isEmpty(e)||n.default.forEach(e,function(e,i){t[i]=e}),t}},{key:"atan2",value:function(t,e){var i=Math.atan2(t,e);return i<0&&(i+=2*Math.PI),i}}]),t}();e.default=o,t.exports=e.default}])})},135:function(t,e,i){var r;void 0===(r=function(){"use strict;";return{baseVals:{gammaadj:1.9,wave_g:.5,ib_g:.25,mv_x:12,warpscale:3.138,brighten:0,mv_y:9,wave_scale:1.015009,echo_alpha:0,additivewave:0,sx:1,ob_r:0,sy:1,b3x:1,ib_size:.01,b2x:1,warp:536e-6,red_blue:0,b1x:1,wave_mode:7,wave_brighten:1,wrap:1,zoomexp:1,mv_dx:0,mv_dy:0,mv_a:0,fshader:0,wave_r:.5,ib_r:.25,mv_b:1,echo_zoom:1.16936,ob_size:.01,b1ed:.25,wave_smoothing:.522,warpanimspeed:1,wave_dots:0,mv_g:1,wave_x:.5,wave_y:.5,zoom:1.009006,solarize:0,modwavealphabyvolume:1,dx:0,cx:.5,dy:0,ob_a:0,darken_center:0,cy:.5,ob_b:0,mv_l:.9,invert:0,rot:0,wave_thick:0,modwavealphaend:1.31,wave_mystery:0,decay:.98,wave_a:0,ob_g:0,ib_a:0,wave_b:.5,ib_b:.25,mv_r:1,rating:0,b3n:0,b2n:0,modwavealphastart:.83,b1n:0,darken:0,echo_orient:0},init_eqs:function(t){return t.dy_residual=0,t.dx_residual=0,t.bass_thresh=0,t},frame_eqs:function(t){return t.wave_r=.85+.25*Math.sin(.437*t.time+1),t.wave_g=.85+.25*Math.sin(.544*t.time+2),t.wave_b=.85+.25*Math.sin(.751*t.time+3),t.rot=t.rot+.01*(.6*Math.sin(.381*t.time)+.4*Math.sin(.579*t.time)),t.cx=t.cx+.21*(.6*Math.sin(.374*t.time)+.4*Math.sin(.294*t.time)),t.cy=t.cy+.21*(.6*Math.sin(.393*t.time)+.4*Math.sin(.223*t.time)),t.dx=t.dx+.003*(.6*Math.sin(.234*t.time)+.4*Math.sin(.277*t.time)),t.dy=t.dy+.003*(.6*Math.sin(.284*t.time)+.4*Math.sin(.247*t.time)),t.decay=t.decay-.01*equal(mod(t.frame,6),0),t.dx=t.dx+t.dx_residual,t.dy=t.dy+t.dy_residual,t.bass_thresh=2*above(t.bass_att,t.bass_thresh)+(1-above(t.bass_att,t.bass_thresh))*(.96*(t.bass_thresh-1.3)+1.3),t.dx_residual=.016*equal(t.bass_thresh,2.13)*Math.sin(7*t.time)+(1-equal(t.bass_thresh,2.13))*t.dx_residual,t.dy_residual=.012*equal(t.bass_thresh,2.13)*Math.sin(9*t.time)+(1-equal(t.bass_thresh,2.13))*t.dy_residual,t.wave_x=t.wave_x-7*t.dx_residual,t.wave_y=t.wave_y-7*t.dy_residual,t.wave_mystery=.03*t.time,t.zoom=t.zoom+.005*(.6*Math.sin(.1934*t.time+3)+.4*Math.sin(.307*t.time+9)),t.zoom=t.zoom+.4*Math.max(0,t.bass_att-1.1),t.rkeys=[],t},pixel_eqs:"",waves:[{baseVals:{a:1,enabled:0,b:1,g:1,scaling:1,samples:512,additive:0,usedots:0,spectrum:0,r:1,smoothing:.5,thick:0,sep:0},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t},point_eqs:"",init_eqs_str:"",frame_eqs_str:"",point_eqs_str:""},{baseVals:{a:1,enabled:0,b:1,g:1,scaling:1,samples:512,additive:0,usedots:0,spectrum:0,r:1,smoothing:.5,thick:0,sep:0},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t},point_eqs:"",init_eqs_str:"",frame_eqs_str:"",point_eqs_str:""},{baseVals:{a:1,enabled:0,b:1,g:1,scaling:1,samples:512,additive:0,usedots:0,spectrum:0,r:1,smoothing:.5,thick:0,sep:0},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t},point_eqs:"",init_eqs_str:"",frame_eqs_str:"",point_eqs_str:""},{baseVals:{a:1,enabled:0,b:1,g:1,scaling:1,samples:512,additive:0,usedots:0,spectrum:0,r:1,smoothing:.5,thick:0,sep:0},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t},point_eqs:"",init_eqs_str:"",frame_eqs_str:"",point_eqs_str:""}],shapes:[{baseVals:{r2:0,a:1,enabled:0,b:0,tex_ang:0,thickoutline:0,g:0,textured:0,g2:1,tex_zoom:1,additive:0,border_a:.1,border_b:1,b2:0,a2:0,r:1,border_g:1,rad:.1,x:.5,y:.5,ang:0,sides:4,border_r:1},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t},init_eqs_str:"",frame_eqs_str:""},{baseVals:{r2:0,a:1,enabled:0,b:0,tex_ang:0,thickoutline:0,g:0,textured:0,g2:1,tex_zoom:1,additive:0,border_a:.1,border_b:1,b2:0,a2:0,r:1,border_g:1,rad:.1,x:.5,y:.5,ang:0,sides:4,border_r:1},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t},init_eqs_str:"",frame_eqs_str:""},{baseVals:{r2:0,a:1,enabled:0,b:0,tex_ang:0,thickoutline:0,g:0,textured:0,g2:1,tex_zoom:1,additive:0,border_a:.1,border_b:1,b2:0,a2:0,r:1,border_g:1,rad:.1,x:.5,y:.5,ang:0,sides:4,border_r:1},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t},init_eqs_str:"",frame_eqs_str:""},{baseVals:{r2:0,a:1,enabled:0,b:0,tex_ang:0,thickoutline:0,g:0,textured:0,g2:1,tex_zoom:1,additive:0,border_a:.1,border_b:1,b2:0,a2:0,r:1,border_g:1,rad:.1,x:.5,y:.5,ang:0,sides:4,border_r:1},init_eqs:function(t){return t.rkeys=[],t},frame_eqs:function(t){return t},init_eqs_str:"",frame_eqs_str:""}],warp:"shader_body {\n   vec3 ret_1;\n   vec4 tmpvar_2;\n  tmpvar_2 = texture2D (sampler_main, uv);\n  ret_1 = tmpvar_2.xyz;\n   vec4 tmpvar_3;\n  tmpvar_3 = texture2D (sampler_blur2, uv);\n  ret_1 = (ret_1 + ((ret_1 - \n    ((tmpvar_3.xyz * scale2) + bias2)\n  ) * 0.3));\n  ret_1 = (ret_1 * 0.9);\n   vec2 tmpvar_4;\n  tmpvar_4 = (((uv_orig * texsize.xy) * (texsize_noise_lq.zw * 0.4)) + rand_frame.xy);\n   vec4 tmpvar_5;\n  tmpvar_5 = texture2D (sampler_noise_lq, tmpvar_4);\n  ret_1 = (ret_1 + ((\n    ((tmpvar_5.xyz - 0.5) / 256.0)\n   * 122.0) * clamp (\n    (treb_att - 1.0)\n  , 0.0, 1.0)));\n  ret_1 = mix (ret_1, vec3(dot (ret_1, vec3(0.32, 0.49, 0.29))), vec3(0.2, 0.2, 0.2));\n   vec4 tmpvar_6;\n  tmpvar_6.w = 1.0;\n  tmpvar_6.xyz = ret_1;\n  vec4 ret4 = tmpvar_6;\n\n  ret = ret4.xyz;\n}\n",comp:"shader_body {\n   vec3 ret_1;\n   vec4 tmpvar_2;\n  tmpvar_2 = texture2D (sampler_main, uv);\n  ret_1 = tmpvar_2.xyz;\n   vec4 tmpvar_3;\n  tmpvar_3 = texture2D (sampler_blur1, uv);\n  ret_1 = (ret_1 + ((\n    (tmpvar_3.xyz * scale1)\n   + bias1) * 0.4));\n   vec3 tmpvar_4;\n  tmpvar_4 = pow (ret_1, vec3(0.5, 0.8, 1.7));\n  ret_1 = tmpvar_4;\n   vec4 tmpvar_5;\n  tmpvar_5.w = 1.0;\n  tmpvar_5.xyz = tmpvar_4;\n  vec4 ret4 = tmpvar_5;\n\n  ret = ret4.xyz;\n}\n",init_eqs_str:"",frame_eqs_str:"wave_r = 0.85 + 0.25*sin(0.437*time+1);\nwave_g = 0.85 + 0.25*sin(0.544*time+2);\nwave_b = 0.85 + 0.25*sin(0.751*time+3);\nrot = rot + 0.010*( 0.60*sin(0.381*time) + 0.40*sin(0.579*time) );\ncx = cx + 0.210*( 0.60*sin(0.374*time) + 0.40*sin(0.294*time) );\ncy = cy + 0.210*( 0.60*sin(0.393*time) + 0.40*sin(0.223*time) );\ndx = dx + 0.003*( 0.60*sin(0.234*time) + 0.40*sin(0.277*time) );\ndy = dy + 0.003*( 0.60*sin(0.284*time) + 0.40*sin(0.247*time) );\ndecay = decay - 0.01*equal(frame%6,0);\ndx = dx + dx_residual;\ndy = dy + dy_residual;\nbass_thresh = above(bass_att,bass_thresh)*2 + (1-above(bass_att,bass_thresh))*((bass_thresh-1.3)*0.96+1.3);\ndx_residual = equal(bass_thresh,2.13)*0.016*sin(time*7) + (1-equal(bass_thresh,2.13))*dx_residual;\ndy_residual = equal(bass_thresh,2.13)*0.012*sin(time*9) + (1-equal(bass_thresh,2.13))*dy_residual;\nwave_x = wave_x - dx_residual*7;\nwave_y = wave_y - dy_residual*7;\nwave_mystery = time*0.03;\nzoom = zoom + 0.005*( 0.60*sin(0.1934*time+3) + 0.40*sin(0.307*time+9) );\nzoom = zoom + max(0,bass_att-1.1)*0.4;",pixel_eqs_str:""}}.apply(e,[]))||(t.exports=r)}});
//# sourceMappingURL=1-a170d66eb5c481ec1c15.js.map